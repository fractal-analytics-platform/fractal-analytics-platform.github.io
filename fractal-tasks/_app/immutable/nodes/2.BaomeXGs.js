import{s as we,n as ce,o as dt,r as Et,c as De,u as Re,g as Me,a as Pe,k as _t}from"../chunks/scheduler.BvLojk_z.js";import{S as Se,i as Te,m as re,j as J,g as T,e as R,b as se,c as M,d as F,f as ie,p as Ge,o as N,k as L,l as ae,y as le,s as Y,h as W,z as be,A as ye,B as Ve,q as ge,a as Q,n as ve,t as K,C as yt,D as Ie,u as Le,v as Oe,w as ke,x as Ce,E as Ue}from"../chunks/index.CZ-FgkKt.js";import{_ as Lt}from"../chunks/preload-helper.C1FmrZbK.js";function he(r){return(r==null?void 0:r.length)!==void 0?r:Array.from(r)}const Ot=[{pkg_name:"fractal_tasks_core",version:"1.3.3",task_list:[{version:"1.3.3",name:"Convert Cellvoyager to OME-Zarr",category:"Conversion",modality:"HCS",tags:["Yokogawa","Cellvoyager"],input_types:{},output_types:{},docs_link:"https://fractal-analytics-platform.github.io/fractal-tasks-core",type:"compound"},{version:"1.3.3",name:"Convert Cellvoyager Multiplexing to OME-Zarr",category:"Conversion",modality:"HCS",tags:["Yokogawa","Cellvoyager"],input_types:{},output_types:{},docs_link:"https://fractal-analytics-platform.github.io/fractal-tasks-core",type:"compound"},{version:"1.3.3",name:"Project Image (HCS Plate)",category:"Image Processing",modality:"HCS",tags:["Preprocessing"],input_types:{is_3D:!0},output_types:{is_3D:!1},docs_link:"https://fractal-analytics-platform.github.io/fractal-tasks-core",type:"compound"},{version:"1.3.3",name:"Illumination Correction",category:"Image Processing",modality:null,tags:["Preprocessing"],input_types:{illumination_corrected:!1},output_types:{illumination_corrected:!0},docs_link:"https://fractal-analytics-platform.github.io/fractal-tasks-core",type:"parallel"},{version:"1.3.3",name:"Cellpose Segmentation",category:"Segmentation",modality:null,tags:["Deep Learning","Convolutional Neural Network","Instance Segmentation"],input_types:{},output_types:{},docs_link:"https://fractal-analytics-platform.github.io/fractal-tasks-core",type:"parallel"},{version:"1.3.3",name:"Calculate Registration (image-based)",category:"Registration",modality:"HCS",tags:["Multiplexing"],input_types:{},output_types:{},docs_link:"https://fractal-analytics-platform.github.io/fractal-tasks-core",type:"compound"},{version:"1.3.3",name:"Find Registration Consensus",category:"Registration",modality:"HCS",tags:["Multiplexing"],input_types:{},output_types:{},docs_link:"https://fractal-analytics-platform.github.io/fractal-tasks-core",type:"compound"},{version:"1.3.3",name:"Apply Registration to Image",category:"Registration",modality:"HCS",tags:["Multiplexing"],input_types:{registered:!1},output_types:{registered:!0},docs_link:"https://fractal-analytics-platform.github.io/fractal-tasks-core",type:"parallel"},{version:"1.3.3",name:"Import OME-Zarr",category:null,modality:null,tags:[],input_types:{},output_types:{},docs_link:"https://fractal-analytics-platform.github.io/fractal-tasks-core",type:"non_parallel"},{version:"1.3.3",name:"Napari Workflows Wrapper",category:"Measurement",modality:null,tags:[],input_types:{},output_types:{},docs_link:"https://fractal-analytics-platform.github.io/fractal-tasks-core",type:"parallel"}]},{pkg_name:"fractal_faim_ipa",version:"0.4.3",task_list:[{version:"0.4.3",name:"FAIM IPA OME-Zarr Converter",category:"Conversion",modality:"HCS",tags:["Molecular Devices","Image Xpress","MD"],input_types:{},output_types:{},docs_link:null,type:"non_parallel"}]},{pkg_name:"fractal_lif_converters",version:"0.3.3",task_list:[{version:"0.3.3",name:"Convert Lif Plate to OME-Zarr",category:"Conversion",modality:"HCS",tags:["Leica","Plate converter"],input_types:{},output_types:{},docs_link:null,type:"compound"},{version:"0.3.3",name:"Convert Lif Scene to OME-Zarr",category:"Conversion",modality:null,tags:["Leica","Single Image Converter"],input_types:{},output_types:{},docs_link:null,type:"compound"}]},{pkg_name:"operetta_compose",version:"0.2.4",task_list:[{version:"0.2.4",name:"Harmony to OME-Zarr",category:"Conversion",modality:"HCS",tags:["Opera","Operetta","Perkin Elmer"],input_types:{},output_types:{},docs_link:"https://leukemia-kispi.github.io/operetta-compose/",type:"non_parallel"},{version:"0.2.4",name:"Stardist segmentation",category:"Segmentation",modality:null,tags:[],input_types:{},output_types:{},docs_link:"https://leukemia-kispi.github.io/operetta-compose/",type:"parallel"},{version:"0.2.4",name:"Regionprops measurement",category:"Measurement",modality:null,tags:["regionprops","intensity","morphology"],input_types:{},output_types:{},docs_link:"https://leukemia-kispi.github.io/operetta-compose/",type:"parallel"},{version:"0.2.4",name:"Feature classification",category:null,modality:null,tags:["napari feature classifier","object classification"],input_types:{},output_types:{},docs_link:"https://leukemia-kispi.github.io/operetta-compose/",type:"parallel"},{version:"0.2.4",name:"Condition registration",category:null,modality:"HCS",tags:["Metadata","Treatment conditions"],input_types:{},output_types:{},docs_link:"https://leukemia-kispi.github.io/operetta-compose/",type:"parallel"}]},{pkg_name:"fractal_helper_tasks",version:"0.1.2",task_list:[{version:"0.1.2",name:"Drop T Dimension",category:null,modality:null,tags:["Singelton time dimension"],input_types:{},output_types:{has_t:!1},docs_link:null,type:"non_parallel"},{version:"0.1.2",name:"Convert 2D segmentation to 3D",category:null,modality:null,tags:["Mixed modality","2D to 3D workflows"],input_types:{is_3D:!1},output_types:{},docs_link:null,type:"parallel"}]}];var kt=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function ut(r){return r&&r.__esModule&&Object.prototype.hasOwnProperty.call(r,"default")?r.default:r}var Ne={};const Ct=typeof process=="object"&&Ne&&Ne.NODE_DEBUG&&/\bsemver\b/i.test(Ne.NODE_DEBUG)?(...r)=>console.error("SEMVER",...r):()=>{};var pt=Ct;const wt="2.0.0",ft=256,St=Number.MAX_SAFE_INTEGER||9007199254740991,Tt=16,It=ft-6,At=["major","premajor","minor","preminor","patch","prepatch","prerelease"];var mt={MAX_LENGTH:ft,MAX_SAFE_COMPONENT_LENGTH:Tt,MAX_SAFE_BUILD_LENGTH:It,MAX_SAFE_INTEGER:St,RELEASE_TYPES:At,SEMVER_SPEC_VERSION:wt,FLAG_INCLUDE_PRERELEASE:1,FLAG_LOOSE:2},$e={exports:{}};(function(r,t){const{MAX_SAFE_COMPONENT_LENGTH:i,MAX_SAFE_BUILD_LENGTH:l,MAX_LENGTH:h}=mt,f=pt;t=r.exports={};const g=t.re=[],C=t.safeRe=[],c=t.src=[],o=t.t={};let b=0;const E="[a-zA-Z0-9-]",A=[["\\s",1],["\\d",h],[E,l]],I=D=>{for(const[e,s]of A)D=D.split(`${e}*`).join(`${e}{0,${s}}`).split(`${e}+`).join(`${e}{1,${s}}`);return D},v=(D,e,s)=>{const n=I(e),a=b++;f(D,a,e),o[D]=a,c[a]=e,g[a]=new RegExp(e,s?"g":void 0),C[a]=new RegExp(n,s?"g":void 0)};v("NUMERICIDENTIFIER","0|[1-9]\\d*"),v("NUMERICIDENTIFIERLOOSE","\\d+"),v("NONNUMERICIDENTIFIER",`\\d*[a-zA-Z-]${E}*`),v("MAINVERSION",`(${c[o.NUMERICIDENTIFIER]})\\.(${c[o.NUMERICIDENTIFIER]})\\.(${c[o.NUMERICIDENTIFIER]})`),v("MAINVERSIONLOOSE",`(${c[o.NUMERICIDENTIFIERLOOSE]})\\.(${c[o.NUMERICIDENTIFIERLOOSE]})\\.(${c[o.NUMERICIDENTIFIERLOOSE]})`),v("PRERELEASEIDENTIFIER",`(?:${c[o.NUMERICIDENTIFIER]}|${c[o.NONNUMERICIDENTIFIER]})`),v("PRERELEASEIDENTIFIERLOOSE",`(?:${c[o.NUMERICIDENTIFIERLOOSE]}|${c[o.NONNUMERICIDENTIFIER]})`),v("PRERELEASE",`(?:-(${c[o.PRERELEASEIDENTIFIER]}(?:\\.${c[o.PRERELEASEIDENTIFIER]})*))`),v("PRERELEASELOOSE",`(?:-?(${c[o.PRERELEASEIDENTIFIERLOOSE]}(?:\\.${c[o.PRERELEASEIDENTIFIERLOOSE]})*))`),v("BUILDIDENTIFIER",`${E}+`),v("BUILD",`(?:\\+(${c[o.BUILDIDENTIFIER]}(?:\\.${c[o.BUILDIDENTIFIER]})*))`),v("FULLPLAIN",`v?${c[o.MAINVERSION]}${c[o.PRERELEASE]}?${c[o.BUILD]}?`),v("FULL",`^${c[o.FULLPLAIN]}$`),v("LOOSEPLAIN",`[v=\\s]*${c[o.MAINVERSIONLOOSE]}${c[o.PRERELEASELOOSE]}?${c[o.BUILD]}?`),v("LOOSE",`^${c[o.LOOSEPLAIN]}$`),v("GTLT","((?:<|>)?=?)"),v("XRANGEIDENTIFIERLOOSE",`${c[o.NUMERICIDENTIFIERLOOSE]}|x|X|\\*`),v("XRANGEIDENTIFIER",`${c[o.NUMERICIDENTIFIER]}|x|X|\\*`),v("XRANGEPLAIN",`[v=\\s]*(${c[o.XRANGEIDENTIFIER]})(?:\\.(${c[o.XRANGEIDENTIFIER]})(?:\\.(${c[o.XRANGEIDENTIFIER]})(?:${c[o.PRERELEASE]})?${c[o.BUILD]}?)?)?`),v("XRANGEPLAINLOOSE",`[v=\\s]*(${c[o.XRANGEIDENTIFIERLOOSE]})(?:\\.(${c[o.XRANGEIDENTIFIERLOOSE]})(?:\\.(${c[o.XRANGEIDENTIFIERLOOSE]})(?:${c[o.PRERELEASELOOSE]})?${c[o.BUILD]}?)?)?`),v("XRANGE",`^${c[o.GTLT]}\\s*${c[o.XRANGEPLAIN]}$`),v("XRANGELOOSE",`^${c[o.GTLT]}\\s*${c[o.XRANGEPLAINLOOSE]}$`),v("COERCEPLAIN",`(^|[^\\d])(\\d{1,${i}})(?:\\.(\\d{1,${i}}))?(?:\\.(\\d{1,${i}}))?`),v("COERCE",`${c[o.COERCEPLAIN]}(?:$|[^\\d])`),v("COERCEFULL",c[o.COERCEPLAIN]+`(?:${c[o.PRERELEASE]})?(?:${c[o.BUILD]})?(?:$|[^\\d])`),v("COERCERTL",c[o.COERCE],!0),v("COERCERTLFULL",c[o.COERCEFULL],!0),v("LONETILDE","(?:~>?)"),v("TILDETRIM",`(\\s*)${c[o.LONETILDE]}\\s+`,!0),t.tildeTrimReplace="$1~",v("TILDE",`^${c[o.LONETILDE]}${c[o.XRANGEPLAIN]}$`),v("TILDELOOSE",`^${c[o.LONETILDE]}${c[o.XRANGEPLAINLOOSE]}$`),v("LONECARET","(?:\\^)"),v("CARETTRIM",`(\\s*)${c[o.LONECARET]}\\s+`,!0),t.caretTrimReplace="$1^",v("CARET",`^${c[o.LONECARET]}${c[o.XRANGEPLAIN]}$`),v("CARETLOOSE",`^${c[o.LONECARET]}${c[o.XRANGEPLAINLOOSE]}$`),v("COMPARATORLOOSE",`^${c[o.GTLT]}\\s*(${c[o.LOOSEPLAIN]})$|^$`),v("COMPARATOR",`^${c[o.GTLT]}\\s*(${c[o.FULLPLAIN]})$|^$`),v("COMPARATORTRIM",`(\\s*)${c[o.GTLT]}\\s*(${c[o.LOOSEPLAIN]}|${c[o.XRANGEPLAIN]})`,!0),t.comparatorTrimReplace="$1$2$3",v("HYPHENRANGE",`^\\s*(${c[o.XRANGEPLAIN]})\\s+-\\s+(${c[o.XRANGEPLAIN]})\\s*$`),v("HYPHENRANGELOOSE",`^\\s*(${c[o.XRANGEPLAINLOOSE]})\\s+-\\s+(${c[o.XRANGEPLAINLOOSE]})\\s*$`),v("STAR","(<|>)?=?\\s*\\*"),v("GTE0","^\\s*>=\\s*0\\.0\\.0\\s*$"),v("GTE0PRE","^\\s*>=\\s*0\\.0\\.0-0\\s*$")})($e,$e.exports);var Nt=$e.exports;const Dt=Object.freeze({loose:!0}),Rt=Object.freeze({}),Mt=r=>r?typeof r!="object"?Dt:r:Rt;var Pt=Mt;const Xe=/^[0-9]+$/,gt=(r,t)=>{const i=Xe.test(r),l=Xe.test(t);return i&&l&&(r=+r,t=+t),r===t?0:i&&!l?-1:l&&!i?1:r<t?-1:1},Vt=(r,t)=>gt(t,r);var $t={compareIdentifiers:gt,rcompareIdentifiers:Vt};const Ee=pt,{MAX_LENGTH:je,MAX_SAFE_INTEGER:_e}=mt,{safeRe:qe,t:ze}=Nt,xt=Pt,{compareIdentifiers:pe}=$t;let Ft=class ne{constructor(t,i){if(i=xt(i),t instanceof ne){if(t.loose===!!i.loose&&t.includePrerelease===!!i.includePrerelease)return t;t=t.version}else if(typeof t!="string")throw new TypeError(`Invalid version. Must be a string. Got type "${typeof t}".`);if(t.length>je)throw new TypeError(`version is longer than ${je} characters`);Ee("SemVer",t,i),this.options=i,this.loose=!!i.loose,this.includePrerelease=!!i.includePrerelease;const l=t.trim().match(i.loose?qe[ze.LOOSE]:qe[ze.FULL]);if(!l)throw new TypeError(`Invalid Version: ${t}`);if(this.raw=t,this.major=+l[1],this.minor=+l[2],this.patch=+l[3],this.major>_e||this.major<0)throw new TypeError("Invalid major version");if(this.minor>_e||this.minor<0)throw new TypeError("Invalid minor version");if(this.patch>_e||this.patch<0)throw new TypeError("Invalid patch version");l[4]?this.prerelease=l[4].split(".").map(h=>{if(/^[0-9]+$/.test(h)){const f=+h;if(f>=0&&f<_e)return f}return h}):this.prerelease=[],this.build=l[5]?l[5].split("."):[],this.format()}format(){return this.version=`${this.major}.${this.minor}.${this.patch}`,this.prerelease.length&&(this.version+=`-${this.prerelease.join(".")}`),this.version}toString(){return this.version}compare(t){if(Ee("SemVer.compare",this.version,this.options,t),!(t instanceof ne)){if(typeof t=="string"&&t===this.version)return 0;t=new ne(t,this.options)}return t.version===this.version?0:this.compareMain(t)||this.comparePre(t)}compareMain(t){return t instanceof ne||(t=new ne(t,this.options)),pe(this.major,t.major)||pe(this.minor,t.minor)||pe(this.patch,t.patch)}comparePre(t){if(t instanceof ne||(t=new ne(t,this.options)),this.prerelease.length&&!t.prerelease.length)return-1;if(!this.prerelease.length&&t.prerelease.length)return 1;if(!this.prerelease.length&&!t.prerelease.length)return 0;let i=0;do{const l=this.prerelease[i],h=t.prerelease[i];if(Ee("prerelease compare",i,l,h),l===void 0&&h===void 0)return 0;if(h===void 0)return 1;if(l===void 0)return-1;if(l===h)continue;return pe(l,h)}while(++i)}compareBuild(t){t instanceof ne||(t=new ne(t,this.options));let i=0;do{const l=this.build[i],h=t.build[i];if(Ee("build compare",i,l,h),l===void 0&&h===void 0)return 0;if(h===void 0)return 1;if(l===void 0)return-1;if(l===h)continue;return pe(l,h)}while(++i)}inc(t,i,l){switch(t){case"premajor":this.prerelease.length=0,this.patch=0,this.minor=0,this.major++,this.inc("pre",i,l);break;case"preminor":this.prerelease.length=0,this.patch=0,this.minor++,this.inc("pre",i,l);break;case"prepatch":this.prerelease.length=0,this.inc("patch",i,l),this.inc("pre",i,l);break;case"prerelease":this.prerelease.length===0&&this.inc("patch",i,l),this.inc("pre",i,l);break;case"major":(this.minor!==0||this.patch!==0||this.prerelease.length===0)&&this.major++,this.minor=0,this.patch=0,this.prerelease=[];break;case"minor":(this.patch!==0||this.prerelease.length===0)&&this.minor++,this.patch=0,this.prerelease=[];break;case"patch":this.prerelease.length===0&&this.patch++,this.prerelease=[];break;case"pre":{const h=Number(l)?1:0;if(!i&&l===!1)throw new Error("invalid increment argument: identifier is empty");if(this.prerelease.length===0)this.prerelease=[h];else{let f=this.prerelease.length;for(;--f>=0;)typeof this.prerelease[f]=="number"&&(this.prerelease[f]++,f=-2);if(f===-1){if(i===this.prerelease.join(".")&&l===!1)throw new Error("invalid increment argument: identifier already exists");this.prerelease.push(h)}}if(i){let f=[i,h];l===!1&&(f=[i]),pe(this.prerelease[0],i)===0?isNaN(this.prerelease[1])&&(this.prerelease=f):this.prerelease=f}break}default:throw new Error(`invalid increment argument: ${t}`)}return this.raw=this.format(),this.build.length&&(this.raw+=`+${this.build.join(".")}`),this}};var Ht=Ft;const Ze=Ht,Bt=(r,t,i)=>new Ze(r,i).compare(new Ze(t,i));var Gt=Bt;const Ut=Gt,Xt=(r,t)=>Ut(r,t,!0);var jt=Xt;const qt=ut(jt);function zt(r,t){const i=[];for(const l of r)for(const h of l.task_list){const f=l[t];let g=i.find(o=>o.groupTitle===f);const C=Yt(l,h),c=l.version||"";if(g){let o=g.tasks.find(b=>Object.values(b.taskVersions).find(E=>E.task_name===h.name));o?o.taskVersions[c]=C:(o={selectedVersion:c,taskVersions:{[c]:C}},g.tasks.push(o))}else g={groupTitle:l[t],tasks:[{selectedVersion:c,taskVersions:{[c]:C}}]},i.push(g)}return Zt(i),i}function Zt(r){for(const t of r){for(const i of t.tasks){const l=Object.keys(i.taskVersions).filter(h=>h!=="");l.length>0&&(xe(l),i.selectedVersion=l[0])}t.tasks.sort((i,l)=>i.taskVersions[i.selectedVersion].task_id<l.taskVersions[l.selectedVersion].task_id?-1:1)}r.sort((t,i)=>t.groupTitle.localeCompare(i.groupTitle,void 0,{sensitivity:"base"}))}function xe(r){try{r.sort((t,i)=>t?i?qt(t,i):1:-1).reverse()}catch(t){console.warn("Semver error:",t)}return r}function Yt(r,t){return{pkg_name:r.pkg_name,task_id:t.id,task_name:t.name,version:r.version||"",category:t.category,modality:t.modality,authors:t.authors,tags:t.tags,input_types:t.input_types,docs_info:t.docs_info||""}}var vt={exports:{}};(function(r,t){(function(i,l){r.exports=l()})(kt,function(){class i{constructor(e){e||(e={}),this.main=e.main||"ss-main",this.placeholder=e.placeholder||"ss-placeholder",this.values=e.values||"ss-values",this.single=e.single||"ss-single",this.max=e.max||"ss-max",this.value=e.value||"ss-value",this.valueText=e.valueText||"ss-value-text",this.valueDelete=e.valueDelete||"ss-value-delete",this.valueOut=e.valueOut||"ss-value-out",this.deselect=e.deselect||"ss-deselect",this.deselectPath=e.deselectPath||"M10,10 L90,90 M10,90 L90,10",this.arrow=e.arrow||"ss-arrow",this.arrowClose=e.arrowClose||"M10,30 L50,70 L90,30",this.arrowOpen=e.arrowOpen||"M10,70 L50,30 L90,70",this.content=e.content||"ss-content",this.openAbove=e.openAbove||"ss-open-above",this.openBelow=e.openBelow||"ss-open-below",this.search=e.search||"ss-search",this.searchHighlighter=e.searchHighlighter||"ss-search-highlight",this.searching=e.searching||"ss-searching",this.addable=e.addable||"ss-addable",this.addablePath=e.addablePath||"M50,10 L50,90 M10,50 L90,50",this.list=e.list||"ss-list",this.optgroup=e.optgroup||"ss-optgroup",this.optgroupLabel=e.optgroupLabel||"ss-optgroup-label",this.optgroupLabelText=e.optgroupLabelText||"ss-optgroup-label-text",this.optgroupActions=e.optgroupActions||"ss-optgroup-actions",this.optgroupSelectAll=e.optgroupSelectAll||"ss-selectall",this.optgroupSelectAllBox=e.optgroupSelectAllBox||"M60,10 L10,10 L10,90 L90,90 L90,50",this.optgroupSelectAllCheck=e.optgroupSelectAllCheck||"M30,45 L50,70 L90,10",this.optgroupClosable=e.optgroupClosable||"ss-closable",this.option=e.option||"ss-option",this.optionDelete=e.optionDelete||"M10,10 L90,90 M10,90 L90,10",this.highlighted=e.highlighted||"ss-highlighted",this.open=e.open||"ss-open",this.close=e.close||"ss-close",this.selected=e.selected||"ss-selected",this.error=e.error||"ss-error",this.disabled=e.disabled||"ss-disabled",this.hide=e.hide||"ss-hide"}}function l(){return Math.random().toString(36).substring(2,10)}function h(D,e){function s(a,d){return d&&a&&a.classList&&a.classList.contains(d)||d&&a&&a.dataset&&a.dataset.id&&a.dataset.id===e?a:null}function n(a,d){return!a||a===document?null:s(a,d)?a:n(a.parentNode,d)}return s(D,e)||n(D,e)}function f(D,e=50,s=!1){let n;return function(...a){const d=self,m=()=>{n=null,s||D.apply(d,a)},p=s&&!n;clearTimeout(n),n=setTimeout(m,e),p&&D.apply(d,a)}}function g(D,e){return JSON.stringify(D)===JSON.stringify(e)}function C(D){const e=D.replace(/[A-Z\u00C0-\u00D6\u00D8-\u00DE]/g,s=>"-"+s.toLowerCase());return D[0]===D[0].toUpperCase()?e.substring(1):e}class c{constructor(e){if(this.id=!e.id||e.id===""?l():e.id,this.label=e.label||"",this.selectAll=e.selectAll===void 0?!1:e.selectAll,this.selectAllText=e.selectAllText||"Select All",this.closable=e.closable||"off",this.options=[],e.options)for(const s of e.options)this.options.push(new o(s))}}class o{constructor(e){this.id=!e.id||e.id===""?l():e.id,this.value=e.value===void 0?e.text:e.value,this.text=e.text||"",this.html=e.html||"",this.selected=e.selected!==void 0?e.selected:!1,this.display=e.display!==void 0?e.display:!0,this.disabled=e.disabled!==void 0?e.disabled:!1,this.mandatory=e.mandatory!==void 0?e.mandatory:!1,this.placeholder=e.placeholder!==void 0?e.placeholder:!1,this.class=e.class||"",this.style=e.style||"",this.data=e.data||{}}}class b{constructor(e,s){this.selectType="single",this.data=[],this.selectedOrder=[],this.selectType=e,this.setData(s)}validateDataArray(e){if(!Array.isArray(e))return new Error("Data must be an array");for(let s of e)if(s instanceof c||"label"in s){if(!("label"in s))return new Error("Optgroup must have a label");if("options"in s&&s.options)for(let n of s.options){const a=this.validateOption(n);if(a)return a}}else if(s instanceof o||"text"in s){const n=this.validateOption(s);if(n)return n}else return new Error("Data object must be a valid optgroup or option");return null}validateOption(e){return"text"in e?null:new Error("Option must have a text")}partialToFullData(e){let s=[];return e.forEach(n=>{if(n instanceof c||"label"in n){let a=[];"options"in n&&n.options&&n.options.forEach(d=>{a.push(new o(d))}),a.length>0&&s.push(new c(n))}(n instanceof o||"text"in n)&&s.push(new o(n))}),s}setData(e){this.data=this.partialToFullData(e),this.selectType==="single"&&this.setSelectedBy("id",this.getSelected())}getData(){return this.filter(null,!0)}getDataOptions(){return this.filter(null,!1)}addOption(e,s=!1){if(s){let n=[new o(e)];this.setData(n.concat(this.getData()))}else this.setData(this.getData().concat(new o(e)))}setSelectedBy(e,s){let n=null,a=!1;const d=[];for(let p of this.data){if(p instanceof c)for(let _ of p.options)n||(n=_),_.selected=a?!1:s.includes(_[e]),_.selected&&(d.push(_),this.selectType==="single"&&(a=!0));p instanceof o&&(n||(n=p),p.selected=a?!1:s.includes(p[e]),p.selected&&(d.push(p),this.selectType==="single"&&(a=!0)))}this.selectType==="single"&&n&&!a&&(n.selected=!0,d.push(n));const m=s.map(p=>{var _;return((_=d.find(O=>O[e]===p))===null||_===void 0?void 0:_.id)||""});this.selectedOrder=m}getSelected(){return this.getSelectedOptions().map(e=>e.id)}getSelectedValues(){return this.getSelectedOptions().map(e=>e.value)}getSelectedOptions(){return this.filter(e=>e.selected,!1)}getOptgroupByID(e){for(let s of this.data)if(s instanceof c&&s.id===e)return s;return null}getOptionByID(e){let s=this.filter(n=>n.id===e,!1);return s.length?s[0]:null}getSelectType(){return this.selectType}getFirstOption(){let e=null;for(let s of this.data)if(s instanceof c?e=s.options[0]:s instanceof o&&(e=s),e)break;return e}search(e,s){return e=e.trim(),e===""?this.getData():this.filter(n=>s(n,e),!0)}filter(e,s){const n=[];return this.data.forEach(a=>{if(a instanceof c){let d=[];if(a.options.forEach(m=>{(!e||e(m))&&(s?d.push(new o(m)):n.push(new o(m)))}),d.length>0){let m=new c(a);m.options=d,n.push(m)}}a instanceof o&&(!e||e(a))&&n.push(new o(a))}),n}selectedOrderOptions(e){const s=[];return this.selectedOrder.forEach(n=>{const a=e.find(d=>d.id===n);a&&s.push(a)}),e.forEach(n=>{let a=!1;s.forEach(d=>{if(n.id===d.id){a=!0;return}}),a||s.push(n)}),s}}class E{constructor(e,s,n,a){this.store=n,this.settings=e,this.classes=s,this.callbacks=a,this.main=this.mainDiv(),this.content=this.contentDiv(),this.updateClassStyles(),this.updateAriaAttributes(),this.settings.contentLocation&&this.settings.contentLocation.appendChild(this.content.main)}enable(){this.main.main.classList.remove(this.classes.disabled),this.content.search.input.disabled=!1}disable(){this.main.main.classList.add(this.classes.disabled),this.content.search.input.disabled=!0}open(){this.main.arrow.path.setAttribute("d",this.classes.arrowOpen),this.main.main.classList.add(this.settings.openPosition==="up"?this.classes.openAbove:this.classes.openBelow),this.main.main.setAttribute("aria-expanded","true"),this.moveContent();const e=this.store.getSelectedOptions();if(e.length){const s=e[e.length-1].id,n=this.content.list.querySelector('[data-id="'+s+'"]');n&&this.ensureElementInView(this.content.list,n)}}close(){this.main.main.classList.remove(this.classes.openAbove),this.main.main.classList.remove(this.classes.openBelow),this.main.main.setAttribute("aria-expanded","false"),this.content.main.classList.remove(this.classes.openAbove),this.content.main.classList.remove(this.classes.openBelow),this.main.arrow.path.setAttribute("d",this.classes.arrowClose)}updateClassStyles(){if(this.main.main.className="",this.main.main.removeAttribute("style"),this.content.main.className="",this.content.main.removeAttribute("style"),this.main.main.classList.add(this.classes.main),this.content.main.classList.add(this.classes.content),this.settings.style!==""&&(this.main.main.style.cssText=this.settings.style,this.content.main.style.cssText=this.settings.style),this.settings.class.length)for(const e of this.settings.class)e.trim()!==""&&(this.main.main.classList.add(e.trim()),this.content.main.classList.add(e.trim()));(this.settings.contentPosition==="relative"||this.settings.contentPosition==="fixed")&&this.content.main.classList.add("ss-"+this.settings.contentPosition)}updateAriaAttributes(){this.main.main.role="combobox",this.main.main.setAttribute("aria-haspopup","listbox"),this.main.main.setAttribute("aria-controls",this.content.main.id),this.main.main.setAttribute("aria-expanded","false"),this.content.main.setAttribute("role","listbox")}mainDiv(){var e;const s=document.createElement("div");s.dataset.id=this.settings.id,s.setAttribute("aria-label",this.settings.ariaLabel),s.tabIndex=0,s.onkeydown=w=>{switch(w.key){case"ArrowUp":case"ArrowDown":return this.callbacks.open(),w.key==="ArrowDown"?this.highlight("down"):this.highlight("up"),!1;case"Tab":return this.callbacks.close(),!0;case"Enter":case" ":this.callbacks.open();const k=this.content.list.querySelector("."+this.classes.highlighted);return k&&k.click(),!1;case"Escape":return this.callbacks.close(),!1}return w.key.length===1&&this.callbacks.open(),!0},s.onclick=w=>{this.settings.disabled||(this.settings.isOpen?this.callbacks.close():this.callbacks.open())};const n=document.createElement("div");n.classList.add(this.classes.values),s.appendChild(n);const a=document.createElement("div");a.classList.add(this.classes.deselect);const d=(e=this.store)===null||e===void 0?void 0:e.getSelectedOptions();!this.settings.allowDeselect||this.settings.isMultiple&&d&&d.length<=0?a.classList.add(this.classes.hide):a.classList.remove(this.classes.hide),a.onclick=w=>{if(w.stopPropagation(),this.settings.disabled)return;let k=!0;const B=this.store.getSelectedOptions(),H=[];if(this.callbacks.beforeChange&&(k=this.callbacks.beforeChange(H,B)===!0),k){if(this.settings.isMultiple)this.callbacks.setSelected([],!1),this.updateDeselectAll();else{const P=this.store.getFirstOption(),$=P?P.id:"";this.callbacks.setSelected($,!1)}this.settings.closeOnSelect&&this.callbacks.close(),this.callbacks.afterChange&&this.callbacks.afterChange(this.store.getSelectedOptions())}};const m=document.createElementNS("http://www.w3.org/2000/svg","svg");m.setAttribute("viewBox","0 0 100 100");const p=document.createElementNS("http://www.w3.org/2000/svg","path");p.setAttribute("d",this.classes.deselectPath),m.appendChild(p),a.appendChild(m),s.appendChild(a);const _=document.createElementNS("http://www.w3.org/2000/svg","svg");_.classList.add(this.classes.arrow),_.setAttribute("viewBox","0 0 100 100");const O=document.createElementNS("http://www.w3.org/2000/svg","path");return O.setAttribute("d",this.classes.arrowClose),this.settings.alwaysOpen&&_.classList.add(this.classes.hide),_.appendChild(O),s.appendChild(_),{main:s,values:n,deselect:{main:a,svg:m,path:p},arrow:{main:_,path:O}}}mainFocus(e){e!=="click"&&this.main.main.focus({preventScroll:!0})}placeholder(){const e=this.store.filter(a=>a.placeholder,!1);let s=this.settings.placeholderText;e.length&&(e[0].html!==""?s=e[0].html:e[0].text!==""&&(s=e[0].text));const n=document.createElement("div");return n.classList.add(this.classes.placeholder),n.innerHTML=s,n}renderValues(){if(!this.settings.isMultiple){this.renderSingleValue();return}this.renderMultipleValues(),this.updateDeselectAll()}renderSingleValue(){const e=this.store.filter(n=>n.selected&&!n.placeholder,!1),s=e.length>0?e[0]:null;if(!s)this.main.values.innerHTML=this.placeholder().outerHTML;else{const n=document.createElement("div");n.classList.add(this.classes.single),s.html?n.innerHTML=s.html:n.innerText=s.text,this.main.values.innerHTML=n.outerHTML}!this.settings.allowDeselect||!e.length?this.main.deselect.main.classList.add(this.classes.hide):this.main.deselect.main.classList.remove(this.classes.hide)}renderMultipleValues(){let e=this.main.values.childNodes,s=this.store.filter(a=>a.selected&&a.display,!1);if(s.length===0){this.main.values.innerHTML=this.placeholder().outerHTML;return}else{const a=this.main.values.querySelector("."+this.classes.placeholder);a&&a.remove()}if(s.length>this.settings.maxValuesShown){const a=document.createElement("div");a.classList.add(this.classes.max),a.textContent=this.settings.maxValuesMessage.replace("{number}",s.length.toString()),this.main.values.innerHTML=a.outerHTML;return}else{const a=this.main.values.querySelector("."+this.classes.max);a&&a.remove()}this.settings.keepOrder&&(s=this.store.selectedOrderOptions(s));let n=[];for(let a=0;a<e.length;a++){const d=e[a],m=d.getAttribute("data-id");m&&(s.filter(_=>_.id===m,!1).length||n.push(d))}for(const a of n)a.classList.add(this.classes.valueOut),setTimeout(()=>{this.main.values.hasChildNodes()&&this.main.values.contains(a)&&this.main.values.removeChild(a)},100);e=this.main.values.childNodes;for(let a=0;a<s.length;a++){let d=!0;for(let m=0;m<e.length;m++)s[a].id===String(e[m].dataset.id)&&(d=!1);d&&(this.settings.keepOrder?this.main.values.appendChild(this.multipleValue(s[a])):e.length===0?this.main.values.appendChild(this.multipleValue(s[a])):a===0?this.main.values.insertBefore(this.multipleValue(s[a]),e[a]):e[a-1].insertAdjacentElement("afterend",this.multipleValue(s[a])))}}multipleValue(e){const s=document.createElement("div");s.classList.add(this.classes.value),s.dataset.id=e.id;const n=document.createElement("div");if(n.classList.add(this.classes.valueText),n.textContent=e.text,s.appendChild(n),!e.mandatory){const a=document.createElement("div");a.classList.add(this.classes.valueDelete),a.onclick=p=>{if(p.preventDefault(),p.stopPropagation(),this.settings.disabled)return;let _=!0;const O=this.store.getSelectedOptions(),w=O.filter(k=>k.selected&&k.id!==e.id,!0);if(!(this.settings.minSelected&&w.length<this.settings.minSelected)&&(this.callbacks.beforeChange&&(_=this.callbacks.beforeChange(w,O)===!0),_)){let k=[];for(const B of w){if(B instanceof c)for(const H of B.options)k.push(H.id);B instanceof o&&k.push(B.id)}this.callbacks.setSelected(k,!1),this.settings.closeOnSelect&&this.callbacks.close(),this.callbacks.afterChange&&this.callbacks.afterChange(w),this.updateDeselectAll()}};const d=document.createElementNS("http://www.w3.org/2000/svg","svg");d.setAttribute("viewBox","0 0 100 100");const m=document.createElementNS("http://www.w3.org/2000/svg","path");m.setAttribute("d",this.classes.optionDelete),d.appendChild(m),a.appendChild(d),s.appendChild(a)}return s}contentDiv(){const e=document.createElement("div");e.dataset.id=this.settings.id;const s=this.searchDiv();e.appendChild(s.main);const n=this.listDiv();return e.appendChild(n),{main:e,search:s,list:n}}moveContent(){if(this.settings.contentPosition==="relative"){this.moveContentBelow();return}if(this.settings.openPosition==="down"){this.moveContentBelow();return}else if(this.settings.openPosition==="up"){this.moveContentAbove();return}this.putContent()==="up"?this.moveContentAbove():this.moveContentBelow()}searchDiv(){const e=document.createElement("div"),s=document.createElement("input"),n=document.createElement("div");e.classList.add(this.classes.search);const a={main:e,input:s};if(this.settings.showSearch||(e.classList.add(this.classes.hide),s.readOnly=!0),s.type="search",s.placeholder=this.settings.searchPlaceholder,s.tabIndex=-1,s.setAttribute("aria-label",this.settings.searchPlaceholder),s.setAttribute("autocapitalize","off"),s.setAttribute("autocomplete","off"),s.setAttribute("autocorrect","off"),s.oninput=f(d=>{this.callbacks.search(d.target.value)},100),s.onkeydown=d=>{switch(d.key){case"ArrowUp":case"ArrowDown":return d.key==="ArrowDown"?this.highlight("down"):this.highlight("up"),!1;case"Tab":return this.callbacks.close(),!0;case"Escape":return this.callbacks.close(),!1;case" ":const m=this.content.list.querySelector("."+this.classes.highlighted);return m?(m.click(),!1):!0;case"Enter":if(this.callbacks.addable)return n.click(),!1;{const p=this.content.list.querySelector("."+this.classes.highlighted);if(p)return p.click(),!1}return!0}return!0},e.appendChild(s),this.callbacks.addable){n.classList.add(this.classes.addable);const d=document.createElementNS("http://www.w3.org/2000/svg","svg");d.setAttribute("viewBox","0 0 100 100");const m=document.createElementNS("http://www.w3.org/2000/svg","path");m.setAttribute("d",this.classes.addablePath),d.appendChild(m),n.appendChild(d),n.onclick=p=>{if(p.preventDefault(),p.stopPropagation(),!this.callbacks.addable)return;const _=this.content.search.input.value.trim();if(_===""){this.content.search.input.focus();return}const O=k=>{let B=new o(k);if(this.callbacks.addOption(B),this.settings.isMultiple){let H=this.store.getSelected();H.push(B.id),this.callbacks.setSelected(H,!0)}else this.callbacks.setSelected([B.id],!0);this.callbacks.search(""),this.settings.closeOnSelect&&setTimeout(()=>{this.callbacks.close()},100)},w=this.callbacks.addable(_);w===!1||w===void 0||w===null||(w instanceof Promise?w.then(k=>{typeof k=="string"?O({text:k,value:k}):w instanceof Error?this.renderError(w.message):O(k)}):typeof w=="string"?O({text:w,value:w}):w instanceof Error?this.renderError(w.message):O(w))},e.appendChild(n),a.addable={main:n,svg:d,path:m}}return a}searchFocus(){this.content.search.input.focus()}getOptions(e=!1,s=!1,n=!1){let a="."+this.classes.option;return e&&(a+=":not(."+this.classes.placeholder+")"),s&&(a+=":not(."+this.classes.disabled+")"),n&&(a+=":not(."+this.classes.hide+")"),Array.from(this.content.list.querySelectorAll(a))}highlight(e){const s=this.getOptions(!0,!0,!0);if(s.length===0)return;if(s.length===1&&!s[0].classList.contains(this.classes.highlighted)){s[0].classList.add(this.classes.highlighted);return}let n=!1;for(const a of s)a.classList.contains(this.classes.highlighted)&&(n=!0);if(!n){for(const a of s)if(a.classList.contains(this.classes.selected)){a.classList.add(this.classes.highlighted);break}}for(let a=0;a<s.length;a++)if(s[a].classList.contains(this.classes.highlighted)){const d=s[a];d.classList.remove(this.classes.highlighted);const m=d.parentElement;if(m&&m.classList.contains(this.classes.open)){const O=m.querySelector("."+this.classes.optgroupLabel);O&&O.click()}let p=s[e==="down"?a+1<s.length?a+1:0:a-1>=0?a-1:s.length-1];p.classList.add(this.classes.highlighted),this.ensureElementInView(this.content.list,p);const _=p.parentElement;if(_&&_.classList.contains(this.classes.close)){const O=_.querySelector("."+this.classes.optgroupLabel);O&&O.click()}return}s[e==="down"?0:s.length-1].classList.add(this.classes.highlighted),this.ensureElementInView(this.content.list,s[e==="down"?0:s.length-1])}listDiv(){const e=document.createElement("div");return e.classList.add(this.classes.list),e}renderError(e){this.content.list.innerHTML="";const s=document.createElement("div");s.classList.add(this.classes.error),s.textContent=e,this.content.list.appendChild(s)}renderSearching(){this.content.list.innerHTML="";const e=document.createElement("div");e.classList.add(this.classes.searching),e.textContent=this.settings.searchingText,this.content.list.appendChild(e)}renderOptions(e){if(this.content.list.innerHTML="",e.length===0){const s=document.createElement("div");s.classList.add(this.classes.search),this.callbacks.addable?s.innerHTML=this.settings.addableText.replace("{value}",this.content.search.input.value):s.innerHTML=this.settings.searchText,this.content.list.appendChild(s);return}this.settings.allowDeselect&&!this.settings.isMultiple&&(this.store.filter(n=>n.placeholder,!1).length||this.store.addOption(new o({text:"",value:"",selected:!1,placeholder:!0}),!0));for(const s of e){if(s instanceof c){const n=document.createElement("div");n.classList.add(this.classes.optgroup);const a=document.createElement("div");a.classList.add(this.classes.optgroupLabel),n.appendChild(a);const d=document.createElement("div");d.classList.add(this.classes.optgroupLabelText),d.textContent=s.label,a.appendChild(d);const m=document.createElement("div");if(m.classList.add(this.classes.optgroupActions),a.appendChild(m),this.settings.isMultiple&&s.selectAll){const p=document.createElement("div");p.classList.add(this.classes.optgroupSelectAll);let _=!0;for(const H of s.options)if(!H.selected){_=!1;break}_&&p.classList.add(this.classes.selected);const O=document.createElement("span");O.textContent=s.selectAllText,p.appendChild(O);const w=document.createElementNS("http://www.w3.org/2000/svg","svg");w.setAttribute("viewBox","0 0 100 100"),p.appendChild(w);const k=document.createElementNS("http://www.w3.org/2000/svg","path");k.setAttribute("d",this.classes.optgroupSelectAllBox),w.appendChild(k);const B=document.createElementNS("http://www.w3.org/2000/svg","path");B.setAttribute("d",this.classes.optgroupSelectAllCheck),w.appendChild(B),p.addEventListener("click",H=>{H.preventDefault(),H.stopPropagation();const P=this.store.getSelected();if(_){const $=P.filter(z=>{for(const X of s.options)if(z===X.id)return!1;return!0});this.callbacks.setSelected($,!0);return}else{const $=P.concat(s.options.map(z=>z.id));for(const z of s.options)this.store.getOptionByID(z.id)||this.callbacks.addOption(z);this.callbacks.setSelected($,!0);return}}),m.appendChild(p)}if(s.closable!=="off"){const p=document.createElement("div");p.classList.add(this.classes.optgroupClosable);const _=document.createElementNS("http://www.w3.org/2000/svg","svg");_.setAttribute("viewBox","0 0 100 100"),_.classList.add(this.classes.arrow),p.appendChild(_);const O=document.createElementNS("http://www.w3.org/2000/svg","path");_.appendChild(O),s.options.some(w=>w.selected)||this.content.search.input.value.trim()!==""?(p.classList.add(this.classes.open),O.setAttribute("d",this.classes.arrowOpen)):s.closable==="open"?(n.classList.add(this.classes.open),O.setAttribute("d",this.classes.arrowOpen)):s.closable==="close"&&(n.classList.add(this.classes.close),O.setAttribute("d",this.classes.arrowClose)),a.addEventListener("click",w=>{w.preventDefault(),w.stopPropagation(),n.classList.contains(this.classes.close)?(n.classList.remove(this.classes.close),n.classList.add(this.classes.open),O.setAttribute("d",this.classes.arrowOpen)):(n.classList.remove(this.classes.open),n.classList.add(this.classes.close),O.setAttribute("d",this.classes.arrowClose))}),m.appendChild(p)}n.appendChild(a);for(const p of s.options)n.appendChild(this.option(p));this.content.list.appendChild(n)}s instanceof o&&this.content.list.appendChild(this.option(s))}}option(e){if(e.placeholder){const n=document.createElement("div");return n.classList.add(this.classes.option),n.classList.add(this.classes.hide),n}const s=document.createElement("div");return s.dataset.id=e.id,s.classList.add(this.classes.option),s.setAttribute("role","option"),e.class&&e.class.split(" ").forEach(n=>{s.classList.add(n)}),e.style&&(s.style.cssText=e.style),this.settings.searchHighlight&&this.content.search.input.value.trim()!==""?s.innerHTML=this.highlightText(e.html!==""?e.html:e.text,this.content.search.input.value,this.classes.searchHighlighter):e.html!==""?s.innerHTML=e.html:s.textContent=e.text,this.settings.showOptionTooltips&&s.textContent&&s.setAttribute("title",s.textContent),e.display||s.classList.add(this.classes.hide),e.disabled&&s.classList.add(this.classes.disabled),e.selected&&this.settings.hideSelected&&s.classList.add(this.classes.hide),e.selected?(s.classList.add(this.classes.selected),s.setAttribute("aria-selected","true"),this.main.main.setAttribute("aria-activedescendant",s.id)):(s.classList.remove(this.classes.selected),s.setAttribute("aria-selected","false")),s.addEventListener("click",n=>{n.preventDefault(),n.stopPropagation();const a=this.store.getSelected(),d=n.currentTarget,m=String(d.dataset.id);if(e.disabled||e.selected&&!this.settings.allowDeselect||this.settings.isMultiple&&this.settings.maxSelected<=a.length&&!e.selected||this.settings.isMultiple&&this.settings.minSelected>=a.length&&e.selected)return;let p=!1;const _=this.store.getSelectedOptions();let O=[];this.settings.isMultiple&&(e.selected?O=_.filter(w=>w.id!==m):O=_.concat(e)),this.settings.isMultiple||(e.selected?O=[]:O=[e]),this.callbacks.beforeChange||(p=!0),this.callbacks.beforeChange&&(this.callbacks.beforeChange(O,_)===!1?p=!1:p=!0),p&&(this.store.getOptionByID(m)||this.callbacks.addOption(e),this.callbacks.setSelected(O.map(w=>w.id),!1),this.settings.closeOnSelect&&this.callbacks.close(),this.callbacks.afterChange&&this.callbacks.afterChange(O))}),s}destroy(){this.main.main.remove(),this.content.main.remove()}highlightText(e,s,n){let a=e;const d=new RegExp("(?![^<]*>)("+s.trim()+")(?![^<]*>[^<>]*</)","i");if(!e.match(d))return e;const m=e.match(d).index,p=m+e.match(d)[0].toString().length,_=e.substring(m,p);return a=a.replace(d,`<mark class="${n}">${_}</mark>`),a}moveContentAbove(){const e=this.main.main.offsetHeight,s=this.content.main.offsetHeight;this.main.main.classList.remove(this.classes.openBelow),this.main.main.classList.add(this.classes.openAbove),this.content.main.classList.remove(this.classes.openBelow),this.content.main.classList.add(this.classes.openAbove);const n=this.main.main.getBoundingClientRect();this.content.main.style.margin="-"+(e+s-1)+"px 0px 0px 0px",this.content.main.style.top=n.top+n.height+(this.settings.contentPosition==="fixed"?0:window.scrollY)+"px",this.content.main.style.left=n.left+(this.settings.contentPosition==="fixed"?0:window.scrollX)+"px",this.content.main.style.width=n.width+"px"}moveContentBelow(){this.main.main.classList.remove(this.classes.openAbove),this.main.main.classList.add(this.classes.openBelow),this.content.main.classList.remove(this.classes.openAbove),this.content.main.classList.add(this.classes.openBelow);const e=this.main.main.getBoundingClientRect();this.content.main.style.margin="-1px 0px 0px 0px",this.settings.contentPosition!=="relative"&&(this.content.main.style.top=e.top+e.height+(this.settings.contentPosition==="fixed"?0:window.scrollY)+"px",this.content.main.style.left=e.left+(this.settings.contentPosition==="fixed"?0:window.scrollX)+"px",this.content.main.style.width=e.width+"px")}ensureElementInView(e,s){const n=e.scrollTop+e.offsetTop,a=n+e.clientHeight,d=s.offsetTop,m=d+s.clientHeight;d<n?e.scrollTop-=n-d:m>a&&(e.scrollTop+=m-a)}putContent(){const e=this.main.main.offsetHeight,s=this.main.main.getBoundingClientRect(),n=this.content.main.offsetHeight;return window.innerHeight-(s.top+e)<=n&&s.top>n?"up":"down"}updateDeselectAll(){if(!this.store||!this.settings)return;const e=this.store.getSelectedOptions(),s=e&&e.length>0,n=this.settings.isMultiple,a=this.settings.allowDeselect,d=this.main.deselect.main,m=this.classes.hide;a&&!(n&&!s)?d.classList.remove(m):d.classList.add(m)}}class A{constructor(e){this.listen=!1,this.observer=null,this.select=e,this.valueChange=this.valueChange.bind(this),this.select.addEventListener("change",this.valueChange,{passive:!0}),this.observer=new MutationObserver(this.observeCall.bind(this)),this.changeListen(!0)}enable(){this.select.disabled=!1}disable(){this.select.disabled=!0}hideUI(){this.select.tabIndex=-1,this.select.style.display="none",this.select.setAttribute("aria-hidden","true")}showUI(){this.select.removeAttribute("tabindex"),this.select.style.display="",this.select.removeAttribute("aria-hidden")}changeListen(e){this.listen=e,e&&this.observer&&this.observer.observe(this.select,{subtree:!0,childList:!0,attributes:!0}),e||this.observer&&this.observer.disconnect()}valueChange(e){return this.listen&&this.onValueChange&&this.onValueChange(this.getSelectedOptions()),!0}observeCall(e){if(!this.listen)return;let s=!1,n=!1,a=!1;for(const d of e){if(d.target===this.select&&(d.attributeName==="disabled"&&(n=!0),d.attributeName==="class"&&(s=!0),d.type==="childList")){for(const m of d.addedNodes)if(m.nodeName==="OPTION"&&m.value===this.select.value){this.select.dispatchEvent(new Event("change"));break}a=!0}(d.target.nodeName==="OPTGROUP"||d.target.nodeName==="OPTION")&&(a=!0)}s&&this.onClassChange&&this.onClassChange(this.select.className.split(" ")),n&&this.onDisabledChange&&(this.changeListen(!1),this.onDisabledChange(this.select.disabled),this.changeListen(!0)),a&&this.onOptionsChange&&(this.changeListen(!1),this.onOptionsChange(this.getData()),this.changeListen(!0))}getData(){let e=[];const s=this.select.childNodes;for(const n of s)n.nodeName==="OPTGROUP"&&e.push(this.getDataFromOptgroup(n)),n.nodeName==="OPTION"&&e.push(this.getDataFromOption(n));return e}getDataFromOptgroup(e){let s={id:e.id,label:e.label,selectAll:e.dataset?e.dataset.selectall==="true":!1,selectAllText:e.dataset?e.dataset.selectalltext:"Select all",closable:e.dataset?e.dataset.closable:"off",options:[]};const n=e.childNodes;for(const a of n)a.nodeName==="OPTION"&&s.options.push(this.getDataFromOption(a));return s}getDataFromOption(e){return{id:e.id,value:e.value,text:e.text,html:e.dataset&&e.dataset.html?e.dataset.html:"",selected:e.selected,display:e.style.display!=="none",disabled:e.disabled,mandatory:e.dataset?e.dataset.mandatory==="true":!1,placeholder:e.dataset.placeholder==="true",class:e.className,style:e.style.cssText,data:e.dataset}}getSelectedOptions(){let e=[];const s=this.select.childNodes;for(const n of s){if(n.nodeName==="OPTGROUP"){const a=n.childNodes;for(const d of a)if(d.nodeName==="OPTION"){const m=d;m.selected&&e.push(this.getDataFromOption(m))}}if(n.nodeName==="OPTION"){const a=n;a.selected&&e.push(this.getDataFromOption(a))}}return e}getSelectedValues(){return this.getSelectedOptions().map(e=>e.value)}setSelected(e){this.changeListen(!1);const s=this.select.childNodes;for(const n of s){if(n.nodeName==="OPTGROUP"){const d=n.childNodes;for(const m of d)if(m.nodeName==="OPTION"){const p=m;p.selected=e.includes(p.id)}}if(n.nodeName==="OPTION"){const a=n;a.selected=e.includes(a.id)}}this.changeListen(!0)}setSelectedByValue(e){this.changeListen(!1);const s=this.select.childNodes;for(const n of s){if(n.nodeName==="OPTGROUP"){const d=n.childNodes;for(const m of d)if(m.nodeName==="OPTION"){const p=m;p.selected=e.includes(p.value)}}if(n.nodeName==="OPTION"){const a=n;a.selected=e.includes(a.value)}}this.changeListen(!0)}updateSelect(e,s,n){this.changeListen(!1),e&&(this.select.dataset.id=e),s&&(this.select.style.cssText=s),n&&(this.select.className="",n.forEach(a=>{a.trim()!==""&&this.select.classList.add(a.trim())})),this.changeListen(!0)}updateOptions(e){this.changeListen(!1),this.select.innerHTML="";for(const s of e)s instanceof c&&this.select.appendChild(this.createOptgroup(s)),s instanceof o&&this.select.appendChild(this.createOption(s));this.select.dispatchEvent(new Event("change",{bubbles:!0})),this.changeListen(!0)}createOptgroup(e){const s=document.createElement("optgroup");if(s.id=e.id,s.label=e.label,e.selectAll&&(s.dataset.selectAll="true"),e.closable!=="off"&&(s.dataset.closable=e.closable),e.options)for(const n of e.options)s.appendChild(this.createOption(n));return s}createOption(e){const s=document.createElement("option");return s.id=e.id,s.value=e.value,s.textContent=e.text,e.html!==""&&s.setAttribute("data-html",e.html),e.selected&&(s.selected=e.selected),e.disabled&&(s.disabled=!0),e.display||(s.style.display="none"),e.placeholder&&s.setAttribute("data-placeholder","true"),e.mandatory&&s.setAttribute("data-mandatory","true"),e.class&&e.class.split(" ").forEach(n=>{s.classList.add(n)}),e.data&&typeof e.data=="object"&&Object.keys(e.data).forEach(n=>{s.setAttribute("data-"+C(n),e.data[n])}),s}destroy(){this.changeListen(!1),this.select.removeEventListener("change",this.valueChange),this.observer&&(this.observer.disconnect(),this.observer=null),delete this.select.dataset.id,this.showUI()}}class I{constructor(e){this.id="",this.style="",this.class=[],this.isMultiple=!1,this.isOpen=!1,this.isFullOpen=!1,this.intervalMove=null,e||(e={}),this.id="ss-"+l(),this.style=e.style||"",this.class=e.class||[],this.disabled=e.disabled!==void 0?e.disabled:!1,this.alwaysOpen=e.alwaysOpen!==void 0?e.alwaysOpen:!1,this.showSearch=e.showSearch!==void 0?e.showSearch:!0,this.focusSearch=e.focusSearch!==void 0?e.focusSearch:!0,this.ariaLabel=e.ariaLabel||"Combobox",this.searchPlaceholder=e.searchPlaceholder||"Search",this.searchText=e.searchText||"No Results",this.searchingText=e.searchingText||"Searching...",this.searchHighlight=e.searchHighlight!==void 0?e.searchHighlight:!1,this.closeOnSelect=e.closeOnSelect!==void 0?e.closeOnSelect:!0,this.contentLocation=e.contentLocation||document.body,this.contentPosition=e.contentPosition||"absolute",this.openPosition=e.openPosition||"auto",this.placeholderText=e.placeholderText!==void 0?e.placeholderText:"Select Value",this.allowDeselect=e.allowDeselect!==void 0?e.allowDeselect:!1,this.hideSelected=e.hideSelected!==void 0?e.hideSelected:!1,this.keepOrder=e.keepOrder!==void 0?e.keepOrder:!1,this.showOptionTooltips=e.showOptionTooltips!==void 0?e.showOptionTooltips:!1,this.minSelected=e.minSelected||0,this.maxSelected=e.maxSelected||1e3,this.timeoutDelay=e.timeoutDelay||200,this.maxValuesShown=e.maxValuesShown||20,this.maxValuesMessage=e.maxValuesMessage||"{number} selected",this.addableText=e.addableText||'Press "Enter" to add {value}'}}class v{constructor(e){var s;if(this.events={search:void 0,searchFilter:(p,_)=>p.text.toLowerCase().indexOf(_.toLowerCase())!==-1,addable:void 0,beforeChange:void 0,afterChange:void 0,beforeOpen:void 0,afterOpen:void 0,beforeClose:void 0,afterClose:void 0},this.windowResize=f(()=>{!this.settings.isOpen&&!this.settings.isFullOpen||this.render.moveContent()}),this.windowScroll=f(()=>{!this.settings.isOpen&&!this.settings.isFullOpen||this.render.moveContent()}),this.documentClick=p=>{this.settings.isOpen&&p.target&&!h(p.target,this.settings.id)&&this.close(p.type)},this.windowVisibilityChange=()=>{document.hidden&&this.close()},this.selectEl=typeof e.select=="string"?document.querySelector(e.select):e.select,!this.selectEl){e.events&&e.events.error&&e.events.error(new Error("Could not find select element"));return}if(this.selectEl.tagName!=="SELECT"){e.events&&e.events.error&&e.events.error(new Error("Element isnt of type select"));return}this.selectEl.dataset.ssid&&this.destroy(),this.settings=new I(e.settings),this.cssClasses=new i(e.cssClasses);const n=["afterChange","beforeOpen","afterOpen","beforeClose","afterClose"];for(const p in e.events)e.events.hasOwnProperty(p)&&(n.indexOf(p)!==-1?this.events[p]=f(e.events[p],100):this.events[p]=e.events[p]);this.settings.disabled=!((s=e.settings)===null||s===void 0)&&s.disabled?e.settings.disabled:this.selectEl.disabled,this.settings.isMultiple=this.selectEl.multiple,this.settings.style=this.selectEl.style.cssText,this.settings.class=this.selectEl.className.split(" "),this.select=new A(this.selectEl),this.select.updateSelect(this.settings.id,this.settings.style,this.settings.class),this.select.hideUI(),this.select.onValueChange=p=>{this.setSelected(p.map(_=>_.id))},this.select.onClassChange=p=>{this.settings.class=p,this.render.updateClassStyles()},this.select.onDisabledChange=p=>{p?this.disable():this.enable()},this.select.onOptionsChange=p=>{this.setData(p)},this.store=new b(this.settings.isMultiple?"multiple":"single",e.data?e.data:this.select.getData()),e.data&&this.select.updateOptions(this.store.getData());const a={open:this.open.bind(this),close:this.close.bind(this),addable:this.events.addable?this.events.addable:void 0,setSelected:this.setSelected.bind(this),addOption:this.addOption.bind(this),search:this.search.bind(this),beforeChange:this.events.beforeChange,afterChange:this.events.afterChange};this.render=new E(this.settings,this.cssClasses,this.store,a),this.render.renderValues(),this.render.renderOptions(this.store.getData());const d=this.selectEl.getAttribute("aria-label"),m=this.selectEl.getAttribute("aria-labelledby");d?this.render.main.main.setAttribute("aria-label",d):m&&this.render.main.main.setAttribute("aria-labelledby",m),this.selectEl.parentNode&&this.selectEl.parentNode.insertBefore(this.render.main.main,this.selectEl.nextSibling),window.addEventListener("resize",this.windowResize,!1),this.settings.openPosition==="auto"&&window.addEventListener("scroll",this.windowScroll,!1),document.addEventListener("visibilitychange",this.windowVisibilityChange),this.settings.disabled&&this.disable(),this.settings.alwaysOpen&&this.open(),this.selectEl.slim=this}enable(){this.settings.disabled=!1,this.select.enable(),this.render.enable()}disable(){this.settings.disabled=!0,this.select.disable(),this.render.disable()}getData(){return this.store.getData()}setData(e){const s=this.store.getSelected(),n=this.store.validateDataArray(e);if(n){this.events.error&&this.events.error(n);return}this.store.setData(e);const a=this.store.getData();this.select.updateOptions(a),this.render.renderValues(),this.render.renderOptions(a),this.events.afterChange&&!g(s,this.store.getSelected())&&this.events.afterChange(this.store.getSelectedOptions())}getSelected(){let e=this.store.getSelectedOptions();return this.settings.keepOrder&&(e=this.store.selectedOrderOptions(e)),e.map(s=>s.value)}setSelected(e,s=!0){const n=this.store.getSelected(),a=this.store.getDataOptions();e=Array.isArray(e)?e:[e];const d=[];for(const p of e){if(a.find(_=>_.id==p)){d.push(p);continue}for(const _ of a.filter(O=>O.value==p))d.push(_.id)}this.store.setSelectedBy("id",d);const m=this.store.getData();this.select.updateOptions(m),this.render.renderValues(),this.render.content.search.input.value!==""?this.search(this.render.content.search.input.value):this.render.renderOptions(m),s&&this.events.afterChange&&!g(n,this.store.getSelected())&&this.events.afterChange(this.store.getSelectedOptions())}addOption(e){const s=this.store.getSelected();this.store.getDataOptions().some(a=>{var d;return a.value===((d=e.value)!==null&&d!==void 0?d:e.text)})||this.store.addOption(e);const n=this.store.getData();this.select.updateOptions(n),this.render.renderValues(),this.render.renderOptions(n),this.events.afterChange&&!g(s,this.store.getSelected())&&this.events.afterChange(this.store.getSelectedOptions())}open(){this.settings.disabled||this.settings.isOpen||(this.events.beforeOpen&&this.events.beforeOpen(),this.render.open(),this.settings.showSearch&&this.settings.focusSearch&&this.render.searchFocus(),this.settings.isOpen=!0,setTimeout(()=>{this.events.afterOpen&&this.events.afterOpen(),this.settings.isOpen&&(this.settings.isFullOpen=!0),document.addEventListener("click",this.documentClick)},this.settings.timeoutDelay),this.settings.contentPosition==="absolute"&&(this.settings.intervalMove&&clearInterval(this.settings.intervalMove),this.settings.intervalMove=setInterval(this.render.moveContent.bind(this.render),500)))}close(e=null){!this.settings.isOpen||this.settings.alwaysOpen||(this.events.beforeClose&&this.events.beforeClose(),this.render.close(),this.render.content.search.input.value!==""&&this.search(""),this.render.mainFocus(e),this.settings.isOpen=!1,this.settings.isFullOpen=!1,setTimeout(()=>{this.events.afterClose&&this.events.afterClose(),document.removeEventListener("click",this.documentClick)},this.settings.timeoutDelay),this.settings.intervalMove&&clearInterval(this.settings.intervalMove))}search(e){if(this.render.content.search.input.value!==e&&(this.render.content.search.input.value=e),!this.events.search){this.render.renderOptions(e===""?this.store.getData():this.store.search(e,this.events.searchFilter));return}this.render.renderSearching();const s=this.events.search(e,this.store.getSelectedOptions());if(s instanceof Promise){s.then(n=>{this.render.renderOptions(this.store.partialToFullData(n))}).catch(n=>{this.render.renderError(typeof n=="string"?n:n.message)});return}else Array.isArray(s)?this.render.renderOptions(this.store.partialToFullData(s)):this.render.renderError("Search event must return a promise or an array of data")}destroy(){document.removeEventListener("click",this.documentClick),window.removeEventListener("resize",this.windowResize,!1),this.settings.openPosition==="auto"&&window.removeEventListener("scroll",this.windowScroll,!1),document.removeEventListener("visibilitychange",this.windowVisibilityChange),this.store.setData([]),this.render.destroy(),this.select.destroy()}}return v})})(vt);var Wt=vt.exports;const Jt=ut(Wt);function Ye(r){let t,i;return{c(){t=R("span"),i=se(r[0]),this.h()},l(l){t=M(l,"SPAN",{style:!0,class:!0});var h=F(t);i=ie(h,r[0]),h.forEach(T),this.h()},h(){Ge(t,"background-color",r[2](r[0])),N(t,"class","badge rounded-pill coloured-badge text-dark")},m(l,h){J(l,t,h),L(t,i)},p(l,h){h&1&&ae(i,l[0]),h&1&&Ge(t,"background-color",l[2](l[0]))},d(l){l&&T(t)}}}function Kt(r){let t,i=r[0]&&r[1]&&Ye(r);return{c(){i&&i.c(),t=re()},l(l){i&&i.l(l),t=re()},m(l,h){i&&i.m(l,h),J(l,t,h)},p(l,[h]){l[0]&&l[1]?i?i.p(l,h):(i=Ye(l),i.c(),i.m(t.parentNode,t)):i&&(i.d(1),i=null)},i:ce,o:ce,d(l){l&&T(t),i&&i.d(l)}}}function Qt(r,t,i){let{value:l}=t,h;function f(C){return new h({lightness:.8,saturation:.95}).hex(C)}let g=!1;return dt(async()=>{h=(await Lt(async()=>{const{default:C}=await import("../chunks/esm.B-bOhdOb.js");return{default:C}},[],import.meta.url)).default,i(1,g=!0)}),r.$$set=C=>{"value"in C&&i(0,l=C.value)},[l,g,f]}class We extends Se{constructor(t){super(),Te(this,t,Qt,Kt,we,{value:0})}}function es(r){let t,i='<i class="bi bi-x"></i>';return{c(){t=R("span"),t.innerHTML=i,this.h()},l(l){t=M(l,"SPAN",{class:!0,"aria-checked":!0,"data-svelte-h":!0}),le(t)!=="svelte-1og8rg0"&&(t.innerHTML=i),this.h()},h(){N(t,"class","text-danger boolean-icon svelte-1f3x2lj"),N(t,"aria-checked","false")},m(l,h){J(l,t,h)},d(l){l&&T(t)}}}function ts(r){let t,i='<i class="bi bi-check"></i>';return{c(){t=R("span"),t.innerHTML=i,this.h()},l(l){t=M(l,"SPAN",{class:!0,"aria-checked":!0,"data-svelte-h":!0}),le(t)!=="svelte-w4qkap"&&(t.innerHTML=i),this.h()},h(){N(t,"class","text-success boolean-icon svelte-1f3x2lj"),N(t,"aria-checked","true")},m(l,h){J(l,t,h)},d(l){l&&T(t)}}}function ss(r){let t;function i(f,g){if(f[0]===!0)return ts;if(f[0]===!1)return es}let l=i(r),h=l&&l(r);return{c(){h&&h.c(),t=re()},l(f){h&&h.l(f),t=re()},m(f,g){h&&h.m(f,g),J(f,t,g)},p(f,[g]){l!==(l=i(f))&&(h&&h.d(1),h=l&&l(f),h&&(h.c(),h.m(t.parentNode,t)))},i:ce,o:ce,d(f){f&&T(t),h&&h.d(f)}}}function is(r,t,i){let{value:l}=t;return r.$$set=h=>{"value"in h&&i(0,l=h.value)},[l]}class ls extends Se{constructor(t){super(),Te(this,t,is,ss,we,{value:0})}}function Je(r,t,i){const l=r.slice();return l[33]=t[i],l}function Ke(r,t,i){const l=r.slice();return l[36]=t[i],l[37]=t,l[38]=i,l}const ns=r=>({task:r[0]&2}),Qe=r=>({task:r[36].taskVersions[r[36].selectedVersion]}),as=r=>({task:r[0]&2}),et=r=>({task:r[36].taskVersions[r[36].selectedVersion]});function tt(r,t,i){const l=r.slice();return l[39]=t[i],l}function st(r,t,i){const l=r.slice();return l[42]=t[i][0],l[43]=t[i][1],l}const rs=r=>({}),it=r=>({});function os(r){let t,i,l,h,f,g,C=r[5][bt]+"",c,o,b,E="Category",A,I,v="Modality",D,e,s="Input Types",n,a,d="Metadata",m,p,_="Version",O,w,k,B,H,P,$,z,X,ee,q=r[3]===1?"task":"tasks",y,u;const S=r[14]["extra-columns-header"],U=De(S,r,r[13],it);let G=he(r[1]),x=[];for(let V=0;V<G.length;V+=1)x[V]=ot(Je(r,G,V));const oe=V=>Q(x[V],1,1,()=>{x[V]=null});return{c(){t=R("div"),i=R("div"),l=R("table"),h=R("thead"),f=R("tr"),g=R("th"),c=se(C),o=Y(),b=R("th"),b.textContent=E,A=Y(),I=R("th"),I.textContent=v,D=Y(),e=R("th"),e.textContent=s,n=Y(),a=R("th"),a.textContent=d,m=Y(),p=R("th"),p.textContent=_,O=Y(),U&&U.c(),w=Y(),k=R("tbody");for(let V=0;V<x.length;V+=1)x[V].c();B=Y(),H=R("p"),P=se("Showing "),$=se(r[4]),z=se(" of "),X=se(r[3]),ee=Y(),y=se(q),this.h()},l(V){t=M(V,"DIV",{class:!0});var Z=F(t);i=M(Z,"DIV",{class:!0});var j=F(i);l=M(j,"TABLE",{class:!0,id:!0});var de=F(l);h=M(de,"THEAD",{});var Fe=F(h);f=M(Fe,"TR",{});var te=F(f);g=M(te,"TH",{class:!0});var He=F(g);c=ie(He,C),He.forEach(T),o=W(te),b=M(te,"TH",{class:!0,"data-svelte-h":!0}),le(b)!=="svelte-10ppr1q"&&(b.textContent=E),A=W(te),I=M(te,"TH",{class:!0,"data-svelte-h":!0}),le(I)!=="svelte-slk3w9"&&(I.textContent=v),D=W(te),e=M(te,"TH",{class:!0,"data-svelte-h":!0}),le(e)!=="svelte-udakd"&&(e.textContent=s),n=W(te),a=M(te,"TH",{class:!0,"data-svelte-h":!0}),le(a)!=="svelte-v7n8cf"&&(a.textContent=d),m=W(te),p=M(te,"TH",{colspan:!0,class:!0,"data-svelte-h":!0}),le(p)!=="svelte-hpno2d"&&(p.textContent=_),O=W(te),U&&U.l(te),te.forEach(T),Fe.forEach(T),w=W(de),k=M(de,"TBODY",{});var Be=F(k);for(let Ae=0;Ae<x.length;Ae+=1)x[Ae].l(Be);Be.forEach(T),de.forEach(T),j.forEach(T),Z.forEach(T),B=W(V),H=M(V,"P",{class:!0});var ue=F(H);P=ie(ue,"Showing "),$=ie(ue,r[4]),z=ie(ue," of "),X=ie(ue,r[3]),ee=W(ue),y=ie(ue,q),ue.forEach(T),this.h()},h(){N(g,"class","svelte-v3mpfp"),N(b,"class","svelte-v3mpfp"),N(I,"class","svelte-v3mpfp"),N(e,"class","svelte-v3mpfp"),N(a,"class","svelte-v3mpfp"),N(p,"colspan","2"),N(p,"class","svelte-v3mpfp"),N(l,"class","table table-borderless svelte-v3mpfp"),N(l,"id","filtered-tasks-table"),N(i,"class","card-body p-0"),N(t,"class","card"),N(H,"class","mt-3 text-center mb-0")},m(V,Z){J(V,t,Z),L(t,i),L(i,l),L(l,h),L(h,f),L(f,g),L(g,c),L(f,o),L(f,b),L(f,A),L(f,I),L(f,D),L(f,e),L(f,n),L(f,a),L(f,m),L(f,p),L(f,O),U&&U.m(f,null),L(l,w),L(l,k);for(let j=0;j<x.length;j+=1)x[j]&&x[j].m(k,null);J(V,B,Z),J(V,H,Z),L(H,P),L(H,$),L(H,z),L(H,X),L(H,ee),L(H,y),u=!0},p(V,Z){if(U&&U.p&&(!u||Z[0]&8192)&&Re(U,S,V,V[13],u?Pe(S,V[13],Z,rs):Me(V[13]),it),Z[0]&8194){G=he(V[1]);let j;for(j=0;j<G.length;j+=1){const de=Je(V,G,j);x[j]?(x[j].p(de,Z),K(x[j],1)):(x[j]=ot(de),x[j].c(),K(x[j],1),x[j].m(k,null))}for(ge(),j=G.length;j<x.length;j+=1)oe(j);ve()}(!u||Z[0]&16)&&ae($,V[4]),(!u||Z[0]&8)&&ae(X,V[3]),(!u||Z[0]&8)&&q!==(q=V[3]===1?"task":"tasks")&&ae(y,q)},i(V){if(!u){K(U,V);for(let Z=0;Z<G.length;Z+=1)K(x[Z]);u=!0}},o(V){Q(U,V),x=x.filter(Boolean);for(let Z=0;Z<x.length;Z+=1)Q(x[Z]);u=!1},d(V){V&&(T(t),T(B),T(H)),U&&U.d(V),Ie(x,V)}}}function cs(r){let t,i=`There are no available tasks. You can add new tasks on the
		<a href="/v2/tasks/management">Tasks management</a> page.`;return{c(){t=R("p"),t.innerHTML=i},l(l){t=M(l,"P",{"data-svelte-h":!0}),le(t)!=="svelte-1jz05g4"&&(t.innerHTML=i)},m(l,h){J(l,t,h)},p:ce,i:ce,o:ce,d(l){l&&T(t)}}}function lt(r){let t,i,l=r[36].taskVersions[r[36].selectedVersion].task_name+"",h,f,g,C,c,o,b,E,A,I,v,D=ht(r[36].taskVersions[r[36].selectedVersion])+"",e,s,n,a,d,m,p,_,O;C=new We({props:{value:r[36].taskVersions[r[36].selectedVersion].category}}),b=new We({props:{value:r[36].taskVersions[r[36].selectedVersion].modality}});let w=he(Object.entries(r[36].taskVersions[r[36].selectedVersion].input_types)),k=[];for(let y=0;y<w.length;y+=1)k[y]=nt(st(r,w,y));const B=y=>Q(k[y],1,1,()=>{k[y]=null});function H(y,u){return u[0]&2&&(a=null),a==null&&(a=Object.keys(y[36].taskVersions).length>1),a?ds:hs}let P=H(r,[-1,-1]),$=P(r);const z=r[14]["docs-info"],X=De(z,r,r[13],et),ee=r[14]["extra-columns"],q=De(ee,r,r[13],Qe);return{c(){t=R("tr"),i=R("td"),h=se(l),f=Y(),g=R("td"),Le(C.$$.fragment),c=Y(),o=R("td"),Le(b.$$.fragment),E=Y(),A=R("td");for(let y=0;y<k.length;y+=1)k[y].c();I=Y(),v=R("td"),e=se(D),s=Y(),n=R("td"),$.c(),d=Y(),m=R("td"),X&&X.c(),p=Y(),q&&q.c(),_=Y(),this.h()},l(y){t=M(y,"TR",{});var u=F(t);i=M(u,"TD",{class:!0});var S=F(i);h=ie(S,l),S.forEach(T),f=W(u),g=M(u,"TD",{class:!0});var U=F(g);Oe(C.$$.fragment,U),U.forEach(T),c=W(u),o=M(u,"TD",{class:!0});var G=F(o);Oe(b.$$.fragment,G),G.forEach(T),E=W(u),A=M(u,"TD",{class:!0});var x=F(A);for(let j=0;j<k.length;j+=1)k[j].l(x);x.forEach(T),I=W(u),v=M(u,"TD",{class:!0});var oe=F(v);e=ie(oe,D),oe.forEach(T),s=W(u),n=M(u,"TD",{class:!0});var V=F(n);$.l(V),V.forEach(T),d=W(u),m=M(u,"TD",{class:!0});var Z=F(m);X&&X.l(Z),Z.forEach(T),p=W(u),q&&q.l(u),_=W(u),u.forEach(T),this.h()},h(){N(i,"class","task-name-col svelte-v3mpfp"),N(g,"class","svelte-v3mpfp"),N(o,"class","svelte-v3mpfp"),N(A,"class","metadata-col svelte-v3mpfp"),N(v,"class","metadata-col svelte-v3mpfp"),N(n,"class","version-col svelte-v3mpfp"),N(m,"class","docs-info-col svelte-v3mpfp")},m(y,u){J(y,t,u),L(t,i),L(i,h),L(t,f),L(t,g),ke(C,g,null),L(t,c),L(t,o),ke(b,o,null),L(t,E),L(t,A);for(let S=0;S<k.length;S+=1)k[S]&&k[S].m(A,null);L(t,I),L(t,v),L(v,e),L(t,s),L(t,n),$.m(n,null),L(t,d),L(t,m),X&&X.m(m,null),L(t,p),q&&q.m(t,null),L(t,_),O=!0},p(y,u){(!O||u[0]&2)&&l!==(l=y[36].taskVersions[y[36].selectedVersion].task_name+"")&&ae(h,l);const S={};u[0]&2&&(S.value=y[36].taskVersions[y[36].selectedVersion].category),C.$set(S);const U={};if(u[0]&2&&(U.value=y[36].taskVersions[y[36].selectedVersion].modality),b.$set(U),u[0]&2){w=he(Object.entries(y[36].taskVersions[y[36].selectedVersion].input_types));let G;for(G=0;G<w.length;G+=1){const x=st(y,w,G);k[G]?(k[G].p(x,u),K(k[G],1)):(k[G]=nt(x),k[G].c(),K(k[G],1),k[G].m(A,null))}for(ge(),G=w.length;G<k.length;G+=1)B(G);ve()}(!O||u[0]&2)&&D!==(D=ht(y[36].taskVersions[y[36].selectedVersion])+"")&&ae(e,D),P===(P=H(y,u))&&$?$.p(y,u):($.d(1),$=P(y),$&&($.c(),$.m(n,null))),X&&X.p&&(!O||u[0]&8194)&&Re(X,z,y,y[13],O?Pe(z,y[13],u,as):Me(y[13]),et),q&&q.p&&(!O||u[0]&8194)&&Re(q,ee,y,y[13],O?Pe(ee,y[13],u,ns):Me(y[13]),Qe)},i(y){if(!O){K(C.$$.fragment,y),K(b.$$.fragment,y);for(let u=0;u<w.length;u+=1)K(k[u]);K(X,y),K(q,y),O=!0}},o(y){Q(C.$$.fragment,y),Q(b.$$.fragment,y),k=k.filter(Boolean);for(let u=0;u<k.length;u+=1)Q(k[u]);Q(X,y),Q(q,y),O=!1},d(y){y&&T(t),Ce(C),Ce(b),Ie(k,y),$.d(),X&&X.d(y),q&&q.d(y)}}}function nt(r){let t,i,l=r[42]+"",h,f,g,C,c,o;return C=new ls({props:{value:r[43]}}),{c(){t=R("div"),i=R("div"),h=se(l),f=Y(),g=R("div"),Le(C.$$.fragment),c=Y(),this.h()},l(b){t=M(b,"DIV",{class:!0});var E=F(t);i=M(E,"DIV",{class:!0});var A=F(i);h=ie(A,l),A.forEach(T),f=W(E),g=M(E,"DIV",{});var I=F(g);Oe(C.$$.fragment,I),I.forEach(T),c=W(E),E.forEach(T),this.h()},h(){N(i,"class","input-type-text me-1 svelte-v3mpfp"),N(t,"class","d-flex flex-row")},m(b,E){J(b,t,E),L(t,i),L(i,h),L(t,f),L(t,g),ke(C,g,null),L(t,c),o=!0},p(b,E){(!o||E[0]&2)&&l!==(l=b[42]+"")&&ae(h,l);const A={};E[0]&2&&(A.value=b[43]),C.$set(A)},i(b){o||(K(C.$$.fragment,b),o=!0)},o(b){Q(C.$$.fragment,b),o=!1},d(b){b&&T(t),Ce(C)}}}function hs(r){let t=r[36].taskVersions[r[36].selectedVersion].version+"",i;return{c(){i=se(t)},l(l){i=ie(l,t)},m(l,h){J(l,i,h)},p(l,h){h[0]&2&&t!==(t=l[36].taskVersions[l[36].selectedVersion].version+"")&&ae(i,t)},d(l){l&&T(i)}}}function ds(r){let t,i,l,h,f=he(xe(Object.keys(r[36].taskVersions))),g=[];for(let c=0;c<f.length;c+=1)g[c]=at(tt(r,f,c));function C(){r[16].call(t,r[37],r[38])}return{c(){t=R("select");for(let c=0;c<g.length;c+=1)g[c].c();this.h()},l(c){t=M(c,"SELECT",{class:!0,"aria-label":!0});var o=F(t);for(let b=0;b<g.length;b+=1)g[b].l(o);o.forEach(T),this.h()},h(){N(t,"class","form-select"),N(t,"aria-label",i="Version for task "+r[36].taskVersions[r[36].selectedVersion].task_name),r[36].selectedVersion===void 0&&_t(C)},m(c,o){J(c,t,o);for(let b=0;b<g.length;b+=1)g[b]&&g[b].m(t,null);Ue(t,r[36].selectedVersion,!0),l||(h=Ve(t,"change",C),l=!0)},p(c,o){if(r=c,o[0]&2){f=he(xe(Object.keys(r[36].taskVersions)));let b;for(b=0;b<f.length;b+=1){const E=tt(r,f,b);g[b]?g[b].p(E,o):(g[b]=at(E),g[b].c(),g[b].m(t,null))}for(;b<g.length;b+=1)g[b].d(1);g.length=f.length}o[0]&2&&i!==(i="Version for task "+r[36].taskVersions[r[36].selectedVersion].task_name)&&N(t,"aria-label",i),o[0]&2&&Ue(t,r[36].selectedVersion)},d(c){c&&T(t),Ie(g,c),l=!1,h()}}}function at(r){let t,i=(r[39]||"None")+"",l,h;return{c(){t=R("option"),l=se(i),this.h()},l(f){t=M(f,"OPTION",{});var g=F(t);l=ie(g,i),g.forEach(T),this.h()},h(){t.__value=h=r[39],ye(t,t.__value)},m(f,g){J(f,t,g),L(t,l)},p(f,g){g[0]&2&&i!==(i=(f[39]||"None")+"")&&ae(l,i),g[0]&2&&h!==(h=f[39])&&(t.__value=h,ye(t,t.__value))},d(f){f&&T(t)}}}function rt(r){let t,i,l=r[36].taskVersions[r[36].selectedVersion]&&lt(r);return{c(){l&&l.c(),t=re()},l(h){l&&l.l(h),t=re()},m(h,f){l&&l.m(h,f),J(h,t,f),i=!0},p(h,f){h[36].taskVersions[h[36].selectedVersion]?l?(l.p(h,f),f[0]&2&&K(l,1)):(l=lt(h),l.c(),K(l,1),l.m(t.parentNode,t)):l&&(ge(),Q(l,1,1,()=>{l=null}),ve())},i(h){i||(K(l),i=!0)},o(h){Q(l),i=!1},d(h){h&&T(t),l&&l.d(h)}}}function ot(r){let t,i,l=r[33].groupTitle+"",h,f,g,C,c=he(r[33].tasks),o=[];for(let E=0;E<c.length;E+=1)o[E]=rt(Ke(r,c,E));const b=E=>Q(o[E],1,1,()=>{o[E]=null});return{c(){t=R("tr"),i=R("th"),h=se(l),f=Y();for(let E=0;E<o.length;E+=1)o[E].c();g=re(),this.h()},l(E){t=M(E,"TR",{class:!0});var A=F(t);i=M(A,"TH",{colspan:!0,class:!0});var I=F(i);h=ie(I,l),I.forEach(T),A.forEach(T),f=W(E);for(let v=0;v<o.length;v+=1)o[v].l(E);g=re(),this.h()},h(){N(i,"colspan","3"),N(i,"class","svelte-v3mpfp"),N(t,"class","border-top")},m(E,A){J(E,t,A),L(t,i),L(i,h),J(E,f,A);for(let I=0;I<o.length;I+=1)o[I]&&o[I].m(E,A);J(E,g,A),C=!0},p(E,A){if((!C||A[0]&2)&&l!==(l=E[33].groupTitle+"")&&ae(h,l),A[0]&8194){c=he(E[33].tasks);let I;for(I=0;I<c.length;I+=1){const v=Ke(E,c,I);o[I]?(o[I].p(v,A),K(o[I],1)):(o[I]=rt(v),o[I].c(),K(o[I],1),o[I].m(g.parentNode,g))}for(ge(),I=c.length;I<o.length;I+=1)b(I);ve()}},i(E){if(!C){for(let A=0;A<c.length;A+=1)K(o[A]);C=!0}},o(E){o=o.filter(Boolean);for(let A=0;A<o.length;A+=1)Q(o[A]);C=!1},d(E){E&&(T(t),T(f),T(g)),Ie(o,E)}}}function us(r){let t,i,l,h,f="Filter tasks",g,C,c,o,b,E,A,I,v,D="Reset",e,s,n='<div class="col"><select id="package-filter" class="invisible"></select></div> <div class="col"><select id="category-filter" class="invisible"></select></div> <div class="col"><select id="modality-filter" class="invisible"></select></div> <div class="col"><select id="input-type-filter" class="invisible"></select></div> <div class="col"><select id="tag-filter" class="invisible"></select></div>',a,d,m,p,_,O,w;const k=[cs,os],B=[];function H(P,$){return P[0].length===0?0:1}return d=H(r),m=B[d]=k[d](r),{c(){t=R("div"),i=R("div"),l=R("div"),h=R("div"),h.textContent=f,g=Y(),C=R("div"),c=R("div"),o=R("div"),b=R("div"),E=R("input"),A=Y(),I=R("div"),v=R("button"),v.textContent=D,e=Y(),s=R("div"),s.innerHTML=n,a=Y(),m.c(),p=re(),this.h()},l(P){t=M(P,"DIV",{class:!0});var $=F(t);i=M($,"DIV",{class:!0});var z=F(i);l=M(z,"DIV",{class:!0});var X=F(l);h=M(X,"DIV",{class:!0,"data-svelte-h":!0}),le(h)!=="svelte-gyxyme"&&(h.textContent=f),g=W(X),C=M(X,"DIV",{class:!0});var ee=F(C);c=M(ee,"DIV",{class:!0});var q=F(c);o=M(q,"DIV",{class:!0});var y=F(o);b=M(y,"DIV",{class:!0});var u=F(b);E=M(u,"INPUT",{type:!0,class:!0,placeholder:!0}),u.forEach(T),y.forEach(T),A=W(q),I=M(q,"DIV",{});var S=F(I);v=M(S,"BUTTON",{class:!0,"data-svelte-h":!0}),le(v)!=="svelte-1iagwg6"&&(v.textContent=D),S.forEach(T),q.forEach(T),ee.forEach(T),X.forEach(T),e=W(z),s=M(z,"DIV",{class:!0,"data-svelte-h":!0}),le(s)!=="svelte-1gf425z"&&(s.innerHTML=n),z.forEach(T),$.forEach(T),a=W(P),m.l(P),p=re(),this.h()},h(){N(h,"class","col-3 col-lg-6"),N(E,"type","text"),N(E,"class","form-control ms-auto"),N(E,"placeholder","Search..."),N(b,"class","input-group input-group-sm"),N(o,"class","flex-fill"),N(v,"class","btn btn-outline-secondary btn-sm ms-3"),N(c,"class","d-flex"),N(C,"class","col-9 col-lg-6"),N(l,"class","row mb-2"),N(s,"class","row"),N(i,"class","card-body"),N(t,"class","card mb-2"),be(t,"invisible",r[0].length===0),be(t,"collapse",r[0].length===0)},m(P,$){J(P,t,$),L(t,i),L(i,l),L(l,h),L(l,g),L(l,C),L(C,c),L(c,o),L(o,b),L(b,E),ye(E,r[2]),L(c,A),L(c,I),L(I,v),L(i,e),L(i,s),J(P,a,$),B[d].m(P,$),J(P,p,$),_=!0,O||(w=[Ve(E,"input",r[15]),Ve(v,"click",r[6])],O=!0)},p(P,$){$[0]&4&&E.value!==P[2]&&ye(E,P[2]),(!_||$[0]&1)&&be(t,"invisible",P[0].length===0),(!_||$[0]&1)&&be(t,"collapse",P[0].length===0);let z=d;d=H(P),d===z?B[d].p(P,$):(ge(),Q(B[z],1,1,()=>{B[z]=null}),ve(),m=B[d],m?m.p(P,$):(m=B[d]=k[d](P),m.c()),K(m,1),m.m(p.parentNode,p))},i(P){_||(K(m),_=!0)},o(P){Q(m),_=!1},d(P){P&&(T(t),T(a),T(p)),B[d].d(P),O=!1,Et(w)}}}let bt="pkg_name";function fe(r,t,i){r==null||r.setData([{text:i,placeholder:!0},...t])}function ct(r,t){return[...new Set(r.flatMap(i=>i.task_list).map(t).filter(i=>i!==null))]}function me(r){return r.map(t=>({text:t,value:t}))}function ht(r){const t=[];return t.push(...r.tags),r.authors&&t.push(r.authors),t.join(", ")}function ps(r,t,i){let l,h,{$$slots:f={},$$scope:g}=t,{taskGroups:C}=t,c=[],o=[],b="",E,A="",I,v="",D,e="",s,n="",a,d="",m={pkg_name:"Task"};function p(){C&&(X(C),i(0,c=zt(C,bt)),_())}function _(){i(1,o=c.map(u=>{const S=u.tasks.filter(U=>O(U.taskVersions[U.selectedVersion]));return{...u,tasks:S}}).filter(u=>u.tasks.length>0))}function O(u){return w(u)&&k(u)&&B(u)&&P(u)&&H(u)&&$(u)}function w(u){if(!b)return!0;const S=b.toLowerCase();return u.task_name.toLowerCase().includes(S)||u.pkg_name.toLowerCase().includes(S)||u.category&&u.category.toLowerCase().includes(S)||u.modality&&u.modality.toLowerCase().includes(S)||u.authors&&u.authors.toLowerCase().includes(S)||Object.keys(u.input_types).find(U=>U.toLowerCase().includes(S))!==void 0||u.tags.find(U=>U.toLowerCase().includes(S))!==void 0}function k(u){return A?u.category!==null&&u.category===A:!0}function B(u){return v?u.modality!==null&&u.modality===v:!0}function H(u){return e?u.pkg_name===e:!0}function P(u){return n?u.tags.find(S=>S===n)!==void 0:!0}function $(u){return d?Object.keys(u.input_types).find(S=>S===d)!==void 0:!0}function z(){i(2,b=""),i(8,A=""),E==null||E.setSelected(""),I==null||I.setSelected(""),D==null||D.setSelected(""),s==null||s.setSelected(""),a==null||a.setSelected("")}function X(u){fe(E,me(ct(u,S=>S.category)),"Category"),fe(I,me(ct(u,S=>S.modality)),"Modality"),fe(D,me([...new Set(u.map(S=>S.pkg_name))]),"Package"),fe(s,me([...new Set(u.flatMap(S=>S.task_list).flatMap(S=>S.tags).filter(S=>S!==null))]),"Tag"),fe(a,me([...new Set(u.flatMap(S=>S.task_list).flatMap(S=>Object.keys(S.input_types)))]),"Input type")}dt(()=>{E=ee("category-filter","Select category","Category",u=>{i(8,A=u)}),I=ee("modality-filter","Select modality","Modality",u=>{i(9,v=u)}),D=ee("package-filter","Select package","Package",u=>{i(10,e=u)}),s=ee("tag-filter","Select tag","Tag",u=>{i(11,n=u)}),a=ee("input-type-filter","Select input type","Input type",u=>{i(12,d=u)}),p()});function ee(u,S,U,G){const x=document.getElementById(u);return x==null||x.classList.remove("invisible"),new Jt({select:`#${u}`,settings:{showSearch:!0,allowDeselect:!0,ariaLabel:S},events:{afterChange:oe=>{oe.length===0||oe[0].value===U?G(""):G(oe[0].value)}}})}function q(){b=this.value,i(2,b)}function y(u,S){u[S].selectedVersion=yt(this),i(1,o),i(2,b),i(8,A),i(9,v),i(10,e),i(11,n),i(12,d),i(0,c)}return r.$$set=u=>{"taskGroups"in u&&i(7,C=u.taskGroups),"$$scope"in u&&i(13,g=u.$$scope)},r.$$.update=()=>{r.$$.dirty[0]&128&&C&&p(),r.$$.dirty[0]&7941&&(b||A||v||e||n||d?_():i(1,o=c)),r.$$.dirty[0]&2&&i(4,l=o.reduce((u,S)=>u+S.tasks.length,0)),r.$$.dirty[0]&1&&i(3,h=c.reduce((u,S)=>u+S.tasks.length,0))},[c,o,b,h,l,m,z,C,A,v,e,n,d,g,f,q,y]}class fs extends Se{constructor(t){super(),Te(this,t,ps,us,we,{taskGroups:7},null,[-1,-1])}}function ms(r){let t,i,l;return i=new fs({props:{taskGroups:Ot}}),{c(){t=R("div"),Le(i.$$.fragment),this.h()},l(h){t=M(h,"DIV",{class:!0});var f=F(t);Oe(i.$$.fragment,f),f.forEach(T),this.h()},h(){N(t,"class","container mt-3")},m(h,f){J(h,t,f),ke(i,t,null),l=!0},p:ce,i(h){l||(K(i.$$.fragment,h),l=!0)},o(h){Q(i.$$.fragment,h),l=!1},d(h){h&&T(t),Ce(i)}}}class Es extends Se{constructor(t){super(),Te(this,t,null,ms,we,{})}}export{Es as component};
