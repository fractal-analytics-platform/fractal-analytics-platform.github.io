import{s as Ce,n as ce,o as dt,r as bt,c as Re,u as De,g as Me,a as Pe,k as Et}from"../chunks/scheduler.BvLojk_z.js";import{S as Se,i as Ie,m as re,j as J,g as I,e as D,b as se,c as M,d as F,f as ie,p as Ge,o as N,k as O,l as le,y as ne,s as Y,h as W,z as _e,A as ye,B as xe,q as ge,a as Q,n as ve,t as K,C as yt,D as Te,u as Oe,v as we,w as ke,x as Le,E as Ue}from"../chunks/index.CZ-FgkKt.js";import{_ as Ot}from"../chunks/preload-helper.C1FmrZbK.js";function he(r){return(r==null?void 0:r.length)!==void 0?r:Array.from(r)}const wt=[{pkg_name:"fractal_tasks_core",version:"1.3.3",task_list:[{version:"1.3.3",name:"Convert Cellvoyager to OME-Zarr",category:"Conversion",modality:"HCS",tags:["Yokogawa","Cellvoyager"],input_types:{},output_types:{},docs_link:"https://fractal-analytics-platform.github.io/fractal-tasks-core",docs_info:`## cellvoyager_to_ome_zarr_init
Create a OME-NGFF zarr folder, without reading/writing image data.

Find plates (for each folder in input_paths):

- glob image files,
- parse metadata from image filename to identify plates,
- identify populated channels.

Create a zarr folder (for each plate):

- parse mlf metadata,
- identify wells and field of view (FOV),
- create FOV ZARR,
- verify that channels are uniform (i.e., same channels).
## cellvoyager_to_ome_zarr_compute
Convert Yokogawa output (png, tif) to zarr file.

This task is run after an init task (typically
\`cellvoyager_to_ome_zarr_init\` or
\`cellvoyager_to_ome_zarr_init_multiplex\`), and it populates the empty
OME-Zarr files that were prepared.

Note that the current task always overwrites existing data. To avoid this
behavior, set the \`overwrite\` argument of the init task to \`False\`.
`,type:"compound"},{version:"1.3.3",name:"Convert Cellvoyager Multiplexing to OME-Zarr",category:"Conversion",modality:"HCS",tags:["Yokogawa","Cellvoyager"],input_types:{},output_types:{},docs_link:"https://fractal-analytics-platform.github.io/fractal-tasks-core",docs_info:`## cellvoyager_to_ome_zarr_init_multiplex
Create OME-NGFF structure and metadata to host a multiplexing dataset.

This task takes a set of image folders (i.e. different multiplexing
acquisitions) and build the internal structure and metadata of a OME-NGFF
zarr group, without actually loading/writing the image data.

Each element in input_paths should be treated as a different acquisition.
## cellvoyager_to_ome_zarr_compute
Convert Yokogawa output (png, tif) to zarr file.

This task is run after an init task (typically
\`cellvoyager_to_ome_zarr_init\` or
\`cellvoyager_to_ome_zarr_init_multiplex\`), and it populates the empty
OME-Zarr files that were prepared.

Note that the current task always overwrites existing data. To avoid this
behavior, set the \`overwrite\` argument of the init task to \`False\`.
`,type:"compound"},{version:"1.3.3",name:"Project Image (HCS Plate)",category:"Image Processing",modality:"HCS",tags:["Preprocessing"],input_types:{is_3D:!0},output_types:{is_3D:!1},docs_link:"https://fractal-analytics-platform.github.io/fractal-tasks-core",docs_info:`## copy_ome_zarr_hcs_plate
Duplicate the OME-Zarr HCS structure for a set of zarr_urls.

This task only processes the zarr images in the zarr_urls, not all the
images in the plate. It copies all the  plate & well structure, but none
of the image metadata or the actual image data:

- For each plate, create a new OME-Zarr HCS plate with the attributes for
    all the images in zarr_urls
- For each well (in each plate), create a new zarr subgroup with the
   same attributes as the original one.

Note: this task makes use of methods from the \`Attributes\` class, see
https://zarr.readthedocs.io/en/stable/api/attrs.html.
## projection
Perform intensity projection along Z axis with a chosen method.

Note: this task stores the output in a new zarr file.
`,type:"compound"},{version:"1.3.3",name:"Illumination Correction",category:"Image Processing",modality:null,tags:["Preprocessing"],input_types:{illumination_corrected:!1},output_types:{illumination_corrected:!0},docs_link:"https://fractal-analytics-platform.github.io/fractal-tasks-core",docs_info:`## illumination_correction
Applies illumination correction to the images in the OME-Zarr.

Assumes that the illumination correction profiles were generated before
separately and that the same background subtraction was used during
calculation of the illumination correction (otherwise, it will not work
well & the correction may only be partial).
`,type:"parallel"},{version:"1.3.3",name:"Cellpose Segmentation",category:"Segmentation",modality:null,tags:["Deep Learning","Convolutional Neural Network","Instance Segmentation"],input_types:{},output_types:{},docs_link:"https://fractal-analytics-platform.github.io/fractal-tasks-core",docs_info:`## cellpose_segmentation
Run cellpose segmentation on the ROIs of a single OME-Zarr image.
`,type:"parallel"},{version:"1.3.3",name:"Calculate Registration (image-based)",category:"Registration",modality:"HCS",tags:["Multiplexing"],input_types:{},output_types:{},docs_link:"https://fractal-analytics-platform.github.io/fractal-tasks-core",docs_info:`## image_based_registration_hcs_init
Initialized calculate registration task

This task prepares a parallelization list of all zarr_urls that need to be
used to calculate the registration between acquisitions (all zarr_urls
except the reference acquisition vs. the reference acquisition).
This task only works for HCS OME-Zarrs for 2 reasons: Only HCS OME-Zarrs
currently have defined acquisition metadata to determine reference
acquisitions. And we have only implemented the grouping of images for
HCS OME-Zarrs by well (with the assumption that every well just has 1
image per acqusition).
## calculate_registration_image_based
Calculate registration based on images

This task consists of 3 parts:

1. Loading the images of a given ROI (=> loop over ROIs)
2. Calculating the transformation for that ROI
3. Storing the calculated transformation in the ROI table
`,type:"compound"},{version:"1.3.3",name:"Find Registration Consensus",category:"Registration",modality:"HCS",tags:["Multiplexing"],input_types:{},output_types:{},docs_link:"https://fractal-analytics-platform.github.io/fractal-tasks-core",docs_info:`## init_group_by_well_for_multiplexing
Finds images for all acquisitions per well.

Returns the parallelization_list to run \`find_registration_consensus\`.
## find_registration_consensus
Applies pre-calculated registration to ROI tables.

Apply pre-calculated registration such that resulting ROIs contain
the consensus align region between all acquisitions.

Parallelization level: well
`,type:"compound"},{version:"1.3.3",name:"Apply Registration to Image",category:"Registration",modality:"HCS",tags:["Multiplexing"],input_types:{registered:!1},output_types:{registered:!0},docs_link:"https://fractal-analytics-platform.github.io/fractal-tasks-core",docs_info:`## apply_registration_to_image
Apply registration to images by using a registered ROI table

This task consists of 4 parts:

1. Mask all regions in images that are not available in the
registered ROI table and store each acquisition aligned to the
reference_acquisition (by looping over ROIs).
2. Do the same for all label images.
3. Copy all tables from the non-aligned image to the aligned image
(currently only works well if the only tables are well & FOV ROI tables
(registered and original). Not implemented for measurement tables and
other ROI tables).
4. Clean up: Delete the old, non-aligned image and rename the new,
aligned image to take over its place.
`,type:"parallel"},{version:"1.3.3",name:"Import OME-Zarr",category:null,modality:null,tags:[],input_types:{},output_types:{},docs_link:"https://fractal-analytics-platform.github.io/fractal-tasks-core",docs_info:`## import_ome_zarr
Import a single OME-Zarr into Fractal.

The single OME-Zarr can be a full OME-Zarr HCS plate or an individual
OME-Zarr image. The image needs to be in the zarr_dir as specified by the
dataset. The current version of this task:

1. Creates the appropriate components-related metadata, needed for
   processing an existing OME-Zarr through Fractal.
2. Optionally adds new ROI tables to the existing OME-Zarr.
`,type:"non_parallel"},{version:"1.3.3",name:"Napari Workflows Wrapper",category:"Measurement",modality:null,tags:[],input_types:{},output_types:{},docs_link:"https://fractal-analytics-platform.github.io/fractal-tasks-core",docs_info:`## napari_workflows_wrapper
Run a napari-workflow on the ROIs of a single OME-NGFF image.

This task takes images and labels and runs a napari-workflow on them that
can produce a label and tables as output.

Examples of allowed entries for \`input_specs\` and \`output_specs\`:

\`\`\`
input_specs = {
    "in_1": {"type": "image", "channel": {"wavelength_id": "A01_C02"}},
    "in_2": {"type": "image", "channel": {"label": "DAPI"}},
    "in_3": {"type": "label", "label_name": "label_DAPI"},
}

output_specs = {
    "out_1": {"type": "label", "label_name": "label_DAPI_new"},
    "out_2": {"type": "dataframe", "table_name": "measurements"},
}
\`\`\`
`,type:"parallel"}]},{pkg_name:"fractal_faim_ipa",version:"0.4.3",task_list:[{version:"0.4.3",name:"FAIM IPA OME-Zarr Converter",category:"Conversion",modality:"HCS",tags:["Molecular Devices","Image Xpress","MD"],input_types:{},output_types:{},docs_link:null,docs_info:`## convert_ome_zarr
Create OME-Zarr plate from MD Image Xpress files.

This is a non-parallel task => it parses the metadata, creates the plates
and then converts all the wells in the same process
`,type:"non_parallel"}]},{pkg_name:"fractal_lif_converters",version:"0.3.3",task_list:[{version:"0.3.3",name:"Convert Lif Plate to OME-Zarr",category:"Conversion",modality:"HCS",tags:["Leica","Plate converter"],input_types:{},output_types:{},docs_link:null,docs_info:`## convert_lif_plate_init_task
Initialize the conversion of LIF files to an OME-Zarr - Plate.
## convert_lif_compute_task
Export a single scene or plate acquisition from a LIF file to OME-Zarr.
`,type:"compound"},{version:"0.3.3",name:"Convert Lif Scene to OME-Zarr",category:"Conversion",modality:null,tags:["Leica","Single Image Converter"],input_types:{},output_types:{},docs_link:null,docs_info:`## convert_lif_scene_init_task
Initialize the conversion of LIF files to OME-Zarr - NgffImages.
## convert_lif_compute_task
Export a single scene or plate acquisition from a LIF file to OME-Zarr.
`,type:"compound"}]},{pkg_name:"operetta_compose",version:"0.2.4",task_list:[{version:"0.2.4",name:"Harmony to OME-Zarr",category:"Conversion",modality:"HCS",tags:["Opera","Operetta","Perkin Elmer"],input_types:{},output_types:{},docs_link:"https://leukemia-kispi.github.io/operetta-compose/",docs_info:`## harmony_to_ome_zarr
Convert TIFFs which were exported from Harmony (Operetta/Opera, Perkin-Elmer) to OME-ZARR
`,type:"non_parallel"},{version:"0.2.4",name:"Stardist segmentation",category:"Segmentation",modality:null,tags:[],input_types:{},output_types:{},docs_link:"https://leukemia-kispi.github.io/operetta-compose/",docs_info:`## stardist_segmentation
Segment cells with Stardist
`,type:"parallel"},{version:"0.2.4",name:"Regionprops measurement",category:"Measurement",modality:null,tags:["regionprops","intensity","morphology"],input_types:{},output_types:{},docs_link:"https://leukemia-kispi.github.io/operetta-compose/",docs_info:`## regionprops_measurement
Take measurements using regionprobs and write the features to the OME-ZARR
`,type:"parallel"},{version:"0.2.4",name:"Feature classification",category:null,modality:null,tags:["napari feature classifier","object classification"],input_types:{},output_types:{},docs_link:"https://leukemia-kispi.github.io/operetta-compose/",docs_info:`## feature_classification
Classify cells using the [napari-feature-classifier](https://github.com/fractal-napari-plugins-collection/napari-feature-classifier) and write them to the OME-ZARR
`,type:"parallel"},{version:"0.2.4",name:"Condition registration",category:null,modality:"HCS",tags:["Metadata","Treatment conditions"],input_types:{},output_types:{},docs_link:"https://leukemia-kispi.github.io/operetta-compose/",docs_info:"## condition_registration\nRegister the experimental (drug layout) in the OME-ZARR.\nThe table should contain at least the columns `row` and `col` identifying the well.\nIt can have an arbitrary number of additional metadata columns (e.g. drug, concentration, medium, sample).\nDrug combinations can be specified by two entries pointing to the same `row` / `col`\n",type:"parallel"}]},{pkg_name:"fractal_helper_tasks",version:"0.1.2",task_list:[{version:"0.1.2",name:"Drop T Dimension",category:null,modality:null,tags:["Singelton time dimension"],input_types:{},output_types:{has_t:!1},docs_link:null,docs_info:`## drop_t_dimension
Drops singleton t dimension.
`,type:"non_parallel"},{version:"0.1.2",name:"Convert 2D segmentation to 3D",category:null,modality:null,tags:["Mixed modality","2D to 3D workflows"],input_types:{is_3D:!1},output_types:{},docs_link:null,docs_info:`## convert_2D_segmentation_to_3D
Convert 2D segmentation to 3D segmentation.

This task loads the 2D segmentation, replicates it along the Z slice and
stores it back into the 3D OME-Zarr image.

This is a temporary workaround task, as long as we store 2D data in
a separate OME-Zarr file from the 3D data. If the 2D & 3D OME-Zarr images
have different suffixes in their name, use \`image_suffix_2D_to_remove\` &
\`image_suffix_3D_to_add\`. If their base names are different, this task
does not support processing them at the moment.

It makes the assumption that the 3D OME-Zarrs are stored in the same place
as the 2D OME-Zarrs (same based folder).
`,type:"parallel"}]}];var kt=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function ut(r){return r&&r.__esModule&&Object.prototype.hasOwnProperty.call(r,"default")?r.default:r}var Ne={};const Lt=typeof process=="object"&&Ne&&Ne.NODE_DEBUG&&/\bsemver\b/i.test(Ne.NODE_DEBUG)?(...r)=>console.error("SEMVER",...r):()=>{};var pt=Lt;const Ct="2.0.0",ft=256,St=Number.MAX_SAFE_INTEGER||9007199254740991,It=16,Tt=ft-6,At=["major","premajor","minor","preminor","patch","prepatch","prerelease"];var mt={MAX_LENGTH:ft,MAX_SAFE_COMPONENT_LENGTH:It,MAX_SAFE_BUILD_LENGTH:Tt,MAX_SAFE_INTEGER:St,RELEASE_TYPES:At,SEMVER_SPEC_VERSION:Ct,FLAG_INCLUDE_PRERELEASE:1,FLAG_LOOSE:2},Ve={exports:{}};(function(r,t){const{MAX_SAFE_COMPONENT_LENGTH:i,MAX_SAFE_BUILD_LENGTH:n,MAX_LENGTH:h}=mt,f=pt;t=r.exports={};const g=t.re=[],L=t.safeRe=[],c=t.src=[],o=t.t={};let _=0;const b="[a-zA-Z0-9-]",A=[["\\s",1],["\\d",h],[b,n]],T=R=>{for(const[e,s]of A)R=R.split(`${e}*`).join(`${e}{0,${s}}`).split(`${e}+`).join(`${e}{1,${s}}`);return R},v=(R,e,s)=>{const a=T(e),l=_++;f(R,l,e),o[R]=l,c[l]=e,g[l]=new RegExp(e,s?"g":void 0),L[l]=new RegExp(a,s?"g":void 0)};v("NUMERICIDENTIFIER","0|[1-9]\\d*"),v("NUMERICIDENTIFIERLOOSE","\\d+"),v("NONNUMERICIDENTIFIER",`\\d*[a-zA-Z-]${b}*`),v("MAINVERSION",`(${c[o.NUMERICIDENTIFIER]})\\.(${c[o.NUMERICIDENTIFIER]})\\.(${c[o.NUMERICIDENTIFIER]})`),v("MAINVERSIONLOOSE",`(${c[o.NUMERICIDENTIFIERLOOSE]})\\.(${c[o.NUMERICIDENTIFIERLOOSE]})\\.(${c[o.NUMERICIDENTIFIERLOOSE]})`),v("PRERELEASEIDENTIFIER",`(?:${c[o.NUMERICIDENTIFIER]}|${c[o.NONNUMERICIDENTIFIER]})`),v("PRERELEASEIDENTIFIERLOOSE",`(?:${c[o.NUMERICIDENTIFIERLOOSE]}|${c[o.NONNUMERICIDENTIFIER]})`),v("PRERELEASE",`(?:-(${c[o.PRERELEASEIDENTIFIER]}(?:\\.${c[o.PRERELEASEIDENTIFIER]})*))`),v("PRERELEASELOOSE",`(?:-?(${c[o.PRERELEASEIDENTIFIERLOOSE]}(?:\\.${c[o.PRERELEASEIDENTIFIERLOOSE]})*))`),v("BUILDIDENTIFIER",`${b}+`),v("BUILD",`(?:\\+(${c[o.BUILDIDENTIFIER]}(?:\\.${c[o.BUILDIDENTIFIER]})*))`),v("FULLPLAIN",`v?${c[o.MAINVERSION]}${c[o.PRERELEASE]}?${c[o.BUILD]}?`),v("FULL",`^${c[o.FULLPLAIN]}$`),v("LOOSEPLAIN",`[v=\\s]*${c[o.MAINVERSIONLOOSE]}${c[o.PRERELEASELOOSE]}?${c[o.BUILD]}?`),v("LOOSE",`^${c[o.LOOSEPLAIN]}$`),v("GTLT","((?:<|>)?=?)"),v("XRANGEIDENTIFIERLOOSE",`${c[o.NUMERICIDENTIFIERLOOSE]}|x|X|\\*`),v("XRANGEIDENTIFIER",`${c[o.NUMERICIDENTIFIER]}|x|X|\\*`),v("XRANGEPLAIN",`[v=\\s]*(${c[o.XRANGEIDENTIFIER]})(?:\\.(${c[o.XRANGEIDENTIFIER]})(?:\\.(${c[o.XRANGEIDENTIFIER]})(?:${c[o.PRERELEASE]})?${c[o.BUILD]}?)?)?`),v("XRANGEPLAINLOOSE",`[v=\\s]*(${c[o.XRANGEIDENTIFIERLOOSE]})(?:\\.(${c[o.XRANGEIDENTIFIERLOOSE]})(?:\\.(${c[o.XRANGEIDENTIFIERLOOSE]})(?:${c[o.PRERELEASELOOSE]})?${c[o.BUILD]}?)?)?`),v("XRANGE",`^${c[o.GTLT]}\\s*${c[o.XRANGEPLAIN]}$`),v("XRANGELOOSE",`^${c[o.GTLT]}\\s*${c[o.XRANGEPLAINLOOSE]}$`),v("COERCEPLAIN",`(^|[^\\d])(\\d{1,${i}})(?:\\.(\\d{1,${i}}))?(?:\\.(\\d{1,${i}}))?`),v("COERCE",`${c[o.COERCEPLAIN]}(?:$|[^\\d])`),v("COERCEFULL",c[o.COERCEPLAIN]+`(?:${c[o.PRERELEASE]})?(?:${c[o.BUILD]})?(?:$|[^\\d])`),v("COERCERTL",c[o.COERCE],!0),v("COERCERTLFULL",c[o.COERCEFULL],!0),v("LONETILDE","(?:~>?)"),v("TILDETRIM",`(\\s*)${c[o.LONETILDE]}\\s+`,!0),t.tildeTrimReplace="$1~",v("TILDE",`^${c[o.LONETILDE]}${c[o.XRANGEPLAIN]}$`),v("TILDELOOSE",`^${c[o.LONETILDE]}${c[o.XRANGEPLAINLOOSE]}$`),v("LONECARET","(?:\\^)"),v("CARETTRIM",`(\\s*)${c[o.LONECARET]}\\s+`,!0),t.caretTrimReplace="$1^",v("CARET",`^${c[o.LONECARET]}${c[o.XRANGEPLAIN]}$`),v("CARETLOOSE",`^${c[o.LONECARET]}${c[o.XRANGEPLAINLOOSE]}$`),v("COMPARATORLOOSE",`^${c[o.GTLT]}\\s*(${c[o.LOOSEPLAIN]})$|^$`),v("COMPARATOR",`^${c[o.GTLT]}\\s*(${c[o.FULLPLAIN]})$|^$`),v("COMPARATORTRIM",`(\\s*)${c[o.GTLT]}\\s*(${c[o.LOOSEPLAIN]}|${c[o.XRANGEPLAIN]})`,!0),t.comparatorTrimReplace="$1$2$3",v("HYPHENRANGE",`^\\s*(${c[o.XRANGEPLAIN]})\\s+-\\s+(${c[o.XRANGEPLAIN]})\\s*$`),v("HYPHENRANGELOOSE",`^\\s*(${c[o.XRANGEPLAINLOOSE]})\\s+-\\s+(${c[o.XRANGEPLAINLOOSE]})\\s*$`),v("STAR","(<|>)?=?\\s*\\*"),v("GTE0","^\\s*>=\\s*0\\.0\\.0\\s*$"),v("GTE0PRE","^\\s*>=\\s*0\\.0\\.0-0\\s*$")})(Ve,Ve.exports);var Nt=Ve.exports;const Rt=Object.freeze({loose:!0}),Dt=Object.freeze({}),Mt=r=>r?typeof r!="object"?Rt:r:Dt;var Pt=Mt;const ze=/^[0-9]+$/,gt=(r,t)=>{const i=ze.test(r),n=ze.test(t);return i&&n&&(r=+r,t=+t),r===t?0:i&&!n?-1:n&&!i?1:r<t?-1:1},xt=(r,t)=>gt(t,r);var Vt={compareIdentifiers:gt,rcompareIdentifiers:xt};const be=pt,{MAX_LENGTH:Ze,MAX_SAFE_INTEGER:Ee}=mt,{safeRe:je,t:Xe}=Nt,$t=Pt,{compareIdentifiers:pe}=Vt;let Ft=class ae{constructor(t,i){if(i=$t(i),t instanceof ae){if(t.loose===!!i.loose&&t.includePrerelease===!!i.includePrerelease)return t;t=t.version}else if(typeof t!="string")throw new TypeError(`Invalid version. Must be a string. Got type "${typeof t}".`);if(t.length>Ze)throw new TypeError(`version is longer than ${Ze} characters`);be("SemVer",t,i),this.options=i,this.loose=!!i.loose,this.includePrerelease=!!i.includePrerelease;const n=t.trim().match(i.loose?je[Xe.LOOSE]:je[Xe.FULL]);if(!n)throw new TypeError(`Invalid Version: ${t}`);if(this.raw=t,this.major=+n[1],this.minor=+n[2],this.patch=+n[3],this.major>Ee||this.major<0)throw new TypeError("Invalid major version");if(this.minor>Ee||this.minor<0)throw new TypeError("Invalid minor version");if(this.patch>Ee||this.patch<0)throw new TypeError("Invalid patch version");n[4]?this.prerelease=n[4].split(".").map(h=>{if(/^[0-9]+$/.test(h)){const f=+h;if(f>=0&&f<Ee)return f}return h}):this.prerelease=[],this.build=n[5]?n[5].split("."):[],this.format()}format(){return this.version=`${this.major}.${this.minor}.${this.patch}`,this.prerelease.length&&(this.version+=`-${this.prerelease.join(".")}`),this.version}toString(){return this.version}compare(t){if(be("SemVer.compare",this.version,this.options,t),!(t instanceof ae)){if(typeof t=="string"&&t===this.version)return 0;t=new ae(t,this.options)}return t.version===this.version?0:this.compareMain(t)||this.comparePre(t)}compareMain(t){return t instanceof ae||(t=new ae(t,this.options)),pe(this.major,t.major)||pe(this.minor,t.minor)||pe(this.patch,t.patch)}comparePre(t){if(t instanceof ae||(t=new ae(t,this.options)),this.prerelease.length&&!t.prerelease.length)return-1;if(!this.prerelease.length&&t.prerelease.length)return 1;if(!this.prerelease.length&&!t.prerelease.length)return 0;let i=0;do{const n=this.prerelease[i],h=t.prerelease[i];if(be("prerelease compare",i,n,h),n===void 0&&h===void 0)return 0;if(h===void 0)return 1;if(n===void 0)return-1;if(n===h)continue;return pe(n,h)}while(++i)}compareBuild(t){t instanceof ae||(t=new ae(t,this.options));let i=0;do{const n=this.build[i],h=t.build[i];if(be("build compare",i,n,h),n===void 0&&h===void 0)return 0;if(h===void 0)return 1;if(n===void 0)return-1;if(n===h)continue;return pe(n,h)}while(++i)}inc(t,i,n){switch(t){case"premajor":this.prerelease.length=0,this.patch=0,this.minor=0,this.major++,this.inc("pre",i,n);break;case"preminor":this.prerelease.length=0,this.patch=0,this.minor++,this.inc("pre",i,n);break;case"prepatch":this.prerelease.length=0,this.inc("patch",i,n),this.inc("pre",i,n);break;case"prerelease":this.prerelease.length===0&&this.inc("patch",i,n),this.inc("pre",i,n);break;case"major":(this.minor!==0||this.patch!==0||this.prerelease.length===0)&&this.major++,this.minor=0,this.patch=0,this.prerelease=[];break;case"minor":(this.patch!==0||this.prerelease.length===0)&&this.minor++,this.patch=0,this.prerelease=[];break;case"patch":this.prerelease.length===0&&this.patch++,this.prerelease=[];break;case"pre":{const h=Number(n)?1:0;if(!i&&n===!1)throw new Error("invalid increment argument: identifier is empty");if(this.prerelease.length===0)this.prerelease=[h];else{let f=this.prerelease.length;for(;--f>=0;)typeof this.prerelease[f]=="number"&&(this.prerelease[f]++,f=-2);if(f===-1){if(i===this.prerelease.join(".")&&n===!1)throw new Error("invalid increment argument: identifier already exists");this.prerelease.push(h)}}if(i){let f=[i,h];n===!1&&(f=[i]),pe(this.prerelease[0],i)===0?isNaN(this.prerelease[1])&&(this.prerelease=f):this.prerelease=f}break}default:throw new Error(`invalid increment argument: ${t}`)}return this.raw=this.format(),this.build.length&&(this.raw+=`+${this.build.join(".")}`),this}};var Ht=Ft;const qe=Ht,Bt=(r,t,i)=>new qe(r,i).compare(new qe(t,i));var Gt=Bt;const Ut=Gt,zt=(r,t)=>Ut(r,t,!0);var Zt=zt;const jt=ut(Zt);function Xt(r,t){const i=[];for(const n of r)for(const h of n.task_list){const f=n[t];let g=i.find(o=>o.groupTitle===f);const L=Yt(n,h),c=n.version||"";if(g){let o=g.tasks.find(_=>Object.values(_.taskVersions).find(b=>b.task_name===h.name));o?o.taskVersions[c]=L:(o={selectedVersion:c,taskVersions:{[c]:L}},g.tasks.push(o))}else g={groupTitle:n[t],tasks:[{selectedVersion:c,taskVersions:{[c]:L}}]},i.push(g)}return qt(i),i}function qt(r){for(const t of r){for(const i of t.tasks){const n=Object.keys(i.taskVersions).filter(h=>h!=="");n.length>0&&($e(n),i.selectedVersion=n[0])}t.tasks.sort((i,n)=>i.taskVersions[i.selectedVersion].task_id<n.taskVersions[n.selectedVersion].task_id?-1:1)}r.sort((t,i)=>t.groupTitle.localeCompare(i.groupTitle,void 0,{sensitivity:"base"}))}function $e(r){try{r.sort((t,i)=>t?i?jt(t,i):1:-1).reverse()}catch(t){console.warn("Semver error:",t)}return r}function Yt(r,t){return{pkg_name:r.pkg_name,task_id:t.id,task_name:t.name,version:r.version||"",category:t.category,modality:t.modality,authors:t.authors,tags:t.tags,input_types:t.input_types,docs_info:t.docs_info||""}}var vt={exports:{}};(function(r,t){(function(i,n){r.exports=n()})(kt,function(){class i{constructor(e){e||(e={}),this.main=e.main||"ss-main",this.placeholder=e.placeholder||"ss-placeholder",this.values=e.values||"ss-values",this.single=e.single||"ss-single",this.max=e.max||"ss-max",this.value=e.value||"ss-value",this.valueText=e.valueText||"ss-value-text",this.valueDelete=e.valueDelete||"ss-value-delete",this.valueOut=e.valueOut||"ss-value-out",this.deselect=e.deselect||"ss-deselect",this.deselectPath=e.deselectPath||"M10,10 L90,90 M10,90 L90,10",this.arrow=e.arrow||"ss-arrow",this.arrowClose=e.arrowClose||"M10,30 L50,70 L90,30",this.arrowOpen=e.arrowOpen||"M10,70 L50,30 L90,70",this.content=e.content||"ss-content",this.openAbove=e.openAbove||"ss-open-above",this.openBelow=e.openBelow||"ss-open-below",this.search=e.search||"ss-search",this.searchHighlighter=e.searchHighlighter||"ss-search-highlight",this.searching=e.searching||"ss-searching",this.addable=e.addable||"ss-addable",this.addablePath=e.addablePath||"M50,10 L50,90 M10,50 L90,50",this.list=e.list||"ss-list",this.optgroup=e.optgroup||"ss-optgroup",this.optgroupLabel=e.optgroupLabel||"ss-optgroup-label",this.optgroupLabelText=e.optgroupLabelText||"ss-optgroup-label-text",this.optgroupActions=e.optgroupActions||"ss-optgroup-actions",this.optgroupSelectAll=e.optgroupSelectAll||"ss-selectall",this.optgroupSelectAllBox=e.optgroupSelectAllBox||"M60,10 L10,10 L10,90 L90,90 L90,50",this.optgroupSelectAllCheck=e.optgroupSelectAllCheck||"M30,45 L50,70 L90,10",this.optgroupClosable=e.optgroupClosable||"ss-closable",this.option=e.option||"ss-option",this.optionDelete=e.optionDelete||"M10,10 L90,90 M10,90 L90,10",this.highlighted=e.highlighted||"ss-highlighted",this.open=e.open||"ss-open",this.close=e.close||"ss-close",this.selected=e.selected||"ss-selected",this.error=e.error||"ss-error",this.disabled=e.disabled||"ss-disabled",this.hide=e.hide||"ss-hide"}}function n(){return Math.random().toString(36).substring(2,10)}function h(R,e){function s(l,d){return d&&l&&l.classList&&l.classList.contains(d)||d&&l&&l.dataset&&l.dataset.id&&l.dataset.id===e?l:null}function a(l,d){return!l||l===document?null:s(l,d)?l:a(l.parentNode,d)}return s(R,e)||a(R,e)}function f(R,e=50,s=!1){let a;return function(...l){const d=self,m=()=>{a=null,s||R.apply(d,l)},p=s&&!a;clearTimeout(a),a=setTimeout(m,e),p&&R.apply(d,l)}}function g(R,e){return JSON.stringify(R)===JSON.stringify(e)}function L(R){const e=R.replace(/[A-Z\u00C0-\u00D6\u00D8-\u00DE]/g,s=>"-"+s.toLowerCase());return R[0]===R[0].toUpperCase()?e.substring(1):e}class c{constructor(e){if(this.id=!e.id||e.id===""?n():e.id,this.label=e.label||"",this.selectAll=e.selectAll===void 0?!1:e.selectAll,this.selectAllText=e.selectAllText||"Select All",this.closable=e.closable||"off",this.options=[],e.options)for(const s of e.options)this.options.push(new o(s))}}class o{constructor(e){this.id=!e.id||e.id===""?n():e.id,this.value=e.value===void 0?e.text:e.value,this.text=e.text||"",this.html=e.html||"",this.selected=e.selected!==void 0?e.selected:!1,this.display=e.display!==void 0?e.display:!0,this.disabled=e.disabled!==void 0?e.disabled:!1,this.mandatory=e.mandatory!==void 0?e.mandatory:!1,this.placeholder=e.placeholder!==void 0?e.placeholder:!1,this.class=e.class||"",this.style=e.style||"",this.data=e.data||{}}}class _{constructor(e,s){this.selectType="single",this.data=[],this.selectedOrder=[],this.selectType=e,this.setData(s)}validateDataArray(e){if(!Array.isArray(e))return new Error("Data must be an array");for(let s of e)if(s instanceof c||"label"in s){if(!("label"in s))return new Error("Optgroup must have a label");if("options"in s&&s.options)for(let a of s.options){const l=this.validateOption(a);if(l)return l}}else if(s instanceof o||"text"in s){const a=this.validateOption(s);if(a)return a}else return new Error("Data object must be a valid optgroup or option");return null}validateOption(e){return"text"in e?null:new Error("Option must have a text")}partialToFullData(e){let s=[];return e.forEach(a=>{if(a instanceof c||"label"in a){let l=[];"options"in a&&a.options&&a.options.forEach(d=>{l.push(new o(d))}),l.length>0&&s.push(new c(a))}(a instanceof o||"text"in a)&&s.push(new o(a))}),s}setData(e){this.data=this.partialToFullData(e),this.selectType==="single"&&this.setSelectedBy("id",this.getSelected())}getData(){return this.filter(null,!0)}getDataOptions(){return this.filter(null,!1)}addOption(e,s=!1){if(s){let a=[new o(e)];this.setData(a.concat(this.getData()))}else this.setData(this.getData().concat(new o(e)))}setSelectedBy(e,s){let a=null,l=!1;const d=[];for(let p of this.data){if(p instanceof c)for(let E of p.options)a||(a=E),E.selected=l?!1:s.includes(E[e]),E.selected&&(d.push(E),this.selectType==="single"&&(l=!0));p instanceof o&&(a||(a=p),p.selected=l?!1:s.includes(p[e]),p.selected&&(d.push(p),this.selectType==="single"&&(l=!0)))}this.selectType==="single"&&a&&!l&&(a.selected=!0,d.push(a));const m=s.map(p=>{var E;return((E=d.find(w=>w[e]===p))===null||E===void 0?void 0:E.id)||""});this.selectedOrder=m}getSelected(){return this.getSelectedOptions().map(e=>e.id)}getSelectedValues(){return this.getSelectedOptions().map(e=>e.value)}getSelectedOptions(){return this.filter(e=>e.selected,!1)}getOptgroupByID(e){for(let s of this.data)if(s instanceof c&&s.id===e)return s;return null}getOptionByID(e){let s=this.filter(a=>a.id===e,!1);return s.length?s[0]:null}getSelectType(){return this.selectType}getFirstOption(){let e=null;for(let s of this.data)if(s instanceof c?e=s.options[0]:s instanceof o&&(e=s),e)break;return e}search(e,s){return e=e.trim(),e===""?this.getData():this.filter(a=>s(a,e),!0)}filter(e,s){const a=[];return this.data.forEach(l=>{if(l instanceof c){let d=[];if(l.options.forEach(m=>{(!e||e(m))&&(s?d.push(new o(m)):a.push(new o(m)))}),d.length>0){let m=new c(l);m.options=d,a.push(m)}}l instanceof o&&(!e||e(l))&&a.push(new o(l))}),a}selectedOrderOptions(e){const s=[];return this.selectedOrder.forEach(a=>{const l=e.find(d=>d.id===a);l&&s.push(l)}),e.forEach(a=>{let l=!1;s.forEach(d=>{if(a.id===d.id){l=!0;return}}),l||s.push(a)}),s}}class b{constructor(e,s,a,l){this.store=a,this.settings=e,this.classes=s,this.callbacks=l,this.main=this.mainDiv(),this.content=this.contentDiv(),this.updateClassStyles(),this.updateAriaAttributes(),this.settings.contentLocation&&this.settings.contentLocation.appendChild(this.content.main)}enable(){this.main.main.classList.remove(this.classes.disabled),this.content.search.input.disabled=!1}disable(){this.main.main.classList.add(this.classes.disabled),this.content.search.input.disabled=!0}open(){this.main.arrow.path.setAttribute("d",this.classes.arrowOpen),this.main.main.classList.add(this.settings.openPosition==="up"?this.classes.openAbove:this.classes.openBelow),this.main.main.setAttribute("aria-expanded","true"),this.moveContent();const e=this.store.getSelectedOptions();if(e.length){const s=e[e.length-1].id,a=this.content.list.querySelector('[data-id="'+s+'"]');a&&this.ensureElementInView(this.content.list,a)}}close(){this.main.main.classList.remove(this.classes.openAbove),this.main.main.classList.remove(this.classes.openBelow),this.main.main.setAttribute("aria-expanded","false"),this.content.main.classList.remove(this.classes.openAbove),this.content.main.classList.remove(this.classes.openBelow),this.main.arrow.path.setAttribute("d",this.classes.arrowClose)}updateClassStyles(){if(this.main.main.className="",this.main.main.removeAttribute("style"),this.content.main.className="",this.content.main.removeAttribute("style"),this.main.main.classList.add(this.classes.main),this.content.main.classList.add(this.classes.content),this.settings.style!==""&&(this.main.main.style.cssText=this.settings.style,this.content.main.style.cssText=this.settings.style),this.settings.class.length)for(const e of this.settings.class)e.trim()!==""&&(this.main.main.classList.add(e.trim()),this.content.main.classList.add(e.trim()));(this.settings.contentPosition==="relative"||this.settings.contentPosition==="fixed")&&this.content.main.classList.add("ss-"+this.settings.contentPosition)}updateAriaAttributes(){this.main.main.role="combobox",this.main.main.setAttribute("aria-haspopup","listbox"),this.main.main.setAttribute("aria-controls",this.content.main.id),this.main.main.setAttribute("aria-expanded","false"),this.content.main.setAttribute("role","listbox")}mainDiv(){var e;const s=document.createElement("div");s.dataset.id=this.settings.id,s.setAttribute("aria-label",this.settings.ariaLabel),s.tabIndex=0,s.onkeydown=C=>{switch(C.key){case"ArrowUp":case"ArrowDown":return this.callbacks.open(),C.key==="ArrowDown"?this.highlight("down"):this.highlight("up"),!1;case"Tab":return this.callbacks.close(),!0;case"Enter":case" ":this.callbacks.open();const k=this.content.list.querySelector("."+this.classes.highlighted);return k&&k.click(),!1;case"Escape":return this.callbacks.close(),!1}return C.key.length===1&&this.callbacks.open(),!0},s.onclick=C=>{this.settings.disabled||(this.settings.isOpen?this.callbacks.close():this.callbacks.open())};const a=document.createElement("div");a.classList.add(this.classes.values),s.appendChild(a);const l=document.createElement("div");l.classList.add(this.classes.deselect);const d=(e=this.store)===null||e===void 0?void 0:e.getSelectedOptions();!this.settings.allowDeselect||this.settings.isMultiple&&d&&d.length<=0?l.classList.add(this.classes.hide):l.classList.remove(this.classes.hide),l.onclick=C=>{if(C.stopPropagation(),this.settings.disabled)return;let k=!0;const B=this.store.getSelectedOptions(),H=[];if(this.callbacks.beforeChange&&(k=this.callbacks.beforeChange(H,B)===!0),k){if(this.settings.isMultiple)this.callbacks.setSelected([],!1),this.updateDeselectAll();else{const P=this.store.getFirstOption(),V=P?P.id:"";this.callbacks.setSelected(V,!1)}this.settings.closeOnSelect&&this.callbacks.close(),this.callbacks.afterChange&&this.callbacks.afterChange(this.store.getSelectedOptions())}};const m=document.createElementNS("http://www.w3.org/2000/svg","svg");m.setAttribute("viewBox","0 0 100 100");const p=document.createElementNS("http://www.w3.org/2000/svg","path");p.setAttribute("d",this.classes.deselectPath),m.appendChild(p),l.appendChild(m),s.appendChild(l);const E=document.createElementNS("http://www.w3.org/2000/svg","svg");E.classList.add(this.classes.arrow),E.setAttribute("viewBox","0 0 100 100");const w=document.createElementNS("http://www.w3.org/2000/svg","path");return w.setAttribute("d",this.classes.arrowClose),this.settings.alwaysOpen&&E.classList.add(this.classes.hide),E.appendChild(w),s.appendChild(E),{main:s,values:a,deselect:{main:l,svg:m,path:p},arrow:{main:E,path:w}}}mainFocus(e){e!=="click"&&this.main.main.focus({preventScroll:!0})}placeholder(){const e=this.store.filter(l=>l.placeholder,!1);let s=this.settings.placeholderText;e.length&&(e[0].html!==""?s=e[0].html:e[0].text!==""&&(s=e[0].text));const a=document.createElement("div");return a.classList.add(this.classes.placeholder),a.innerHTML=s,a}renderValues(){if(!this.settings.isMultiple){this.renderSingleValue();return}this.renderMultipleValues(),this.updateDeselectAll()}renderSingleValue(){const e=this.store.filter(a=>a.selected&&!a.placeholder,!1),s=e.length>0?e[0]:null;if(!s)this.main.values.innerHTML=this.placeholder().outerHTML;else{const a=document.createElement("div");a.classList.add(this.classes.single),s.html?a.innerHTML=s.html:a.innerText=s.text,this.main.values.innerHTML=a.outerHTML}!this.settings.allowDeselect||!e.length?this.main.deselect.main.classList.add(this.classes.hide):this.main.deselect.main.classList.remove(this.classes.hide)}renderMultipleValues(){let e=this.main.values.childNodes,s=this.store.filter(l=>l.selected&&l.display,!1);if(s.length===0){this.main.values.innerHTML=this.placeholder().outerHTML;return}else{const l=this.main.values.querySelector("."+this.classes.placeholder);l&&l.remove()}if(s.length>this.settings.maxValuesShown){const l=document.createElement("div");l.classList.add(this.classes.max),l.textContent=this.settings.maxValuesMessage.replace("{number}",s.length.toString()),this.main.values.innerHTML=l.outerHTML;return}else{const l=this.main.values.querySelector("."+this.classes.max);l&&l.remove()}this.settings.keepOrder&&(s=this.store.selectedOrderOptions(s));let a=[];for(let l=0;l<e.length;l++){const d=e[l],m=d.getAttribute("data-id");m&&(s.filter(E=>E.id===m,!1).length||a.push(d))}for(const l of a)l.classList.add(this.classes.valueOut),setTimeout(()=>{this.main.values.hasChildNodes()&&this.main.values.contains(l)&&this.main.values.removeChild(l)},100);e=this.main.values.childNodes;for(let l=0;l<s.length;l++){let d=!0;for(let m=0;m<e.length;m++)s[l].id===String(e[m].dataset.id)&&(d=!1);d&&(this.settings.keepOrder?this.main.values.appendChild(this.multipleValue(s[l])):e.length===0?this.main.values.appendChild(this.multipleValue(s[l])):l===0?this.main.values.insertBefore(this.multipleValue(s[l]),e[l]):e[l-1].insertAdjacentElement("afterend",this.multipleValue(s[l])))}}multipleValue(e){const s=document.createElement("div");s.classList.add(this.classes.value),s.dataset.id=e.id;const a=document.createElement("div");if(a.classList.add(this.classes.valueText),a.textContent=e.text,s.appendChild(a),!e.mandatory){const l=document.createElement("div");l.classList.add(this.classes.valueDelete),l.onclick=p=>{if(p.preventDefault(),p.stopPropagation(),this.settings.disabled)return;let E=!0;const w=this.store.getSelectedOptions(),C=w.filter(k=>k.selected&&k.id!==e.id,!0);if(!(this.settings.minSelected&&C.length<this.settings.minSelected)&&(this.callbacks.beforeChange&&(E=this.callbacks.beforeChange(C,w)===!0),E)){let k=[];for(const B of C){if(B instanceof c)for(const H of B.options)k.push(H.id);B instanceof o&&k.push(B.id)}this.callbacks.setSelected(k,!1),this.settings.closeOnSelect&&this.callbacks.close(),this.callbacks.afterChange&&this.callbacks.afterChange(C),this.updateDeselectAll()}};const d=document.createElementNS("http://www.w3.org/2000/svg","svg");d.setAttribute("viewBox","0 0 100 100");const m=document.createElementNS("http://www.w3.org/2000/svg","path");m.setAttribute("d",this.classes.optionDelete),d.appendChild(m),l.appendChild(d),s.appendChild(l)}return s}contentDiv(){const e=document.createElement("div");e.dataset.id=this.settings.id;const s=this.searchDiv();e.appendChild(s.main);const a=this.listDiv();return e.appendChild(a),{main:e,search:s,list:a}}moveContent(){if(this.settings.contentPosition==="relative"){this.moveContentBelow();return}if(this.settings.openPosition==="down"){this.moveContentBelow();return}else if(this.settings.openPosition==="up"){this.moveContentAbove();return}this.putContent()==="up"?this.moveContentAbove():this.moveContentBelow()}searchDiv(){const e=document.createElement("div"),s=document.createElement("input"),a=document.createElement("div");e.classList.add(this.classes.search);const l={main:e,input:s};if(this.settings.showSearch||(e.classList.add(this.classes.hide),s.readOnly=!0),s.type="search",s.placeholder=this.settings.searchPlaceholder,s.tabIndex=-1,s.setAttribute("aria-label",this.settings.searchPlaceholder),s.setAttribute("autocapitalize","off"),s.setAttribute("autocomplete","off"),s.setAttribute("autocorrect","off"),s.oninput=f(d=>{this.callbacks.search(d.target.value)},100),s.onkeydown=d=>{switch(d.key){case"ArrowUp":case"ArrowDown":return d.key==="ArrowDown"?this.highlight("down"):this.highlight("up"),!1;case"Tab":return this.callbacks.close(),!0;case"Escape":return this.callbacks.close(),!1;case" ":const m=this.content.list.querySelector("."+this.classes.highlighted);return m?(m.click(),!1):!0;case"Enter":if(this.callbacks.addable)return a.click(),!1;{const p=this.content.list.querySelector("."+this.classes.highlighted);if(p)return p.click(),!1}return!0}return!0},e.appendChild(s),this.callbacks.addable){a.classList.add(this.classes.addable);const d=document.createElementNS("http://www.w3.org/2000/svg","svg");d.setAttribute("viewBox","0 0 100 100");const m=document.createElementNS("http://www.w3.org/2000/svg","path");m.setAttribute("d",this.classes.addablePath),d.appendChild(m),a.appendChild(d),a.onclick=p=>{if(p.preventDefault(),p.stopPropagation(),!this.callbacks.addable)return;const E=this.content.search.input.value.trim();if(E===""){this.content.search.input.focus();return}const w=k=>{let B=new o(k);if(this.callbacks.addOption(B),this.settings.isMultiple){let H=this.store.getSelected();H.push(B.id),this.callbacks.setSelected(H,!0)}else this.callbacks.setSelected([B.id],!0);this.callbacks.search(""),this.settings.closeOnSelect&&setTimeout(()=>{this.callbacks.close()},100)},C=this.callbacks.addable(E);C===!1||C===void 0||C===null||(C instanceof Promise?C.then(k=>{typeof k=="string"?w({text:k,value:k}):C instanceof Error?this.renderError(C.message):w(k)}):typeof C=="string"?w({text:C,value:C}):C instanceof Error?this.renderError(C.message):w(C))},e.appendChild(a),l.addable={main:a,svg:d,path:m}}return l}searchFocus(){this.content.search.input.focus()}getOptions(e=!1,s=!1,a=!1){let l="."+this.classes.option;return e&&(l+=":not(."+this.classes.placeholder+")"),s&&(l+=":not(."+this.classes.disabled+")"),a&&(l+=":not(."+this.classes.hide+")"),Array.from(this.content.list.querySelectorAll(l))}highlight(e){const s=this.getOptions(!0,!0,!0);if(s.length===0)return;if(s.length===1&&!s[0].classList.contains(this.classes.highlighted)){s[0].classList.add(this.classes.highlighted);return}let a=!1;for(const l of s)l.classList.contains(this.classes.highlighted)&&(a=!0);if(!a){for(const l of s)if(l.classList.contains(this.classes.selected)){l.classList.add(this.classes.highlighted);break}}for(let l=0;l<s.length;l++)if(s[l].classList.contains(this.classes.highlighted)){const d=s[l];d.classList.remove(this.classes.highlighted);const m=d.parentElement;if(m&&m.classList.contains(this.classes.open)){const w=m.querySelector("."+this.classes.optgroupLabel);w&&w.click()}let p=s[e==="down"?l+1<s.length?l+1:0:l-1>=0?l-1:s.length-1];p.classList.add(this.classes.highlighted),this.ensureElementInView(this.content.list,p);const E=p.parentElement;if(E&&E.classList.contains(this.classes.close)){const w=E.querySelector("."+this.classes.optgroupLabel);w&&w.click()}return}s[e==="down"?0:s.length-1].classList.add(this.classes.highlighted),this.ensureElementInView(this.content.list,s[e==="down"?0:s.length-1])}listDiv(){const e=document.createElement("div");return e.classList.add(this.classes.list),e}renderError(e){this.content.list.innerHTML="";const s=document.createElement("div");s.classList.add(this.classes.error),s.textContent=e,this.content.list.appendChild(s)}renderSearching(){this.content.list.innerHTML="";const e=document.createElement("div");e.classList.add(this.classes.searching),e.textContent=this.settings.searchingText,this.content.list.appendChild(e)}renderOptions(e){if(this.content.list.innerHTML="",e.length===0){const s=document.createElement("div");s.classList.add(this.classes.search),this.callbacks.addable?s.innerHTML=this.settings.addableText.replace("{value}",this.content.search.input.value):s.innerHTML=this.settings.searchText,this.content.list.appendChild(s);return}this.settings.allowDeselect&&!this.settings.isMultiple&&(this.store.filter(a=>a.placeholder,!1).length||this.store.addOption(new o({text:"",value:"",selected:!1,placeholder:!0}),!0));for(const s of e){if(s instanceof c){const a=document.createElement("div");a.classList.add(this.classes.optgroup);const l=document.createElement("div");l.classList.add(this.classes.optgroupLabel),a.appendChild(l);const d=document.createElement("div");d.classList.add(this.classes.optgroupLabelText),d.textContent=s.label,l.appendChild(d);const m=document.createElement("div");if(m.classList.add(this.classes.optgroupActions),l.appendChild(m),this.settings.isMultiple&&s.selectAll){const p=document.createElement("div");p.classList.add(this.classes.optgroupSelectAll);let E=!0;for(const H of s.options)if(!H.selected){E=!1;break}E&&p.classList.add(this.classes.selected);const w=document.createElement("span");w.textContent=s.selectAllText,p.appendChild(w);const C=document.createElementNS("http://www.w3.org/2000/svg","svg");C.setAttribute("viewBox","0 0 100 100"),p.appendChild(C);const k=document.createElementNS("http://www.w3.org/2000/svg","path");k.setAttribute("d",this.classes.optgroupSelectAllBox),C.appendChild(k);const B=document.createElementNS("http://www.w3.org/2000/svg","path");B.setAttribute("d",this.classes.optgroupSelectAllCheck),C.appendChild(B),p.addEventListener("click",H=>{H.preventDefault(),H.stopPropagation();const P=this.store.getSelected();if(E){const V=P.filter(X=>{for(const z of s.options)if(X===z.id)return!1;return!0});this.callbacks.setSelected(V,!0);return}else{const V=P.concat(s.options.map(X=>X.id));for(const X of s.options)this.store.getOptionByID(X.id)||this.callbacks.addOption(X);this.callbacks.setSelected(V,!0);return}}),m.appendChild(p)}if(s.closable!=="off"){const p=document.createElement("div");p.classList.add(this.classes.optgroupClosable);const E=document.createElementNS("http://www.w3.org/2000/svg","svg");E.setAttribute("viewBox","0 0 100 100"),E.classList.add(this.classes.arrow),p.appendChild(E);const w=document.createElementNS("http://www.w3.org/2000/svg","path");E.appendChild(w),s.options.some(C=>C.selected)||this.content.search.input.value.trim()!==""?(p.classList.add(this.classes.open),w.setAttribute("d",this.classes.arrowOpen)):s.closable==="open"?(a.classList.add(this.classes.open),w.setAttribute("d",this.classes.arrowOpen)):s.closable==="close"&&(a.classList.add(this.classes.close),w.setAttribute("d",this.classes.arrowClose)),l.addEventListener("click",C=>{C.preventDefault(),C.stopPropagation(),a.classList.contains(this.classes.close)?(a.classList.remove(this.classes.close),a.classList.add(this.classes.open),w.setAttribute("d",this.classes.arrowOpen)):(a.classList.remove(this.classes.open),a.classList.add(this.classes.close),w.setAttribute("d",this.classes.arrowClose))}),m.appendChild(p)}a.appendChild(l);for(const p of s.options)a.appendChild(this.option(p));this.content.list.appendChild(a)}s instanceof o&&this.content.list.appendChild(this.option(s))}}option(e){if(e.placeholder){const a=document.createElement("div");return a.classList.add(this.classes.option),a.classList.add(this.classes.hide),a}const s=document.createElement("div");return s.dataset.id=e.id,s.classList.add(this.classes.option),s.setAttribute("role","option"),e.class&&e.class.split(" ").forEach(a=>{s.classList.add(a)}),e.style&&(s.style.cssText=e.style),this.settings.searchHighlight&&this.content.search.input.value.trim()!==""?s.innerHTML=this.highlightText(e.html!==""?e.html:e.text,this.content.search.input.value,this.classes.searchHighlighter):e.html!==""?s.innerHTML=e.html:s.textContent=e.text,this.settings.showOptionTooltips&&s.textContent&&s.setAttribute("title",s.textContent),e.display||s.classList.add(this.classes.hide),e.disabled&&s.classList.add(this.classes.disabled),e.selected&&this.settings.hideSelected&&s.classList.add(this.classes.hide),e.selected?(s.classList.add(this.classes.selected),s.setAttribute("aria-selected","true"),this.main.main.setAttribute("aria-activedescendant",s.id)):(s.classList.remove(this.classes.selected),s.setAttribute("aria-selected","false")),s.addEventListener("click",a=>{a.preventDefault(),a.stopPropagation();const l=this.store.getSelected(),d=a.currentTarget,m=String(d.dataset.id);if(e.disabled||e.selected&&!this.settings.allowDeselect||this.settings.isMultiple&&this.settings.maxSelected<=l.length&&!e.selected||this.settings.isMultiple&&this.settings.minSelected>=l.length&&e.selected)return;let p=!1;const E=this.store.getSelectedOptions();let w=[];this.settings.isMultiple&&(e.selected?w=E.filter(C=>C.id!==m):w=E.concat(e)),this.settings.isMultiple||(e.selected?w=[]:w=[e]),this.callbacks.beforeChange||(p=!0),this.callbacks.beforeChange&&(this.callbacks.beforeChange(w,E)===!1?p=!1:p=!0),p&&(this.store.getOptionByID(m)||this.callbacks.addOption(e),this.callbacks.setSelected(w.map(C=>C.id),!1),this.settings.closeOnSelect&&this.callbacks.close(),this.callbacks.afterChange&&this.callbacks.afterChange(w))}),s}destroy(){this.main.main.remove(),this.content.main.remove()}highlightText(e,s,a){let l=e;const d=new RegExp("(?![^<]*>)("+s.trim()+")(?![^<]*>[^<>]*</)","i");if(!e.match(d))return e;const m=e.match(d).index,p=m+e.match(d)[0].toString().length,E=e.substring(m,p);return l=l.replace(d,`<mark class="${a}">${E}</mark>`),l}moveContentAbove(){const e=this.main.main.offsetHeight,s=this.content.main.offsetHeight;this.main.main.classList.remove(this.classes.openBelow),this.main.main.classList.add(this.classes.openAbove),this.content.main.classList.remove(this.classes.openBelow),this.content.main.classList.add(this.classes.openAbove);const a=this.main.main.getBoundingClientRect();this.content.main.style.margin="-"+(e+s-1)+"px 0px 0px 0px",this.content.main.style.top=a.top+a.height+(this.settings.contentPosition==="fixed"?0:window.scrollY)+"px",this.content.main.style.left=a.left+(this.settings.contentPosition==="fixed"?0:window.scrollX)+"px",this.content.main.style.width=a.width+"px"}moveContentBelow(){this.main.main.classList.remove(this.classes.openAbove),this.main.main.classList.add(this.classes.openBelow),this.content.main.classList.remove(this.classes.openAbove),this.content.main.classList.add(this.classes.openBelow);const e=this.main.main.getBoundingClientRect();this.content.main.style.margin="-1px 0px 0px 0px",this.settings.contentPosition!=="relative"&&(this.content.main.style.top=e.top+e.height+(this.settings.contentPosition==="fixed"?0:window.scrollY)+"px",this.content.main.style.left=e.left+(this.settings.contentPosition==="fixed"?0:window.scrollX)+"px",this.content.main.style.width=e.width+"px")}ensureElementInView(e,s){const a=e.scrollTop+e.offsetTop,l=a+e.clientHeight,d=s.offsetTop,m=d+s.clientHeight;d<a?e.scrollTop-=a-d:m>l&&(e.scrollTop+=m-l)}putContent(){const e=this.main.main.offsetHeight,s=this.main.main.getBoundingClientRect(),a=this.content.main.offsetHeight;return window.innerHeight-(s.top+e)<=a&&s.top>a?"up":"down"}updateDeselectAll(){if(!this.store||!this.settings)return;const e=this.store.getSelectedOptions(),s=e&&e.length>0,a=this.settings.isMultiple,l=this.settings.allowDeselect,d=this.main.deselect.main,m=this.classes.hide;l&&!(a&&!s)?d.classList.remove(m):d.classList.add(m)}}class A{constructor(e){this.listen=!1,this.observer=null,this.select=e,this.valueChange=this.valueChange.bind(this),this.select.addEventListener("change",this.valueChange,{passive:!0}),this.observer=new MutationObserver(this.observeCall.bind(this)),this.changeListen(!0)}enable(){this.select.disabled=!1}disable(){this.select.disabled=!0}hideUI(){this.select.tabIndex=-1,this.select.style.display="none",this.select.setAttribute("aria-hidden","true")}showUI(){this.select.removeAttribute("tabindex"),this.select.style.display="",this.select.removeAttribute("aria-hidden")}changeListen(e){this.listen=e,e&&this.observer&&this.observer.observe(this.select,{subtree:!0,childList:!0,attributes:!0}),e||this.observer&&this.observer.disconnect()}valueChange(e){return this.listen&&this.onValueChange&&this.onValueChange(this.getSelectedOptions()),!0}observeCall(e){if(!this.listen)return;let s=!1,a=!1,l=!1;for(const d of e){if(d.target===this.select&&(d.attributeName==="disabled"&&(a=!0),d.attributeName==="class"&&(s=!0),d.type==="childList")){for(const m of d.addedNodes)if(m.nodeName==="OPTION"&&m.value===this.select.value){this.select.dispatchEvent(new Event("change"));break}l=!0}(d.target.nodeName==="OPTGROUP"||d.target.nodeName==="OPTION")&&(l=!0)}s&&this.onClassChange&&this.onClassChange(this.select.className.split(" ")),a&&this.onDisabledChange&&(this.changeListen(!1),this.onDisabledChange(this.select.disabled),this.changeListen(!0)),l&&this.onOptionsChange&&(this.changeListen(!1),this.onOptionsChange(this.getData()),this.changeListen(!0))}getData(){let e=[];const s=this.select.childNodes;for(const a of s)a.nodeName==="OPTGROUP"&&e.push(this.getDataFromOptgroup(a)),a.nodeName==="OPTION"&&e.push(this.getDataFromOption(a));return e}getDataFromOptgroup(e){let s={id:e.id,label:e.label,selectAll:e.dataset?e.dataset.selectall==="true":!1,selectAllText:e.dataset?e.dataset.selectalltext:"Select all",closable:e.dataset?e.dataset.closable:"off",options:[]};const a=e.childNodes;for(const l of a)l.nodeName==="OPTION"&&s.options.push(this.getDataFromOption(l));return s}getDataFromOption(e){return{id:e.id,value:e.value,text:e.text,html:e.dataset&&e.dataset.html?e.dataset.html:"",selected:e.selected,display:e.style.display!=="none",disabled:e.disabled,mandatory:e.dataset?e.dataset.mandatory==="true":!1,placeholder:e.dataset.placeholder==="true",class:e.className,style:e.style.cssText,data:e.dataset}}getSelectedOptions(){let e=[];const s=this.select.childNodes;for(const a of s){if(a.nodeName==="OPTGROUP"){const l=a.childNodes;for(const d of l)if(d.nodeName==="OPTION"){const m=d;m.selected&&e.push(this.getDataFromOption(m))}}if(a.nodeName==="OPTION"){const l=a;l.selected&&e.push(this.getDataFromOption(l))}}return e}getSelectedValues(){return this.getSelectedOptions().map(e=>e.value)}setSelected(e){this.changeListen(!1);const s=this.select.childNodes;for(const a of s){if(a.nodeName==="OPTGROUP"){const d=a.childNodes;for(const m of d)if(m.nodeName==="OPTION"){const p=m;p.selected=e.includes(p.id)}}if(a.nodeName==="OPTION"){const l=a;l.selected=e.includes(l.id)}}this.changeListen(!0)}setSelectedByValue(e){this.changeListen(!1);const s=this.select.childNodes;for(const a of s){if(a.nodeName==="OPTGROUP"){const d=a.childNodes;for(const m of d)if(m.nodeName==="OPTION"){const p=m;p.selected=e.includes(p.value)}}if(a.nodeName==="OPTION"){const l=a;l.selected=e.includes(l.value)}}this.changeListen(!0)}updateSelect(e,s,a){this.changeListen(!1),e&&(this.select.dataset.id=e),s&&(this.select.style.cssText=s),a&&(this.select.className="",a.forEach(l=>{l.trim()!==""&&this.select.classList.add(l.trim())})),this.changeListen(!0)}updateOptions(e){this.changeListen(!1),this.select.innerHTML="";for(const s of e)s instanceof c&&this.select.appendChild(this.createOptgroup(s)),s instanceof o&&this.select.appendChild(this.createOption(s));this.select.dispatchEvent(new Event("change",{bubbles:!0})),this.changeListen(!0)}createOptgroup(e){const s=document.createElement("optgroup");if(s.id=e.id,s.label=e.label,e.selectAll&&(s.dataset.selectAll="true"),e.closable!=="off"&&(s.dataset.closable=e.closable),e.options)for(const a of e.options)s.appendChild(this.createOption(a));return s}createOption(e){const s=document.createElement("option");return s.id=e.id,s.value=e.value,s.textContent=e.text,e.html!==""&&s.setAttribute("data-html",e.html),e.selected&&(s.selected=e.selected),e.disabled&&(s.disabled=!0),e.display||(s.style.display="none"),e.placeholder&&s.setAttribute("data-placeholder","true"),e.mandatory&&s.setAttribute("data-mandatory","true"),e.class&&e.class.split(" ").forEach(a=>{s.classList.add(a)}),e.data&&typeof e.data=="object"&&Object.keys(e.data).forEach(a=>{s.setAttribute("data-"+L(a),e.data[a])}),s}destroy(){this.changeListen(!1),this.select.removeEventListener("change",this.valueChange),this.observer&&(this.observer.disconnect(),this.observer=null),delete this.select.dataset.id,this.showUI()}}class T{constructor(e){this.id="",this.style="",this.class=[],this.isMultiple=!1,this.isOpen=!1,this.isFullOpen=!1,this.intervalMove=null,e||(e={}),this.id="ss-"+n(),this.style=e.style||"",this.class=e.class||[],this.disabled=e.disabled!==void 0?e.disabled:!1,this.alwaysOpen=e.alwaysOpen!==void 0?e.alwaysOpen:!1,this.showSearch=e.showSearch!==void 0?e.showSearch:!0,this.focusSearch=e.focusSearch!==void 0?e.focusSearch:!0,this.ariaLabel=e.ariaLabel||"Combobox",this.searchPlaceholder=e.searchPlaceholder||"Search",this.searchText=e.searchText||"No Results",this.searchingText=e.searchingText||"Searching...",this.searchHighlight=e.searchHighlight!==void 0?e.searchHighlight:!1,this.closeOnSelect=e.closeOnSelect!==void 0?e.closeOnSelect:!0,this.contentLocation=e.contentLocation||document.body,this.contentPosition=e.contentPosition||"absolute",this.openPosition=e.openPosition||"auto",this.placeholderText=e.placeholderText!==void 0?e.placeholderText:"Select Value",this.allowDeselect=e.allowDeselect!==void 0?e.allowDeselect:!1,this.hideSelected=e.hideSelected!==void 0?e.hideSelected:!1,this.keepOrder=e.keepOrder!==void 0?e.keepOrder:!1,this.showOptionTooltips=e.showOptionTooltips!==void 0?e.showOptionTooltips:!1,this.minSelected=e.minSelected||0,this.maxSelected=e.maxSelected||1e3,this.timeoutDelay=e.timeoutDelay||200,this.maxValuesShown=e.maxValuesShown||20,this.maxValuesMessage=e.maxValuesMessage||"{number} selected",this.addableText=e.addableText||'Press "Enter" to add {value}'}}class v{constructor(e){var s;if(this.events={search:void 0,searchFilter:(p,E)=>p.text.toLowerCase().indexOf(E.toLowerCase())!==-1,addable:void 0,beforeChange:void 0,afterChange:void 0,beforeOpen:void 0,afterOpen:void 0,beforeClose:void 0,afterClose:void 0},this.windowResize=f(()=>{!this.settings.isOpen&&!this.settings.isFullOpen||this.render.moveContent()}),this.windowScroll=f(()=>{!this.settings.isOpen&&!this.settings.isFullOpen||this.render.moveContent()}),this.documentClick=p=>{this.settings.isOpen&&p.target&&!h(p.target,this.settings.id)&&this.close(p.type)},this.windowVisibilityChange=()=>{document.hidden&&this.close()},this.selectEl=typeof e.select=="string"?document.querySelector(e.select):e.select,!this.selectEl){e.events&&e.events.error&&e.events.error(new Error("Could not find select element"));return}if(this.selectEl.tagName!=="SELECT"){e.events&&e.events.error&&e.events.error(new Error("Element isnt of type select"));return}this.selectEl.dataset.ssid&&this.destroy(),this.settings=new T(e.settings),this.cssClasses=new i(e.cssClasses);const a=["afterChange","beforeOpen","afterOpen","beforeClose","afterClose"];for(const p in e.events)e.events.hasOwnProperty(p)&&(a.indexOf(p)!==-1?this.events[p]=f(e.events[p],100):this.events[p]=e.events[p]);this.settings.disabled=!((s=e.settings)===null||s===void 0)&&s.disabled?e.settings.disabled:this.selectEl.disabled,this.settings.isMultiple=this.selectEl.multiple,this.settings.style=this.selectEl.style.cssText,this.settings.class=this.selectEl.className.split(" "),this.select=new A(this.selectEl),this.select.updateSelect(this.settings.id,this.settings.style,this.settings.class),this.select.hideUI(),this.select.onValueChange=p=>{this.setSelected(p.map(E=>E.id))},this.select.onClassChange=p=>{this.settings.class=p,this.render.updateClassStyles()},this.select.onDisabledChange=p=>{p?this.disable():this.enable()},this.select.onOptionsChange=p=>{this.setData(p)},this.store=new _(this.settings.isMultiple?"multiple":"single",e.data?e.data:this.select.getData()),e.data&&this.select.updateOptions(this.store.getData());const l={open:this.open.bind(this),close:this.close.bind(this),addable:this.events.addable?this.events.addable:void 0,setSelected:this.setSelected.bind(this),addOption:this.addOption.bind(this),search:this.search.bind(this),beforeChange:this.events.beforeChange,afterChange:this.events.afterChange};this.render=new b(this.settings,this.cssClasses,this.store,l),this.render.renderValues(),this.render.renderOptions(this.store.getData());const d=this.selectEl.getAttribute("aria-label"),m=this.selectEl.getAttribute("aria-labelledby");d?this.render.main.main.setAttribute("aria-label",d):m&&this.render.main.main.setAttribute("aria-labelledby",m),this.selectEl.parentNode&&this.selectEl.parentNode.insertBefore(this.render.main.main,this.selectEl.nextSibling),window.addEventListener("resize",this.windowResize,!1),this.settings.openPosition==="auto"&&window.addEventListener("scroll",this.windowScroll,!1),document.addEventListener("visibilitychange",this.windowVisibilityChange),this.settings.disabled&&this.disable(),this.settings.alwaysOpen&&this.open(),this.selectEl.slim=this}enable(){this.settings.disabled=!1,this.select.enable(),this.render.enable()}disable(){this.settings.disabled=!0,this.select.disable(),this.render.disable()}getData(){return this.store.getData()}setData(e){const s=this.store.getSelected(),a=this.store.validateDataArray(e);if(a){this.events.error&&this.events.error(a);return}this.store.setData(e);const l=this.store.getData();this.select.updateOptions(l),this.render.renderValues(),this.render.renderOptions(l),this.events.afterChange&&!g(s,this.store.getSelected())&&this.events.afterChange(this.store.getSelectedOptions())}getSelected(){let e=this.store.getSelectedOptions();return this.settings.keepOrder&&(e=this.store.selectedOrderOptions(e)),e.map(s=>s.value)}setSelected(e,s=!0){const a=this.store.getSelected(),l=this.store.getDataOptions();e=Array.isArray(e)?e:[e];const d=[];for(const p of e){if(l.find(E=>E.id==p)){d.push(p);continue}for(const E of l.filter(w=>w.value==p))d.push(E.id)}this.store.setSelectedBy("id",d);const m=this.store.getData();this.select.updateOptions(m),this.render.renderValues(),this.render.content.search.input.value!==""?this.search(this.render.content.search.input.value):this.render.renderOptions(m),s&&this.events.afterChange&&!g(a,this.store.getSelected())&&this.events.afterChange(this.store.getSelectedOptions())}addOption(e){const s=this.store.getSelected();this.store.getDataOptions().some(l=>{var d;return l.value===((d=e.value)!==null&&d!==void 0?d:e.text)})||this.store.addOption(e);const a=this.store.getData();this.select.updateOptions(a),this.render.renderValues(),this.render.renderOptions(a),this.events.afterChange&&!g(s,this.store.getSelected())&&this.events.afterChange(this.store.getSelectedOptions())}open(){this.settings.disabled||this.settings.isOpen||(this.events.beforeOpen&&this.events.beforeOpen(),this.render.open(),this.settings.showSearch&&this.settings.focusSearch&&this.render.searchFocus(),this.settings.isOpen=!0,setTimeout(()=>{this.events.afterOpen&&this.events.afterOpen(),this.settings.isOpen&&(this.settings.isFullOpen=!0),document.addEventListener("click",this.documentClick)},this.settings.timeoutDelay),this.settings.contentPosition==="absolute"&&(this.settings.intervalMove&&clearInterval(this.settings.intervalMove),this.settings.intervalMove=setInterval(this.render.moveContent.bind(this.render),500)))}close(e=null){!this.settings.isOpen||this.settings.alwaysOpen||(this.events.beforeClose&&this.events.beforeClose(),this.render.close(),this.render.content.search.input.value!==""&&this.search(""),this.render.mainFocus(e),this.settings.isOpen=!1,this.settings.isFullOpen=!1,setTimeout(()=>{this.events.afterClose&&this.events.afterClose(),document.removeEventListener("click",this.documentClick)},this.settings.timeoutDelay),this.settings.intervalMove&&clearInterval(this.settings.intervalMove))}search(e){if(this.render.content.search.input.value!==e&&(this.render.content.search.input.value=e),!this.events.search){this.render.renderOptions(e===""?this.store.getData():this.store.search(e,this.events.searchFilter));return}this.render.renderSearching();const s=this.events.search(e,this.store.getSelectedOptions());if(s instanceof Promise){s.then(a=>{this.render.renderOptions(this.store.partialToFullData(a))}).catch(a=>{this.render.renderError(typeof a=="string"?a:a.message)});return}else Array.isArray(s)?this.render.renderOptions(this.store.partialToFullData(s)):this.render.renderError("Search event must return a promise or an array of data")}destroy(){document.removeEventListener("click",this.documentClick),window.removeEventListener("resize",this.windowResize,!1),this.settings.openPosition==="auto"&&window.removeEventListener("scroll",this.windowScroll,!1),document.removeEventListener("visibilitychange",this.windowVisibilityChange),this.store.setData([]),this.render.destroy(),this.select.destroy()}}return v})})(vt);var Wt=vt.exports;const Jt=ut(Wt);function Ye(r){let t,i;return{c(){t=D("span"),i=se(r[0]),this.h()},l(n){t=M(n,"SPAN",{style:!0,class:!0});var h=F(t);i=ie(h,r[0]),h.forEach(I),this.h()},h(){Ge(t,"background-color",r[2](r[0])),N(t,"class","badge rounded-pill coloured-badge text-dark")},m(n,h){J(n,t,h),O(t,i)},p(n,h){h&1&&le(i,n[0]),h&1&&Ge(t,"background-color",n[2](n[0]))},d(n){n&&I(t)}}}function Kt(r){let t,i=r[0]&&r[1]&&Ye(r);return{c(){i&&i.c(),t=re()},l(n){i&&i.l(n),t=re()},m(n,h){i&&i.m(n,h),J(n,t,h)},p(n,[h]){n[0]&&n[1]?i?i.p(n,h):(i=Ye(n),i.c(),i.m(t.parentNode,t)):i&&(i.d(1),i=null)},i:ce,o:ce,d(n){n&&I(t),i&&i.d(n)}}}function Qt(r,t,i){let{value:n}=t,h;function f(L){return new h({lightness:.8,saturation:.95}).hex(L)}let g=!1;return dt(async()=>{h=(await Ot(async()=>{const{default:L}=await import("../chunks/esm.B-bOhdOb.js");return{default:L}},[],import.meta.url)).default,i(1,g=!0)}),r.$$set=L=>{"value"in L&&i(0,n=L.value)},[n,g,f]}class We extends Se{constructor(t){super(),Ie(this,t,Qt,Kt,Ce,{value:0})}}function es(r){let t,i='<i class="bi bi-x"></i>';return{c(){t=D("span"),t.innerHTML=i,this.h()},l(n){t=M(n,"SPAN",{class:!0,"aria-checked":!0,"data-svelte-h":!0}),ne(t)!=="svelte-1og8rg0"&&(t.innerHTML=i),this.h()},h(){N(t,"class","text-danger boolean-icon svelte-1f3x2lj"),N(t,"aria-checked","false")},m(n,h){J(n,t,h)},d(n){n&&I(t)}}}function ts(r){let t,i='<i class="bi bi-check"></i>';return{c(){t=D("span"),t.innerHTML=i,this.h()},l(n){t=M(n,"SPAN",{class:!0,"aria-checked":!0,"data-svelte-h":!0}),ne(t)!=="svelte-w4qkap"&&(t.innerHTML=i),this.h()},h(){N(t,"class","text-success boolean-icon svelte-1f3x2lj"),N(t,"aria-checked","true")},m(n,h){J(n,t,h)},d(n){n&&I(t)}}}function ss(r){let t;function i(f,g){if(f[0]===!0)return ts;if(f[0]===!1)return es}let n=i(r),h=n&&n(r);return{c(){h&&h.c(),t=re()},l(f){h&&h.l(f),t=re()},m(f,g){h&&h.m(f,g),J(f,t,g)},p(f,[g]){n!==(n=i(f))&&(h&&h.d(1),h=n&&n(f),h&&(h.c(),h.m(t.parentNode,t)))},i:ce,o:ce,d(f){f&&I(t),h&&h.d(f)}}}function is(r,t,i){let{value:n}=t;return r.$$set=h=>{"value"in h&&i(0,n=h.value)},[n]}class ns extends Se{constructor(t){super(),Ie(this,t,is,ss,Ce,{value:0})}}function Je(r,t,i){const n=r.slice();return n[33]=t[i],n}function Ke(r,t,i){const n=r.slice();return n[36]=t[i],n[37]=t,n[38]=i,n}const as=r=>({task:r[0]&2}),Qe=r=>({task:r[36].taskVersions[r[36].selectedVersion]}),ls=r=>({task:r[0]&2}),et=r=>({task:r[36].taskVersions[r[36].selectedVersion]});function tt(r,t,i){const n=r.slice();return n[39]=t[i],n}function st(r,t,i){const n=r.slice();return n[42]=t[i][0],n[43]=t[i][1],n}const rs=r=>({}),it=r=>({});function os(r){let t,i,n,h,f,g,L=r[5][_t]+"",c,o,_,b="Category",A,T,v="Modality",R,e,s="Input Types",a,l,d="Metadata",m,p,E="Version",w,C,k,B,H,P,V,X,z,ee,j=r[3]===1?"task":"tasks",y,u;const S=r[14]["extra-columns-header"],U=Re(S,r,r[13],it);let G=he(r[1]),$=[];for(let x=0;x<G.length;x+=1)$[x]=ot(Je(r,G,x));const oe=x=>Q($[x],1,1,()=>{$[x]=null});return{c(){t=D("div"),i=D("div"),n=D("table"),h=D("thead"),f=D("tr"),g=D("th"),c=se(L),o=Y(),_=D("th"),_.textContent=b,A=Y(),T=D("th"),T.textContent=v,R=Y(),e=D("th"),e.textContent=s,a=Y(),l=D("th"),l.textContent=d,m=Y(),p=D("th"),p.textContent=E,w=Y(),U&&U.c(),C=Y(),k=D("tbody");for(let x=0;x<$.length;x+=1)$[x].c();B=Y(),H=D("p"),P=se("Showing "),V=se(r[4]),X=se(" of "),z=se(r[3]),ee=Y(),y=se(j),this.h()},l(x){t=M(x,"DIV",{class:!0});var q=F(t);i=M(q,"DIV",{class:!0});var Z=F(i);n=M(Z,"TABLE",{class:!0,id:!0});var de=F(n);h=M(de,"THEAD",{});var Fe=F(h);f=M(Fe,"TR",{});var te=F(f);g=M(te,"TH",{class:!0});var He=F(g);c=ie(He,L),He.forEach(I),o=W(te),_=M(te,"TH",{class:!0,"data-svelte-h":!0}),ne(_)!=="svelte-10ppr1q"&&(_.textContent=b),A=W(te),T=M(te,"TH",{class:!0,"data-svelte-h":!0}),ne(T)!=="svelte-slk3w9"&&(T.textContent=v),R=W(te),e=M(te,"TH",{class:!0,"data-svelte-h":!0}),ne(e)!=="svelte-udakd"&&(e.textContent=s),a=W(te),l=M(te,"TH",{class:!0,"data-svelte-h":!0}),ne(l)!=="svelte-v7n8cf"&&(l.textContent=d),m=W(te),p=M(te,"TH",{colspan:!0,class:!0,"data-svelte-h":!0}),ne(p)!=="svelte-hpno2d"&&(p.textContent=E),w=W(te),U&&U.l(te),te.forEach(I),Fe.forEach(I),C=W(de),k=M(de,"TBODY",{});var Be=F(k);for(let Ae=0;Ae<$.length;Ae+=1)$[Ae].l(Be);Be.forEach(I),de.forEach(I),Z.forEach(I),q.forEach(I),B=W(x),H=M(x,"P",{class:!0});var ue=F(H);P=ie(ue,"Showing "),V=ie(ue,r[4]),X=ie(ue," of "),z=ie(ue,r[3]),ee=W(ue),y=ie(ue,j),ue.forEach(I),this.h()},h(){N(g,"class","svelte-v3mpfp"),N(_,"class","svelte-v3mpfp"),N(T,"class","svelte-v3mpfp"),N(e,"class","svelte-v3mpfp"),N(l,"class","svelte-v3mpfp"),N(p,"colspan","2"),N(p,"class","svelte-v3mpfp"),N(n,"class","table table-borderless svelte-v3mpfp"),N(n,"id","filtered-tasks-table"),N(i,"class","card-body p-0"),N(t,"class","card"),N(H,"class","mt-3 text-center mb-0")},m(x,q){J(x,t,q),O(t,i),O(i,n),O(n,h),O(h,f),O(f,g),O(g,c),O(f,o),O(f,_),O(f,A),O(f,T),O(f,R),O(f,e),O(f,a),O(f,l),O(f,m),O(f,p),O(f,w),U&&U.m(f,null),O(n,C),O(n,k);for(let Z=0;Z<$.length;Z+=1)$[Z]&&$[Z].m(k,null);J(x,B,q),J(x,H,q),O(H,P),O(H,V),O(H,X),O(H,z),O(H,ee),O(H,y),u=!0},p(x,q){if(U&&U.p&&(!u||q[0]&8192)&&De(U,S,x,x[13],u?Pe(S,x[13],q,rs):Me(x[13]),it),q[0]&8194){G=he(x[1]);let Z;for(Z=0;Z<G.length;Z+=1){const de=Je(x,G,Z);$[Z]?($[Z].p(de,q),K($[Z],1)):($[Z]=ot(de),$[Z].c(),K($[Z],1),$[Z].m(k,null))}for(ge(),Z=G.length;Z<$.length;Z+=1)oe(Z);ve()}(!u||q[0]&16)&&le(V,x[4]),(!u||q[0]&8)&&le(z,x[3]),(!u||q[0]&8)&&j!==(j=x[3]===1?"task":"tasks")&&le(y,j)},i(x){if(!u){K(U,x);for(let q=0;q<G.length;q+=1)K($[q]);u=!0}},o(x){Q(U,x),$=$.filter(Boolean);for(let q=0;q<$.length;q+=1)Q($[q]);u=!1},d(x){x&&(I(t),I(B),I(H)),U&&U.d(x),Te($,x)}}}function cs(r){let t,i=`There are no available tasks. You can add new tasks on the
		<a href="/v2/tasks/management">Tasks management</a> page.`;return{c(){t=D("p"),t.innerHTML=i},l(n){t=M(n,"P",{"data-svelte-h":!0}),ne(t)!=="svelte-1jz05g4"&&(t.innerHTML=i)},m(n,h){J(n,t,h)},p:ce,i:ce,o:ce,d(n){n&&I(t)}}}function nt(r){let t,i,n=r[36].taskVersions[r[36].selectedVersion].task_name+"",h,f,g,L,c,o,_,b,A,T,v,R=ht(r[36].taskVersions[r[36].selectedVersion])+"",e,s,a,l,d,m,p,E,w;L=new We({props:{value:r[36].taskVersions[r[36].selectedVersion].category}}),_=new We({props:{value:r[36].taskVersions[r[36].selectedVersion].modality}});let C=he(Object.entries(r[36].taskVersions[r[36].selectedVersion].input_types)),k=[];for(let y=0;y<C.length;y+=1)k[y]=at(st(r,C,y));const B=y=>Q(k[y],1,1,()=>{k[y]=null});function H(y,u){return u[0]&2&&(l=null),l==null&&(l=Object.keys(y[36].taskVersions).length>1),l?ds:hs}let P=H(r,[-1,-1]),V=P(r);const X=r[14]["docs-info"],z=Re(X,r,r[13],et),ee=r[14]["extra-columns"],j=Re(ee,r,r[13],Qe);return{c(){t=D("tr"),i=D("td"),h=se(n),f=Y(),g=D("td"),Oe(L.$$.fragment),c=Y(),o=D("td"),Oe(_.$$.fragment),b=Y(),A=D("td");for(let y=0;y<k.length;y+=1)k[y].c();T=Y(),v=D("td"),e=se(R),s=Y(),a=D("td"),V.c(),d=Y(),m=D("td"),z&&z.c(),p=Y(),j&&j.c(),E=Y(),this.h()},l(y){t=M(y,"TR",{});var u=F(t);i=M(u,"TD",{class:!0});var S=F(i);h=ie(S,n),S.forEach(I),f=W(u),g=M(u,"TD",{class:!0});var U=F(g);we(L.$$.fragment,U),U.forEach(I),c=W(u),o=M(u,"TD",{class:!0});var G=F(o);we(_.$$.fragment,G),G.forEach(I),b=W(u),A=M(u,"TD",{class:!0});var $=F(A);for(let Z=0;Z<k.length;Z+=1)k[Z].l($);$.forEach(I),T=W(u),v=M(u,"TD",{class:!0});var oe=F(v);e=ie(oe,R),oe.forEach(I),s=W(u),a=M(u,"TD",{class:!0});var x=F(a);V.l(x),x.forEach(I),d=W(u),m=M(u,"TD",{class:!0});var q=F(m);z&&z.l(q),q.forEach(I),p=W(u),j&&j.l(u),E=W(u),u.forEach(I),this.h()},h(){N(i,"class","task-name-col svelte-v3mpfp"),N(g,"class","svelte-v3mpfp"),N(o,"class","svelte-v3mpfp"),N(A,"class","metadata-col svelte-v3mpfp"),N(v,"class","metadata-col svelte-v3mpfp"),N(a,"class","version-col svelte-v3mpfp"),N(m,"class","docs-info-col svelte-v3mpfp")},m(y,u){J(y,t,u),O(t,i),O(i,h),O(t,f),O(t,g),ke(L,g,null),O(t,c),O(t,o),ke(_,o,null),O(t,b),O(t,A);for(let S=0;S<k.length;S+=1)k[S]&&k[S].m(A,null);O(t,T),O(t,v),O(v,e),O(t,s),O(t,a),V.m(a,null),O(t,d),O(t,m),z&&z.m(m,null),O(t,p),j&&j.m(t,null),O(t,E),w=!0},p(y,u){(!w||u[0]&2)&&n!==(n=y[36].taskVersions[y[36].selectedVersion].task_name+"")&&le(h,n);const S={};u[0]&2&&(S.value=y[36].taskVersions[y[36].selectedVersion].category),L.$set(S);const U={};if(u[0]&2&&(U.value=y[36].taskVersions[y[36].selectedVersion].modality),_.$set(U),u[0]&2){C=he(Object.entries(y[36].taskVersions[y[36].selectedVersion].input_types));let G;for(G=0;G<C.length;G+=1){const $=st(y,C,G);k[G]?(k[G].p($,u),K(k[G],1)):(k[G]=at($),k[G].c(),K(k[G],1),k[G].m(A,null))}for(ge(),G=C.length;G<k.length;G+=1)B(G);ve()}(!w||u[0]&2)&&R!==(R=ht(y[36].taskVersions[y[36].selectedVersion])+"")&&le(e,R),P===(P=H(y,u))&&V?V.p(y,u):(V.d(1),V=P(y),V&&(V.c(),V.m(a,null))),z&&z.p&&(!w||u[0]&8194)&&De(z,X,y,y[13],w?Pe(X,y[13],u,ls):Me(y[13]),et),j&&j.p&&(!w||u[0]&8194)&&De(j,ee,y,y[13],w?Pe(ee,y[13],u,as):Me(y[13]),Qe)},i(y){if(!w){K(L.$$.fragment,y),K(_.$$.fragment,y);for(let u=0;u<C.length;u+=1)K(k[u]);K(z,y),K(j,y),w=!0}},o(y){Q(L.$$.fragment,y),Q(_.$$.fragment,y),k=k.filter(Boolean);for(let u=0;u<k.length;u+=1)Q(k[u]);Q(z,y),Q(j,y),w=!1},d(y){y&&I(t),Le(L),Le(_),Te(k,y),V.d(),z&&z.d(y),j&&j.d(y)}}}function at(r){let t,i,n=r[42]+"",h,f,g,L,c,o;return L=new ns({props:{value:r[43]}}),{c(){t=D("div"),i=D("div"),h=se(n),f=Y(),g=D("div"),Oe(L.$$.fragment),c=Y(),this.h()},l(_){t=M(_,"DIV",{class:!0});var b=F(t);i=M(b,"DIV",{class:!0});var A=F(i);h=ie(A,n),A.forEach(I),f=W(b),g=M(b,"DIV",{});var T=F(g);we(L.$$.fragment,T),T.forEach(I),c=W(b),b.forEach(I),this.h()},h(){N(i,"class","input-type-text me-1 svelte-v3mpfp"),N(t,"class","d-flex flex-row")},m(_,b){J(_,t,b),O(t,i),O(i,h),O(t,f),O(t,g),ke(L,g,null),O(t,c),o=!0},p(_,b){(!o||b[0]&2)&&n!==(n=_[42]+"")&&le(h,n);const A={};b[0]&2&&(A.value=_[43]),L.$set(A)},i(_){o||(K(L.$$.fragment,_),o=!0)},o(_){Q(L.$$.fragment,_),o=!1},d(_){_&&I(t),Le(L)}}}function hs(r){let t=r[36].taskVersions[r[36].selectedVersion].version+"",i;return{c(){i=se(t)},l(n){i=ie(n,t)},m(n,h){J(n,i,h)},p(n,h){h[0]&2&&t!==(t=n[36].taskVersions[n[36].selectedVersion].version+"")&&le(i,t)},d(n){n&&I(i)}}}function ds(r){let t,i,n,h,f=he($e(Object.keys(r[36].taskVersions))),g=[];for(let c=0;c<f.length;c+=1)g[c]=lt(tt(r,f,c));function L(){r[16].call(t,r[37],r[38])}return{c(){t=D("select");for(let c=0;c<g.length;c+=1)g[c].c();this.h()},l(c){t=M(c,"SELECT",{class:!0,"aria-label":!0});var o=F(t);for(let _=0;_<g.length;_+=1)g[_].l(o);o.forEach(I),this.h()},h(){N(t,"class","form-select"),N(t,"aria-label",i="Version for task "+r[36].taskVersions[r[36].selectedVersion].task_name),r[36].selectedVersion===void 0&&Et(L)},m(c,o){J(c,t,o);for(let _=0;_<g.length;_+=1)g[_]&&g[_].m(t,null);Ue(t,r[36].selectedVersion,!0),n||(h=xe(t,"change",L),n=!0)},p(c,o){if(r=c,o[0]&2){f=he($e(Object.keys(r[36].taskVersions)));let _;for(_=0;_<f.length;_+=1){const b=tt(r,f,_);g[_]?g[_].p(b,o):(g[_]=lt(b),g[_].c(),g[_].m(t,null))}for(;_<g.length;_+=1)g[_].d(1);g.length=f.length}o[0]&2&&i!==(i="Version for task "+r[36].taskVersions[r[36].selectedVersion].task_name)&&N(t,"aria-label",i),o[0]&2&&Ue(t,r[36].selectedVersion)},d(c){c&&I(t),Te(g,c),n=!1,h()}}}function lt(r){let t,i=(r[39]||"None")+"",n,h;return{c(){t=D("option"),n=se(i),this.h()},l(f){t=M(f,"OPTION",{});var g=F(t);n=ie(g,i),g.forEach(I),this.h()},h(){t.__value=h=r[39],ye(t,t.__value)},m(f,g){J(f,t,g),O(t,n)},p(f,g){g[0]&2&&i!==(i=(f[39]||"None")+"")&&le(n,i),g[0]&2&&h!==(h=f[39])&&(t.__value=h,ye(t,t.__value))},d(f){f&&I(t)}}}function rt(r){let t,i,n=r[36].taskVersions[r[36].selectedVersion]&&nt(r);return{c(){n&&n.c(),t=re()},l(h){n&&n.l(h),t=re()},m(h,f){n&&n.m(h,f),J(h,t,f),i=!0},p(h,f){h[36].taskVersions[h[36].selectedVersion]?n?(n.p(h,f),f[0]&2&&K(n,1)):(n=nt(h),n.c(),K(n,1),n.m(t.parentNode,t)):n&&(ge(),Q(n,1,1,()=>{n=null}),ve())},i(h){i||(K(n),i=!0)},o(h){Q(n),i=!1},d(h){h&&I(t),n&&n.d(h)}}}function ot(r){let t,i,n=r[33].groupTitle+"",h,f,g,L,c=he(r[33].tasks),o=[];for(let b=0;b<c.length;b+=1)o[b]=rt(Ke(r,c,b));const _=b=>Q(o[b],1,1,()=>{o[b]=null});return{c(){t=D("tr"),i=D("th"),h=se(n),f=Y();for(let b=0;b<o.length;b+=1)o[b].c();g=re(),this.h()},l(b){t=M(b,"TR",{class:!0});var A=F(t);i=M(A,"TH",{colspan:!0,class:!0});var T=F(i);h=ie(T,n),T.forEach(I),A.forEach(I),f=W(b);for(let v=0;v<o.length;v+=1)o[v].l(b);g=re(),this.h()},h(){N(i,"colspan","3"),N(i,"class","svelte-v3mpfp"),N(t,"class","border-top")},m(b,A){J(b,t,A),O(t,i),O(i,h),J(b,f,A);for(let T=0;T<o.length;T+=1)o[T]&&o[T].m(b,A);J(b,g,A),L=!0},p(b,A){if((!L||A[0]&2)&&n!==(n=b[33].groupTitle+"")&&le(h,n),A[0]&8194){c=he(b[33].tasks);let T;for(T=0;T<c.length;T+=1){const v=Ke(b,c,T);o[T]?(o[T].p(v,A),K(o[T],1)):(o[T]=rt(v),o[T].c(),K(o[T],1),o[T].m(g.parentNode,g))}for(ge(),T=c.length;T<o.length;T+=1)_(T);ve()}},i(b){if(!L){for(let A=0;A<c.length;A+=1)K(o[A]);L=!0}},o(b){o=o.filter(Boolean);for(let A=0;A<o.length;A+=1)Q(o[A]);L=!1},d(b){b&&(I(t),I(f),I(g)),Te(o,b)}}}function us(r){let t,i,n,h,f="Filter tasks",g,L,c,o,_,b,A,T,v,R="Reset",e,s,a='<div class="col"><select id="package-filter" class="invisible"></select></div> <div class="col"><select id="category-filter" class="invisible"></select></div> <div class="col"><select id="modality-filter" class="invisible"></select></div> <div class="col"><select id="input-type-filter" class="invisible"></select></div> <div class="col"><select id="tag-filter" class="invisible"></select></div>',l,d,m,p,E,w,C;const k=[cs,os],B=[];function H(P,V){return P[0].length===0?0:1}return d=H(r),m=B[d]=k[d](r),{c(){t=D("div"),i=D("div"),n=D("div"),h=D("div"),h.textContent=f,g=Y(),L=D("div"),c=D("div"),o=D("div"),_=D("div"),b=D("input"),A=Y(),T=D("div"),v=D("button"),v.textContent=R,e=Y(),s=D("div"),s.innerHTML=a,l=Y(),m.c(),p=re(),this.h()},l(P){t=M(P,"DIV",{class:!0});var V=F(t);i=M(V,"DIV",{class:!0});var X=F(i);n=M(X,"DIV",{class:!0});var z=F(n);h=M(z,"DIV",{class:!0,"data-svelte-h":!0}),ne(h)!=="svelte-gyxyme"&&(h.textContent=f),g=W(z),L=M(z,"DIV",{class:!0});var ee=F(L);c=M(ee,"DIV",{class:!0});var j=F(c);o=M(j,"DIV",{class:!0});var y=F(o);_=M(y,"DIV",{class:!0});var u=F(_);b=M(u,"INPUT",{type:!0,class:!0,placeholder:!0}),u.forEach(I),y.forEach(I),A=W(j),T=M(j,"DIV",{});var S=F(T);v=M(S,"BUTTON",{class:!0,"data-svelte-h":!0}),ne(v)!=="svelte-1iagwg6"&&(v.textContent=R),S.forEach(I),j.forEach(I),ee.forEach(I),z.forEach(I),e=W(X),s=M(X,"DIV",{class:!0,"data-svelte-h":!0}),ne(s)!=="svelte-1gf425z"&&(s.innerHTML=a),X.forEach(I),V.forEach(I),l=W(P),m.l(P),p=re(),this.h()},h(){N(h,"class","col-3 col-lg-6"),N(b,"type","text"),N(b,"class","form-control ms-auto"),N(b,"placeholder","Search..."),N(_,"class","input-group input-group-sm"),N(o,"class","flex-fill"),N(v,"class","btn btn-outline-secondary btn-sm ms-3"),N(c,"class","d-flex"),N(L,"class","col-9 col-lg-6"),N(n,"class","row mb-2"),N(s,"class","row"),N(i,"class","card-body"),N(t,"class","card mb-2"),_e(t,"invisible",r[0].length===0),_e(t,"collapse",r[0].length===0)},m(P,V){J(P,t,V),O(t,i),O(i,n),O(n,h),O(n,g),O(n,L),O(L,c),O(c,o),O(o,_),O(_,b),ye(b,r[2]),O(c,A),O(c,T),O(T,v),O(i,e),O(i,s),J(P,l,V),B[d].m(P,V),J(P,p,V),E=!0,w||(C=[xe(b,"input",r[15]),xe(v,"click",r[6])],w=!0)},p(P,V){V[0]&4&&b.value!==P[2]&&ye(b,P[2]),(!E||V[0]&1)&&_e(t,"invisible",P[0].length===0),(!E||V[0]&1)&&_e(t,"collapse",P[0].length===0);let X=d;d=H(P),d===X?B[d].p(P,V):(ge(),Q(B[X],1,1,()=>{B[X]=null}),ve(),m=B[d],m?m.p(P,V):(m=B[d]=k[d](P),m.c()),K(m,1),m.m(p.parentNode,p))},i(P){E||(K(m),E=!0)},o(P){Q(m),E=!1},d(P){P&&(I(t),I(l),I(p)),B[d].d(P),w=!1,bt(C)}}}let _t="pkg_name";function fe(r,t,i){r==null||r.setData([{text:i,placeholder:!0},...t])}function ct(r,t){return[...new Set(r.flatMap(i=>i.task_list).map(t).filter(i=>i!==null))]}function me(r){return r.map(t=>({text:t,value:t}))}function ht(r){const t=[];return t.push(...r.tags),r.authors&&t.push(r.authors),t.join(", ")}function ps(r,t,i){let n,h,{$$slots:f={},$$scope:g}=t,{taskGroups:L}=t,c=[],o=[],_="",b,A="",T,v="",R,e="",s,a="",l,d="",m={pkg_name:"Task"};function p(){L&&(z(L),i(0,c=Xt(L,_t)),E())}function E(){i(1,o=c.map(u=>{const S=u.tasks.filter(U=>w(U.taskVersions[U.selectedVersion]));return{...u,tasks:S}}).filter(u=>u.tasks.length>0))}function w(u){return C(u)&&k(u)&&B(u)&&P(u)&&H(u)&&V(u)}function C(u){if(!_)return!0;const S=_.toLowerCase();return u.task_name.toLowerCase().includes(S)||u.pkg_name.toLowerCase().includes(S)||u.category&&u.category.toLowerCase().includes(S)||u.modality&&u.modality.toLowerCase().includes(S)||u.authors&&u.authors.toLowerCase().includes(S)||Object.keys(u.input_types).find(U=>U.toLowerCase().includes(S))!==void 0||u.tags.find(U=>U.toLowerCase().includes(S))!==void 0}function k(u){return A?u.category!==null&&u.category===A:!0}function B(u){return v?u.modality!==null&&u.modality===v:!0}function H(u){return e?u.pkg_name===e:!0}function P(u){return a?u.tags.find(S=>S===a)!==void 0:!0}function V(u){return d?Object.keys(u.input_types).find(S=>S===d)!==void 0:!0}function X(){i(2,_=""),i(8,A=""),b==null||b.setSelected(""),T==null||T.setSelected(""),R==null||R.setSelected(""),s==null||s.setSelected(""),l==null||l.setSelected("")}function z(u){fe(b,me(ct(u,S=>S.category)),"Category"),fe(T,me(ct(u,S=>S.modality)),"Modality"),fe(R,me([...new Set(u.map(S=>S.pkg_name))]),"Package"),fe(s,me([...new Set(u.flatMap(S=>S.task_list).flatMap(S=>S.tags).filter(S=>S!==null))]),"Tag"),fe(l,me([...new Set(u.flatMap(S=>S.task_list).flatMap(S=>Object.keys(S.input_types)))]),"Input type")}dt(()=>{b=ee("category-filter","Select category","Category",u=>{i(8,A=u)}),T=ee("modality-filter","Select modality","Modality",u=>{i(9,v=u)}),R=ee("package-filter","Select package","Package",u=>{i(10,e=u)}),s=ee("tag-filter","Select tag","Tag",u=>{i(11,a=u)}),l=ee("input-type-filter","Select input type","Input type",u=>{i(12,d=u)}),p()});function ee(u,S,U,G){const $=document.getElementById(u);return $==null||$.classList.remove("invisible"),new Jt({select:`#${u}`,settings:{showSearch:!0,allowDeselect:!0,ariaLabel:S},events:{afterChange:oe=>{oe.length===0||oe[0].value===U?G(""):G(oe[0].value)}}})}function j(){_=this.value,i(2,_)}function y(u,S){u[S].selectedVersion=yt(this),i(1,o),i(2,_),i(8,A),i(9,v),i(10,e),i(11,a),i(12,d),i(0,c)}return r.$$set=u=>{"taskGroups"in u&&i(7,L=u.taskGroups),"$$scope"in u&&i(13,g=u.$$scope)},r.$$.update=()=>{r.$$.dirty[0]&128&&L&&p(),r.$$.dirty[0]&7941&&(_||A||v||e||a||d?E():i(1,o=c)),r.$$.dirty[0]&2&&i(4,n=o.reduce((u,S)=>u+S.tasks.length,0)),r.$$.dirty[0]&1&&i(3,h=c.reduce((u,S)=>u+S.tasks.length,0))},[c,o,_,h,n,m,X,L,A,v,e,a,d,g,f,j,y]}class fs extends Se{constructor(t){super(),Ie(this,t,ps,us,Ce,{taskGroups:7},null,[-1,-1])}}function ms(r){let t,i,n;return i=new fs({props:{taskGroups:wt}}),{c(){t=D("div"),Oe(i.$$.fragment),this.h()},l(h){t=M(h,"DIV",{class:!0});var f=F(t);we(i.$$.fragment,f),f.forEach(I),this.h()},h(){N(t,"class","container mt-3")},m(h,f){J(h,t,f),ke(i,t,null),n=!0},p:ce,i(h){n||(K(i.$$.fragment,h),n=!0)},o(h){Q(i.$$.fragment,h),n=!1},d(h){h&&I(t),Le(i)}}}class bs extends Se{constructor(t){super(),Ie(this,t,null,ms,Ce,{})}}export{bs as component};
