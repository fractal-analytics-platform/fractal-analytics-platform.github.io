var Zn=Object.defineProperty;var Rs=a=>{throw TypeError(a)};var qn=(a,e,s)=>e in a?Zn(a,e,{enumerable:!0,configurable:!0,writable:!0,value:s}):a[e]=s;var K=(a,e,s)=>qn(a,typeof e!="symbol"?e+"":e,s),Wn=(a,e,s)=>e.has(a)||Rs("Cannot "+s);var Ds=(a,e,s)=>e.has(a)?Rs("Cannot add the same private member more than once"):e instanceof WeakSet?e.add(a):e.set(a,s);var vt=(a,e,s)=>(Wn(a,e,"access private method"),s);import{s as Mt,n as Be,o as wn,r as Yn,c as ss,u as ns,g as is,a as as,k as Jn}from"../chunks/scheduler.BvLojk_z.js";import{S as Pt,i as Ft,m as Se,j as ce,g as L,e as z,b as Ee,c as H,d as Z,f as Te,p as Ns,o as F,k as S,l as Ie,y as xe,s as oe,h as re,z as Et,A as It,B as st,q as Ge,a as ue,n as je,t as le,C as Qn,D as $t,u as zt,v as Ht,w as Vt,x as Ut,E as Ms,H as Kn,F as ei}from"../chunks/index.fIxOdhEb.js";import{_ as ti}from"../chunks/preload-helper.C1FmrZbK.js";function He(a){return(a==null?void 0:a.length)!==void 0?a:Array.from(a)}function us(){return{async:!1,baseUrl:null,breaks:!1,extensions:null,gfm:!0,headerIds:!1,headerPrefix:"",highlight:null,hooks:null,langPrefix:"language-",mangle:!1,pedantic:!1,renderer:null,sanitize:!1,sanitizer:null,silent:!1,smartypants:!1,tokenizer:null,walkTokens:null,xhtml:!1}}let qe=us();function yn(a){qe=a}const vn=/[&<>"']/,si=new RegExp(vn.source,"g"),En=/[<>"']|&(?!(#\d{1,7}|#[Xx][a-fA-F0-9]{1,6}|\w+);)/,ni=new RegExp(En.source,"g"),ii={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},Ps=a=>ii[a];function _e(a,e){if(e){if(vn.test(a))return a.replace(si,Ps)}else if(En.test(a))return a.replace(ni,Ps);return a}const ai=/&(#(?:\d+)|(?:#x[0-9A-Fa-f]+)|(?:\w+));?/ig;function Tn(a){return a.replace(ai,(e,s)=>(s=s.toLowerCase(),s==="colon"?":":s.charAt(0)==="#"?s.charAt(1)==="x"?String.fromCharCode(parseInt(s.substring(2),16)):String.fromCharCode(+s.substring(1)):""))}const li=/(^|[^\[])\^/g;function te(a,e){a=typeof a=="string"?a:a.source,e=e||"";const s={replace:(t,i)=>(i=typeof i=="object"&&"source"in i?i.source:i,i=i.replace(li,"$1"),a=a.replace(t,i),s),getRegex:()=>new RegExp(a,e)};return s}const oi=/[^\w:]/g,ri=/^$|^[a-z][a-z0-9+.-]*:|^[?#]/i;function Fs(a,e,s){if(a){let t;try{t=decodeURIComponent(Tn(s)).replace(oi,"").toLowerCase()}catch{return null}if(t.indexOf("javascript:")===0||t.indexOf("vbscript:")===0||t.indexOf("data:")===0)return null}e&&!ri.test(s)&&(s=pi(e,s));try{s=encodeURI(s).replace(/%25/g,"%")}catch{return null}return s}const Tt={},ci=/^[^:]+:\/*[^/]*$/,hi=/^([^:]+:)[\s\S]*$/,ui=/^([^:]+:\/*[^/]*)[\s\S]*$/;function pi(a,e){Tt[" "+a]||(ci.test(a)?Tt[" "+a]=a+"/":Tt[" "+a]=Lt(a,"/",!0)),a=Tt[" "+a];const s=a.indexOf(":")===-1;return e.substring(0,2)==="//"?s?e:a.replace(hi,"$1")+e:e.charAt(0)==="/"?s?e:a.replace(ui,"$1")+e:a+e}const Rt={exec:()=>null};function $s(a,e){const s=a.replace(/\|/g,(l,r,p)=>{let c=!1,h=r;for(;--h>=0&&p[h]==="\\";)c=!c;return c?"|":" |"}),t=s.split(/ \|/);let i=0;if(t[0].trim()||t.shift(),t.length>0&&!t[t.length-1].trim()&&t.pop(),e)if(t.length>e)t.splice(e);else for(;t.length<e;)t.push("");for(;i<t.length;i++)t[i]=t[i].trim().replace(/\\\|/g,"|");return t}function Lt(a,e,s){const t=a.length;if(t===0)return"";let i=0;for(;i<t;){const l=a.charAt(t-i-1);if(l===e&&!s)i++;else if(l!==e&&s)i++;else break}return a.slice(0,t-i)}function di(a,e){if(a.indexOf(e[1])===-1)return-1;let s=0;for(let t=0;t<a.length;t++)if(a[t]==="\\")t++;else if(a[t]===e[0])s++;else if(a[t]===e[1]&&(s--,s<0))return t;return-1}function fi(a,e){!a||a.silent||(e&&console.warn("marked(): callback is deprecated since version 5.0.0, should not be used and will be removed in the future. Read more here: https://marked.js.org/using_pro#async"),(a.sanitize||a.sanitizer)&&console.warn("marked(): sanitize and sanitizer parameters are deprecated since version 0.7.0, should not be used and will be removed in the future. Read more here: https://marked.js.org/#/USING_ADVANCED.md#options"),(a.highlight||a.langPrefix!=="language-")&&console.warn("marked(): highlight and langPrefix parameters are deprecated since version 5.0.0, should not be used and will be removed in the future. Instead use https://www.npmjs.com/package/marked-highlight."),a.mangle&&console.warn("marked(): mangle parameter is enabled by default, but is deprecated since version 5.0.0, and will be removed in the future. To clear this warning, install https://www.npmjs.com/package/marked-mangle, or disable by setting `{mangle: false}`."),a.baseUrl&&console.warn("marked(): baseUrl parameter is deprecated since version 5.0.0, should not be used and will be removed in the future. Instead use https://www.npmjs.com/package/marked-base-url."),a.smartypants&&console.warn("marked(): smartypants parameter is deprecated since version 5.0.0, should not be used and will be removed in the future. Instead use https://www.npmjs.com/package/marked-smartypants."),a.xhtml&&console.warn("marked(): xhtml parameter is deprecated since version 5.0.0, should not be used and will be removed in the future. Instead use https://www.npmjs.com/package/marked-xhtml."),(a.headerIds||a.headerPrefix)&&console.warn("marked(): headerIds and headerPrefix parameters enabled by default, but are deprecated since version 5.0.0, and will be removed in the future. To clear this warning, install  https://www.npmjs.com/package/marked-gfm-heading-id, or disable by setting `{headerIds: false}`."))}function zs(a,e,s,t){const i=e.href,l=e.title?_e(e.title):null,r=a[1].replace(/\\([\[\]])/g,"$1");if(a[0].charAt(0)!=="!"){t.state.inLink=!0;const p={type:"link",raw:s,href:i,title:l,text:r,tokens:t.inlineTokens(r)};return t.state.inLink=!1,p}return{type:"image",raw:s,href:i,title:l,text:_e(r)}}function mi(a,e){const s=a.match(/^(\s+)(?:```)/);if(s===null)return e;const t=s[1];return e.split(`
`).map(i=>{const l=i.match(/^\s+/);if(l===null)return i;const[r]=l;return r.length>=t.length?i.slice(t.length):i}).join(`
`)}class Dt{constructor(e){K(this,"options");K(this,"rules");K(this,"lexer");this.options=e||qe}space(e){const s=this.rules.block.newline.exec(e);if(s&&s[0].length>0)return{type:"space",raw:s[0]}}code(e){const s=this.rules.block.code.exec(e);if(s){const t=s[0].replace(/^ {1,4}/gm,"");return{type:"code",raw:s[0],codeBlockStyle:"indented",text:this.options.pedantic?t:Lt(t,`
`)}}}fences(e){const s=this.rules.block.fences.exec(e);if(s){const t=s[0],i=mi(t,s[3]||"");return{type:"code",raw:t,lang:s[2]?s[2].trim().replace(this.rules.inline._escapes,"$1"):s[2],text:i}}}heading(e){const s=this.rules.block.heading.exec(e);if(s){let t=s[2].trim();if(/#$/.test(t)){const i=Lt(t,"#");(this.options.pedantic||!i||/ $/.test(i))&&(t=i.trim())}return{type:"heading",raw:s[0],depth:s[1].length,text:t,tokens:this.lexer.inline(t)}}}hr(e){const s=this.rules.block.hr.exec(e);if(s)return{type:"hr",raw:s[0]}}blockquote(e){const s=this.rules.block.blockquote.exec(e);if(s){const t=s[0].replace(/^ *>[ \t]?/gm,""),i=this.lexer.state.top;this.lexer.state.top=!0;const l=this.lexer.blockTokens(t);return this.lexer.state.top=i,{type:"blockquote",raw:s[0],tokens:l,text:t}}}list(e){let s=this.rules.block.list.exec(e);if(s){let t=s[1].trim();const i=t.length>1,l={type:"list",raw:"",ordered:i,start:i?+t.slice(0,-1):"",loose:!1,items:[]};t=i?`\\d{1,9}\\${t.slice(-1)}`:`\\${t}`,this.options.pedantic&&(t=i?t:"[*+-]");const r=new RegExp(`^( {0,3}${t})((?:[	 ][^\\n]*)?(?:\\n|$))`);let p="",c="",h=!1;for(;e;){let g=!1;if(!(s=r.exec(e))||this.rules.block.hr.test(e))break;p=s[0],e=e.substring(p.length);let _=s[2].split(`
`,1)[0].replace(/^\t+/,o=>" ".repeat(3*o.length)),k=e.split(`
`,1)[0],v=0;this.options.pedantic?(v=2,c=_.trimLeft()):(v=s[2].search(/[^ ]/),v=v>4?1:v,c=_.slice(v),v+=s[1].length);let w=!1;if(!_&&/^ *$/.test(k)&&(p+=k+`
`,e=e.substring(k.length+1),g=!0),!g){const o=new RegExp(`^ {0,${Math.min(3,v-1)}}(?:[*+-]|\\d{1,9}[.)])((?:[ 	][^\\n]*)?(?:\\n|$))`),d=new RegExp(`^ {0,${Math.min(3,v-1)}}((?:- *){3,}|(?:_ *){3,}|(?:\\* *){3,})(?:\\n+|$)`),u=new RegExp(`^ {0,${Math.min(3,v-1)}}(?:\`\`\`|~~~)`),m=new RegExp(`^ {0,${Math.min(3,v-1)}}#`);for(;e;){const y=e.split(`
`,1)[0];if(k=y,this.options.pedantic&&(k=k.replace(/^ {1,4}(?=( {4})*[^ ])/g,"  ")),u.test(k)||m.test(k)||o.test(k)||d.test(e))break;if(k.search(/[^ ]/)>=v||!k.trim())c+=`
`+k.slice(v);else{if(w||_.search(/[^ ]/)>=4||u.test(_)||m.test(_)||d.test(_))break;c+=`
`+k}!w&&!k.trim()&&(w=!0),p+=y+`
`,e=e.substring(y.length+1),_=k.slice(v)}}l.loose||(h?l.loose=!0:/\n *\n *$/.test(p)&&(h=!0));let C=null,n;this.options.gfm&&(C=/^\[[ xX]\] /.exec(c),C&&(n=C[0]!=="[ ] ",c=c.replace(/^\[[ xX]\] +/,""))),l.items.push({type:"list_item",raw:p,task:!!C,checked:n,loose:!1,text:c,tokens:[]}),l.raw+=p}l.items[l.items.length-1].raw=p.trimRight(),l.items[l.items.length-1].text=c.trimRight(),l.raw=l.raw.trimRight();for(let g=0;g<l.items.length;g++)if(this.lexer.state.top=!1,l.items[g].tokens=this.lexer.blockTokens(l.items[g].text,[]),!l.loose){const _=l.items[g].tokens.filter(v=>v.type==="space"),k=_.length>0&&_.some(v=>/\n.*\n/.test(v.raw));l.loose=k}if(l.loose)for(let g=0;g<l.items.length;g++)l.items[g].loose=!0;return l}}html(e){const s=this.rules.block.html.exec(e);if(s){const t={type:"html",block:!0,raw:s[0],pre:!this.options.sanitizer&&(s[1]==="pre"||s[1]==="script"||s[1]==="style"),text:s[0]};if(this.options.sanitize){const i=this.options.sanitizer?this.options.sanitizer(s[0]):_e(s[0]),l=t;l.type="paragraph",l.text=i,l.tokens=this.lexer.inline(i)}return t}}def(e){const s=this.rules.block.def.exec(e);if(s){const t=s[1].toLowerCase().replace(/\s+/g," "),i=s[2]?s[2].replace(/^<(.*)>$/,"$1").replace(this.rules.inline._escapes,"$1"):"",l=s[3]?s[3].substring(1,s[3].length-1).replace(this.rules.inline._escapes,"$1"):s[3];return{type:"def",tag:t,raw:s[0],href:i,title:l}}}table(e){const s=this.rules.block.table.exec(e);if(s){const t={type:"table",raw:s[0],header:$s(s[1]).map(i=>({text:i,tokens:[]})),align:s[2].replace(/^ *|\| *$/g,"").split(/ *\| */),rows:s[3]&&s[3].trim()?s[3].replace(/\n[ \t]*$/,"").split(`
`):[]};if(t.header.length===t.align.length){let i=t.align.length,l,r,p,c;for(l=0;l<i;l++){const h=t.align[l];h&&(/^ *-+: *$/.test(h)?t.align[l]="right":/^ *:-+: *$/.test(h)?t.align[l]="center":/^ *:-+ *$/.test(h)?t.align[l]="left":t.align[l]=null)}for(i=t.rows.length,l=0;l<i;l++)t.rows[l]=$s(t.rows[l],t.header.length).map(h=>({text:h,tokens:[]}));for(i=t.header.length,r=0;r<i;r++)t.header[r].tokens=this.lexer.inline(t.header[r].text);for(i=t.rows.length,r=0;r<i;r++)for(c=t.rows[r],p=0;p<c.length;p++)c[p].tokens=this.lexer.inline(c[p].text);return t}}}lheading(e){const s=this.rules.block.lheading.exec(e);if(s)return{type:"heading",raw:s[0],depth:s[2].charAt(0)==="="?1:2,text:s[1],tokens:this.lexer.inline(s[1])}}paragraph(e){const s=this.rules.block.paragraph.exec(e);if(s){const t=s[1].charAt(s[1].length-1)===`
`?s[1].slice(0,-1):s[1];return{type:"paragraph",raw:s[0],text:t,tokens:this.lexer.inline(t)}}}text(e){const s=this.rules.block.text.exec(e);if(s)return{type:"text",raw:s[0],text:s[0],tokens:this.lexer.inline(s[0])}}escape(e){const s=this.rules.inline.escape.exec(e);if(s)return{type:"escape",raw:s[0],text:_e(s[1])}}tag(e){const s=this.rules.inline.tag.exec(e);if(s)return!this.lexer.state.inLink&&/^<a /i.test(s[0])?this.lexer.state.inLink=!0:this.lexer.state.inLink&&/^<\/a>/i.test(s[0])&&(this.lexer.state.inLink=!1),!this.lexer.state.inRawBlock&&/^<(pre|code|kbd|script)(\s|>)/i.test(s[0])?this.lexer.state.inRawBlock=!0:this.lexer.state.inRawBlock&&/^<\/(pre|code|kbd|script)(\s|>)/i.test(s[0])&&(this.lexer.state.inRawBlock=!1),{type:this.options.sanitize?"text":"html",raw:s[0],inLink:this.lexer.state.inLink,inRawBlock:this.lexer.state.inRawBlock,block:!1,text:this.options.sanitize?this.options.sanitizer?this.options.sanitizer(s[0]):_e(s[0]):s[0]}}link(e){const s=this.rules.inline.link.exec(e);if(s){const t=s[2].trim();if(!this.options.pedantic&&/^</.test(t)){if(!/>$/.test(t))return;const r=Lt(t.slice(0,-1),"\\");if((t.length-r.length)%2===0)return}else{const r=di(s[2],"()");if(r>-1){const c=(s[0].indexOf("!")===0?5:4)+s[1].length+r;s[2]=s[2].substring(0,r),s[0]=s[0].substring(0,c).trim(),s[3]=""}}let i=s[2],l="";if(this.options.pedantic){const r=/^([^'"]*[^\s])\s+(['"])(.*)\2/.exec(i);r&&(i=r[1],l=r[3])}else l=s[3]?s[3].slice(1,-1):"";return i=i.trim(),/^</.test(i)&&(this.options.pedantic&&!/>$/.test(t)?i=i.slice(1):i=i.slice(1,-1)),zs(s,{href:i&&i.replace(this.rules.inline._escapes,"$1"),title:l&&l.replace(this.rules.inline._escapes,"$1")},s[0],this.lexer)}}reflink(e,s){let t;if((t=this.rules.inline.reflink.exec(e))||(t=this.rules.inline.nolink.exec(e))){let i=(t[2]||t[1]).replace(/\s+/g," ");if(i=s[i.toLowerCase()],!i){const l=t[0].charAt(0);return{type:"text",raw:l,text:l}}return zs(t,i,t[0],this.lexer)}}emStrong(e,s,t=""){let i=this.rules.inline.emStrong.lDelim.exec(e);if(!i||i[3]&&t.match(/[\p{L}\p{N}]/u))return;if(!(i[1]||i[2]||"")||!t||this.rules.inline.punctuation.exec(t)){const r=[...i[0]].length-1;let p,c,h=r,g=0;const _=i[0][0]==="*"?this.rules.inline.emStrong.rDelimAst:this.rules.inline.emStrong.rDelimUnd;for(_.lastIndex=0,s=s.slice(-1*e.length+r);(i=_.exec(s))!=null;){if(p=i[1]||i[2]||i[3]||i[4]||i[5]||i[6],!p)continue;if(c=[...p].length,i[3]||i[4]){h+=c;continue}else if((i[5]||i[6])&&r%3&&!((r+c)%3)){g+=c;continue}if(h-=c,h>0)continue;c=Math.min(c,c+h+g);const k=[...e].slice(0,r+i.index+c+1).join("");if(Math.min(r,c)%2){const w=k.slice(1,-1);return{type:"em",raw:k,text:w,tokens:this.lexer.inlineTokens(w)}}const v=k.slice(2,-2);return{type:"strong",raw:k,text:v,tokens:this.lexer.inlineTokens(v)}}}}codespan(e){const s=this.rules.inline.code.exec(e);if(s){let t=s[2].replace(/\n/g," ");const i=/[^ ]/.test(t),l=/^ /.test(t)&&/ $/.test(t);return i&&l&&(t=t.substring(1,t.length-1)),t=_e(t,!0),{type:"codespan",raw:s[0],text:t}}}br(e){const s=this.rules.inline.br.exec(e);if(s)return{type:"br",raw:s[0]}}del(e){const s=this.rules.inline.del.exec(e);if(s)return{type:"del",raw:s[0],text:s[2],tokens:this.lexer.inlineTokens(s[2])}}autolink(e,s){const t=this.rules.inline.autolink.exec(e);if(t){let i,l;return t[2]==="@"?(i=_e(this.options.mangle?s(t[1]):t[1]),l="mailto:"+i):(i=_e(t[1]),l=i),{type:"link",raw:t[0],text:i,href:l,tokens:[{type:"text",raw:i,text:i}]}}}url(e,s){let t;if(t=this.rules.inline.url.exec(e)){let i,l;if(t[2]==="@")i=_e(this.options.mangle?s(t[0]):t[0]),l="mailto:"+i;else{let r;do r=t[0],t[0]=this.rules.inline._backpedal.exec(t[0])[0];while(r!==t[0]);i=_e(t[0]),t[1]==="www."?l="http://"+t[0]:l=t[0]}return{type:"link",raw:t[0],text:i,href:l,tokens:[{type:"text",raw:i,text:i}]}}}inlineText(e,s){const t=this.rules.inline.text.exec(e);if(t){let i;return this.lexer.state.inRawBlock?i=this.options.sanitize?this.options.sanitizer?this.options.sanitizer(t[0]):_e(t[0]):t[0]:i=_e(this.options.smartypants?s(t[0]):t[0]),{type:"text",raw:t[0],text:i}}}}const $={newline:/^(?: *(?:\n|$))+/,code:/^( {4}[^\n]+(?:\n(?: *(?:\n|$))*)?)+/,fences:/^ {0,3}(`{3,}(?=[^`\n]*(?:\n|$))|~{3,})([^\n]*)(?:\n|$)(?:|([\s\S]*?)(?:\n|$))(?: {0,3}\1[~`]* *(?=\n|$)|$)/,hr:/^ {0,3}((?:-[\t ]*){3,}|(?:_[ \t]*){3,}|(?:\*[ \t]*){3,})(?:\n+|$)/,heading:/^ {0,3}(#{1,6})(?=\s|$)(.*)(?:\n+|$)/,blockquote:/^( {0,3}> ?(paragraph|[^\n]*)(?:\n|$))+/,list:/^( {0,3}bull)([ \t][^\n]+?)?(?:\n|$)/,html:"^ {0,3}(?:<(script|pre|style|textarea)[\\s>][\\s\\S]*?(?:</\\1>[^\\n]*\\n+|$)|comment[^\\n]*(\\n+|$)|<\\?[\\s\\S]*?(?:\\?>\\n*|$)|<![A-Z][\\s\\S]*?(?:>\\n*|$)|<!\\[CDATA\\[[\\s\\S]*?(?:\\]\\]>\\n*|$)|</?(tag)(?: +|\\n|/?>)[\\s\\S]*?(?:(?:\\n *)+\\n|$)|<(?!script|pre|style|textarea)([a-z][\\w-]*)(?:attribute)*? */?>(?=[ \\t]*(?:\\n|$))[\\s\\S]*?(?:(?:\\n *)+\\n|$)|</(?!script|pre|style|textarea)[a-z][\\w-]*\\s*>(?=[ \\t]*(?:\\n|$))[\\s\\S]*?(?:(?:\\n *)+\\n|$))",def:/^ {0,3}\[(label)\]: *(?:\n *)?([^<\s][^\s]*|<.*?>)(?:(?: +(?:\n *)?| *\n *)(title))? *(?:\n+|$)/,table:Rt,lheading:/^((?:(?!^bull ).|\n(?!\n|bull ))+?)\n {0,3}(=+|-+) *(?:\n+|$)/,_paragraph:/^([^\n]+(?:\n(?!hr|heading|lheading|blockquote|fences|list|html|table| +\n)[^\n]+)*)/,text:/^[^\n]+/};$._label=/(?!\s*\])(?:\\.|[^\[\]\\])+/;$._title=/(?:"(?:\\"?|[^"\\])*"|'[^'\n]*(?:\n[^'\n]+)*\n?'|\([^()]*\))/;$.def=te($.def).replace("label",$._label).replace("title",$._title).getRegex();$.bullet=/(?:[*+-]|\d{1,9}[.)])/;$.listItemStart=te(/^( *)(bull) */).replace("bull",$.bullet).getRegex();$.list=te($.list).replace(/bull/g,$.bullet).replace("hr","\\n+(?=\\1?(?:(?:- *){3,}|(?:_ *){3,}|(?:\\* *){3,})(?:\\n+|$))").replace("def","\\n+(?="+$.def.source+")").getRegex();$._tag="address|article|aside|base|basefont|blockquote|body|caption|center|col|colgroup|dd|details|dialog|dir|div|dl|dt|fieldset|figcaption|figure|footer|form|frame|frameset|h[1-6]|head|header|hr|html|iframe|legend|li|link|main|menu|menuitem|meta|nav|noframes|ol|optgroup|option|p|param|section|source|summary|table|tbody|td|tfoot|th|thead|title|tr|track|ul";$._comment=/<!--(?!-?>)[\s\S]*?(?:-->|$)/;$.html=te($.html,"i").replace("comment",$._comment).replace("tag",$._tag).replace("attribute",/ +[a-zA-Z:_][\w.:-]*(?: *= *"[^"\n]*"| *= *'[^'\n]*'| *= *[^\s"'=<>`]+)?/).getRegex();$.lheading=te($.lheading).replace(/bull/g,$.bullet).getRegex();$.paragraph=te($._paragraph).replace("hr",$.hr).replace("heading"," {0,3}#{1,6} ").replace("|lheading","").replace("|table","").replace("blockquote"," {0,3}>").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|textarea|!--)").replace("tag",$._tag).getRegex();$.blockquote=te($.blockquote).replace("paragraph",$.paragraph).getRegex();$.normal={...$};$.gfm={...$.normal,table:"^ *([^\\n ].*\\|.*)\\n {0,3}(?:\\| *)?(:?-+:? *(?:\\| *:?-+:? *)*)(?:\\| *)?(?:\\n((?:(?! *\\n|hr|heading|blockquote|code|fences|list|html).*(?:\\n|$))*)\\n*|$)"};$.gfm.table=te($.gfm.table).replace("hr",$.hr).replace("heading"," {0,3}#{1,6} ").replace("blockquote"," {0,3}>").replace("code"," {4}[^\\n]").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|textarea|!--)").replace("tag",$._tag).getRegex();$.gfm.paragraph=te($._paragraph).replace("hr",$.hr).replace("heading"," {0,3}#{1,6} ").replace("|lheading","").replace("table",$.gfm.table).replace("blockquote"," {0,3}>").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|textarea|!--)").replace("tag",$._tag).getRegex();$.pedantic={...$.normal,html:te(`^ *(?:comment *(?:\\n|\\s*$)|<(tag)[\\s\\S]+?</\\1> *(?:\\n{2,}|\\s*$)|<tag(?:"[^"]*"|'[^']*'|\\s[^'"/>\\s]*)*?/?> *(?:\\n{2,}|\\s*$))`).replace("comment",$._comment).replace(/tag/g,"(?!(?:a|em|strong|small|s|cite|q|dfn|abbr|data|time|code|var|samp|kbd|sub|sup|i|b|u|mark|ruby|rt|rp|bdi|bdo|span|br|wbr|ins|del|img)\\b)\\w+(?!:|[^\\w\\s@]*@)\\b").getRegex(),def:/^ *\[([^\]]+)\]: *<?([^\s>]+)>?(?: +(["(][^\n]+[")]))? *(?:\n+|$)/,heading:/^(#{1,6})(.*)(?:\n+|$)/,fences:Rt,lheading:/^(.+?)\n {0,3}(=+|-+) *(?:\n+|$)/,paragraph:te($.normal._paragraph).replace("hr",$.hr).replace("heading",` *#{1,6} *[^
]`).replace("lheading",$.lheading).replace("blockquote"," {0,3}>").replace("|fences","").replace("|list","").replace("|html","").getRegex()};const A={escape:/^\\([!"#$%&'()*+,\-./:;<=>?@\[\]\\^_`{|}~])/,autolink:/^<(scheme:[^\s\x00-\x1f<>]*|email)>/,url:Rt,tag:"^comment|^</[a-zA-Z][\\w:-]*\\s*>|^<[a-zA-Z][\\w-]*(?:attribute)*?\\s*/?>|^<\\?[\\s\\S]*?\\?>|^<![a-zA-Z]+\\s[\\s\\S]*?>|^<!\\[CDATA\\[[\\s\\S]*?\\]\\]>",link:/^!?\[(label)\]\(\s*(href)(?:\s+(title))?\s*\)/,reflink:/^!?\[(label)\]\[(ref)\]/,nolink:/^!?\[(ref)\](?:\[\])?/,reflinkSearch:"reflink|nolink(?!\\()",emStrong:{lDelim:/^(?:\*+(?:((?!\*)[punct])|[^\s*]))|^_+(?:((?!_)[punct])|([^\s_]))/,rDelimAst:/^[^_*]*?__[^_*]*?\*[^_*]*?(?=__)|[^*]+(?=[^*])|(?!\*)[punct](\*+)(?=[\s]|$)|[^punct\s](\*+)(?!\*)(?=[punct\s]|$)|(?!\*)[punct\s](\*+)(?=[^punct\s])|[\s](\*+)(?!\*)(?=[punct])|(?!\*)[punct](\*+)(?!\*)(?=[punct])|[^punct\s](\*+)(?=[^punct\s])/,rDelimUnd:/^[^_*]*?\*\*[^_*]*?_[^_*]*?(?=\*\*)|[^_]+(?=[^_])|(?!_)[punct](_+)(?=[\s]|$)|[^punct\s](_+)(?!_)(?=[punct\s]|$)|(?!_)[punct\s](_+)(?=[^punct\s])|[\s](_+)(?!_)(?=[punct])|(?!_)[punct](_+)(?!_)(?=[punct])/},code:/^(`+)([^`]|[^`][\s\S]*?[^`])\1(?!`)/,br:/^( {2,}|\\)\n(?!\s*$)/,del:Rt,text:/^(`+|[^`])(?:(?= {2,}\n)|[\s\S]*?(?:(?=[\\<!\[`*_]|\b_|$)|[^ ](?= {2,}\n)))/,punctuation:/^((?![*_])[\spunctuation])/};A._punctuation="\\p{P}$+<=>`^|~";A.punctuation=te(A.punctuation,"u").replace(/punctuation/g,A._punctuation).getRegex();A.blockSkip=/\[[^[\]]*?\]\([^\(\)]*?\)|`[^`]*?`|<[^<>]*?>/g;A.anyPunctuation=/\\[punct]/g;A._escapes=/\\([punct])/g;A._comment=te($._comment).replace("(?:-->|$)","-->").getRegex();A.emStrong.lDelim=te(A.emStrong.lDelim,"u").replace(/punct/g,A._punctuation).getRegex();A.emStrong.rDelimAst=te(A.emStrong.rDelimAst,"gu").replace(/punct/g,A._punctuation).getRegex();A.emStrong.rDelimUnd=te(A.emStrong.rDelimUnd,"gu").replace(/punct/g,A._punctuation).getRegex();A.anyPunctuation=te(A.anyPunctuation,"gu").replace(/punct/g,A._punctuation).getRegex();A._escapes=te(A._escapes,"gu").replace(/punct/g,A._punctuation).getRegex();A._scheme=/[a-zA-Z][a-zA-Z0-9+.-]{1,31}/;A._email=/[a-zA-Z0-9.!#$%&'*+/=?^_`{|}~-]+(@)[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)+(?![-_])/;A.autolink=te(A.autolink).replace("scheme",A._scheme).replace("email",A._email).getRegex();A._attribute=/\s+[a-zA-Z:_][\w.:-]*(?:\s*=\s*"[^"]*"|\s*=\s*'[^']*'|\s*=\s*[^\s"'=<>`]+)?/;A.tag=te(A.tag).replace("comment",A._comment).replace("attribute",A._attribute).getRegex();A._label=/(?:\[(?:\\.|[^\[\]\\])*\]|\\.|`[^`]*`|[^\[\]\\`])*?/;A._href=/<(?:\\.|[^\n<>\\])+>|[^\s\x00-\x1f]*/;A._title=/"(?:\\"?|[^"\\])*"|'(?:\\'?|[^'\\])*'|\((?:\\\)?|[^)\\])*\)/;A.link=te(A.link).replace("label",A._label).replace("href",A._href).replace("title",A._title).getRegex();A.reflink=te(A.reflink).replace("label",A._label).replace("ref",$._label).getRegex();A.nolink=te(A.nolink).replace("ref",$._label).getRegex();A.reflinkSearch=te(A.reflinkSearch,"g").replace("reflink",A.reflink).replace("nolink",A.nolink).getRegex();A.normal={...A};A.pedantic={...A.normal,strong:{start:/^__|\*\*/,middle:/^__(?=\S)([\s\S]*?\S)__(?!_)|^\*\*(?=\S)([\s\S]*?\S)\*\*(?!\*)/,endAst:/\*\*(?!\*)/g,endUnd:/__(?!_)/g},em:{start:/^_|\*/,middle:/^()\*(?=\S)([\s\S]*?\S)\*(?!\*)|^_(?=\S)([\s\S]*?\S)_(?!_)/,endAst:/\*(?!\*)/g,endUnd:/_(?!_)/g},link:te(/^!?\[(label)\]\((.*?)\)/).replace("label",A._label).getRegex(),reflink:te(/^!?\[(label)\]\s*\[([^\]]*)\]/).replace("label",A._label).getRegex()};A.gfm={...A.normal,escape:te(A.escape).replace("])","~|])").getRegex(),_extended_email:/[A-Za-z0-9._+-]+(@)[a-zA-Z0-9-_]+(?:\.[a-zA-Z0-9-_]*[a-zA-Z0-9])+(?![-_])/,url:/^((?:ftp|https?):\/\/|www\.)(?:[a-zA-Z0-9\-]+\.?)+[^\s<]*|^email/,_backpedal:/(?:[^?!.,:;*_'"~()&]+|\([^)]*\)|&(?![a-zA-Z0-9]+;$)|[?!.,:;*_'"~)]+(?!$))+/,del:/^(~~?)(?=[^\s~])([\s\S]*?[^\s~])\1(?=[^~]|$)/,text:/^([`~]+|[^`~])(?:(?= {2,}\n)|(?=[a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-]+@)|[\s\S]*?(?:(?=[\\<!\[`*~_]|\b_|https?:\/\/|ftp:\/\/|www\.|$)|[^ ](?= {2,}\n)|[^a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-](?=[a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-]+@)))/};A.gfm.url=te(A.gfm.url,"i").replace("email",A.gfm._extended_email).getRegex();A.breaks={...A.gfm,br:te(A.br).replace("{2,}","*").getRegex(),text:te(A.gfm.text).replace("\\b_","\\b_| {2,}\\n").replace(/\{2,\}/g,"*").getRegex()};function gi(a){return a.replace(/---/g,"—").replace(/--/g,"–").replace(/(^|[-\u2014/(\[{"\s])'/g,"$1‘").replace(/'/g,"’").replace(/(^|[-\u2014/(\[{\u2018\s])"/g,"$1“").replace(/"/g,"”").replace(/\.{3}/g,"…")}function Hs(a){let e="";for(let s=0;s<a.length;s++){const t=Math.random()>.5?"x"+a.charCodeAt(s).toString(16):a.charCodeAt(s).toString();e+="&#"+t+";"}return e}class Me{constructor(e){K(this,"tokens");K(this,"options");K(this,"state");K(this,"tokenizer");K(this,"inlineQueue");this.tokens=[],this.tokens.links=Object.create(null),this.options=e||qe,this.options.tokenizer=this.options.tokenizer||new Dt,this.tokenizer=this.options.tokenizer,this.tokenizer.options=this.options,this.tokenizer.lexer=this,this.inlineQueue=[],this.state={inLink:!1,inRawBlock:!1,top:!0};const s={block:$.normal,inline:A.normal};this.options.pedantic?(s.block=$.pedantic,s.inline=A.pedantic):this.options.gfm&&(s.block=$.gfm,this.options.breaks?s.inline=A.breaks:s.inline=A.gfm),this.tokenizer.rules=s}static get rules(){return{block:$,inline:A}}static lex(e,s){return new Me(s).lex(e)}static lexInline(e,s){return new Me(s).inlineTokens(e)}lex(e){e=e.replace(/\r\n|\r/g,`
`),this.blockTokens(e,this.tokens);let s;for(;s=this.inlineQueue.shift();)this.inlineTokens(s.src,s.tokens);return this.tokens}blockTokens(e,s=[]){this.options.pedantic?e=e.replace(/\t/g,"    ").replace(/^ +$/gm,""):e=e.replace(/^( *)(\t+)/gm,(p,c,h)=>c+"    ".repeat(h.length));let t,i,l,r;for(;e;)if(!(this.options.extensions&&this.options.extensions.block&&this.options.extensions.block.some(p=>(t=p.call({lexer:this},e,s))?(e=e.substring(t.raw.length),s.push(t),!0):!1))){if(t=this.tokenizer.space(e)){e=e.substring(t.raw.length),t.raw.length===1&&s.length>0?s[s.length-1].raw+=`
`:s.push(t);continue}if(t=this.tokenizer.code(e)){e=e.substring(t.raw.length),i=s[s.length-1],i&&(i.type==="paragraph"||i.type==="text")?(i.raw+=`
`+t.raw,i.text+=`
`+t.text,this.inlineQueue[this.inlineQueue.length-1].src=i.text):s.push(t);continue}if(t=this.tokenizer.fences(e)){e=e.substring(t.raw.length),s.push(t);continue}if(t=this.tokenizer.heading(e)){e=e.substring(t.raw.length),s.push(t);continue}if(t=this.tokenizer.hr(e)){e=e.substring(t.raw.length),s.push(t);continue}if(t=this.tokenizer.blockquote(e)){e=e.substring(t.raw.length),s.push(t);continue}if(t=this.tokenizer.list(e)){e=e.substring(t.raw.length),s.push(t);continue}if(t=this.tokenizer.html(e)){e=e.substring(t.raw.length),s.push(t);continue}if(t=this.tokenizer.def(e)){e=e.substring(t.raw.length),i=s[s.length-1],i&&(i.type==="paragraph"||i.type==="text")?(i.raw+=`
`+t.raw,i.text+=`
`+t.raw,this.inlineQueue[this.inlineQueue.length-1].src=i.text):this.tokens.links[t.tag]||(this.tokens.links[t.tag]={href:t.href,title:t.title});continue}if(t=this.tokenizer.table(e)){e=e.substring(t.raw.length),s.push(t);continue}if(t=this.tokenizer.lheading(e)){e=e.substring(t.raw.length),s.push(t);continue}if(l=e,this.options.extensions&&this.options.extensions.startBlock){let p=1/0;const c=e.slice(1);let h;this.options.extensions.startBlock.forEach(g=>{h=g.call({lexer:this},c),typeof h=="number"&&h>=0&&(p=Math.min(p,h))}),p<1/0&&p>=0&&(l=e.substring(0,p+1))}if(this.state.top&&(t=this.tokenizer.paragraph(l))){i=s[s.length-1],r&&i.type==="paragraph"?(i.raw+=`
`+t.raw,i.text+=`
`+t.text,this.inlineQueue.pop(),this.inlineQueue[this.inlineQueue.length-1].src=i.text):s.push(t),r=l.length!==e.length,e=e.substring(t.raw.length);continue}if(t=this.tokenizer.text(e)){e=e.substring(t.raw.length),i=s[s.length-1],i&&i.type==="text"?(i.raw+=`
`+t.raw,i.text+=`
`+t.text,this.inlineQueue.pop(),this.inlineQueue[this.inlineQueue.length-1].src=i.text):s.push(t);continue}if(e){const p="Infinite loop on byte: "+e.charCodeAt(0);if(this.options.silent){console.error(p);break}else throw new Error(p)}}return this.state.top=!0,s}inline(e,s=[]){return this.inlineQueue.push({src:e,tokens:s}),s}inlineTokens(e,s=[]){let t,i,l,r=e,p,c,h;if(this.tokens.links){const g=Object.keys(this.tokens.links);if(g.length>0)for(;(p=this.tokenizer.rules.inline.reflinkSearch.exec(r))!=null;)g.includes(p[0].slice(p[0].lastIndexOf("[")+1,-1))&&(r=r.slice(0,p.index)+"["+"a".repeat(p[0].length-2)+"]"+r.slice(this.tokenizer.rules.inline.reflinkSearch.lastIndex))}for(;(p=this.tokenizer.rules.inline.blockSkip.exec(r))!=null;)r=r.slice(0,p.index)+"["+"a".repeat(p[0].length-2)+"]"+r.slice(this.tokenizer.rules.inline.blockSkip.lastIndex);for(;(p=this.tokenizer.rules.inline.anyPunctuation.exec(r))!=null;)r=r.slice(0,p.index)+"++"+r.slice(this.tokenizer.rules.inline.anyPunctuation.lastIndex);for(;e;)if(c||(h=""),c=!1,!(this.options.extensions&&this.options.extensions.inline&&this.options.extensions.inline.some(g=>(t=g.call({lexer:this},e,s))?(e=e.substring(t.raw.length),s.push(t),!0):!1))){if(t=this.tokenizer.escape(e)){e=e.substring(t.raw.length),s.push(t);continue}if(t=this.tokenizer.tag(e)){e=e.substring(t.raw.length),i=s[s.length-1],i&&t.type==="text"&&i.type==="text"?(i.raw+=t.raw,i.text+=t.text):s.push(t);continue}if(t=this.tokenizer.link(e)){e=e.substring(t.raw.length),s.push(t);continue}if(t=this.tokenizer.reflink(e,this.tokens.links)){e=e.substring(t.raw.length),i=s[s.length-1],i&&t.type==="text"&&i.type==="text"?(i.raw+=t.raw,i.text+=t.text):s.push(t);continue}if(t=this.tokenizer.emStrong(e,r,h)){e=e.substring(t.raw.length),s.push(t);continue}if(t=this.tokenizer.codespan(e)){e=e.substring(t.raw.length),s.push(t);continue}if(t=this.tokenizer.br(e)){e=e.substring(t.raw.length),s.push(t);continue}if(t=this.tokenizer.del(e)){e=e.substring(t.raw.length),s.push(t);continue}if(t=this.tokenizer.autolink(e,Hs)){e=e.substring(t.raw.length),s.push(t);continue}if(!this.state.inLink&&(t=this.tokenizer.url(e,Hs))){e=e.substring(t.raw.length),s.push(t);continue}if(l=e,this.options.extensions&&this.options.extensions.startInline){let g=1/0;const _=e.slice(1);let k;this.options.extensions.startInline.forEach(v=>{k=v.call({lexer:this},_),typeof k=="number"&&k>=0&&(g=Math.min(g,k))}),g<1/0&&g>=0&&(l=e.substring(0,g+1))}if(t=this.tokenizer.inlineText(l,gi)){e=e.substring(t.raw.length),t.raw.slice(-1)!=="_"&&(h=t.raw.slice(-1)),c=!0,i=s[s.length-1],i&&i.type==="text"?(i.raw+=t.raw,i.text+=t.text):s.push(t);continue}if(e){const g="Infinite loop on byte: "+e.charCodeAt(0);if(this.options.silent){console.error(g);break}else throw new Error(g)}}return s}}class Nt{constructor(e){K(this,"options");this.options=e||qe}code(e,s,t){var l;const i=(l=(s||"").match(/^\S*/))==null?void 0:l[0];if(this.options.highlight){const r=this.options.highlight(e,i);r!=null&&r!==e&&(t=!0,e=r)}return e=e.replace(/\n$/,"")+`
`,i?'<pre><code class="'+this.options.langPrefix+_e(i)+'">'+(t?e:_e(e,!0))+`</code></pre>
`:"<pre><code>"+(t?e:_e(e,!0))+`</code></pre>
`}blockquote(e){return`<blockquote>
${e}</blockquote>
`}html(e,s){return e}heading(e,s,t,i){if(this.options.headerIds){const l=this.options.headerPrefix+i.slug(t);return`<h${s} id="${l}">${e}</h${s}>
`}return`<h${s}>${e}</h${s}>
`}hr(){return this.options.xhtml?`<hr/>
`:`<hr>
`}list(e,s,t){const i=s?"ol":"ul",l=s&&t!==1?' start="'+t+'"':"";return"<"+i+l+`>
`+e+"</"+i+`>
`}listitem(e,s,t){return`<li>${e}</li>
`}checkbox(e){return"<input "+(e?'checked="" ':"")+'disabled="" type="checkbox"'+(this.options.xhtml?" /":"")+"> "}paragraph(e){return`<p>${e}</p>
`}table(e,s){return s&&(s=`<tbody>${s}</tbody>`),`<table>
<thead>
`+e+`</thead>
`+s+`</table>
`}tablerow(e){return`<tr>
${e}</tr>
`}tablecell(e,s){const t=s.header?"th":"td";return(s.align?`<${t} align="${s.align}">`:`<${t}>`)+e+`</${t}>
`}strong(e){return`<strong>${e}</strong>`}em(e){return`<em>${e}</em>`}codespan(e){return`<code>${e}</code>`}br(){return this.options.xhtml?"<br/>":"<br>"}del(e){return`<del>${e}</del>`}link(e,s,t){const i=Fs(this.options.sanitize,this.options.baseUrl,e);if(i===null)return t;e=i;let l='<a href="'+e+'"';return s&&(l+=' title="'+s+'"'),l+=">"+t+"</a>",l}image(e,s,t){const i=Fs(this.options.sanitize,this.options.baseUrl,e);if(i===null)return t;e=i;let l=`<img src="${e}" alt="${t}"`;return s&&(l+=` title="${s}"`),l+=this.options.xhtml?"/>":">",l}text(e){return e}}class ps{strong(e){return e}em(e){return e}codespan(e){return e}del(e){return e}html(e){return e}text(e){return e}link(e,s,t){return""+t}image(e,s,t){return""+t}br(){return""}}class ds{constructor(){K(this,"seen");this.seen={}}serialize(e){return e.toLowerCase().trim().replace(/<[!\/a-z].*?>/ig,"").replace(/[\u2000-\u206F\u2E00-\u2E7F\\'!"#$%&()*+,./:;<=>?@[\]^`{|}~]/g,"").replace(/\s/g,"-")}getNextSafeSlug(e,s){let t=e,i=0;if(this.seen.hasOwnProperty(t)){i=this.seen[e];do i++,t=e+"-"+i;while(this.seen.hasOwnProperty(t))}return s||(this.seen[e]=i,this.seen[t]=0),t}slug(e,s={}){const t=this.serialize(e);return this.getNextSafeSlug(t,s.dryrun)}}class Pe{constructor(e){K(this,"options");K(this,"renderer");K(this,"textRenderer");K(this,"slugger");this.options=e||qe,this.options.renderer=this.options.renderer||new Nt,this.renderer=this.options.renderer,this.renderer.options=this.options,this.textRenderer=new ps,this.slugger=new ds}static parse(e,s){return new Pe(s).parse(e)}static parseInline(e,s){return new Pe(s).parseInline(e)}parse(e,s=!0){let t="";for(let i=0;i<e.length;i++){const l=e[i];if(this.options.extensions&&this.options.extensions.renderers&&this.options.extensions.renderers[l.type]){const r=l,p=this.options.extensions.renderers[r.type].call({parser:this},r);if(p!==!1||!["space","hr","heading","code","table","blockquote","list","html","paragraph","text"].includes(r.type)){t+=p||"";continue}}switch(l.type){case"space":continue;case"hr":{t+=this.renderer.hr();continue}case"heading":{const r=l;t+=this.renderer.heading(this.parseInline(r.tokens),r.depth,Tn(this.parseInline(r.tokens,this.textRenderer)),this.slugger);continue}case"code":{const r=l;t+=this.renderer.code(r.text,r.lang,!!r.escaped);continue}case"table":{const r=l;let p="",c="";for(let g=0;g<r.header.length;g++)c+=this.renderer.tablecell(this.parseInline(r.header[g].tokens),{header:!0,align:r.align[g]});p+=this.renderer.tablerow(c);let h="";for(let g=0;g<r.rows.length;g++){const _=r.rows[g];c="";for(let k=0;k<_.length;k++)c+=this.renderer.tablecell(this.parseInline(_[k].tokens),{header:!1,align:r.align[k]});h+=this.renderer.tablerow(c)}t+=this.renderer.table(p,h);continue}case"blockquote":{const r=l,p=this.parse(r.tokens);t+=this.renderer.blockquote(p);continue}case"list":{const r=l,p=r.ordered,c=r.start,h=r.loose;let g="";for(let _=0;_<r.items.length;_++){const k=r.items[_],v=k.checked,w=k.task;let C="";if(k.task){const n=this.renderer.checkbox(!!v);h?k.tokens.length>0&&k.tokens[0].type==="paragraph"?(k.tokens[0].text=n+" "+k.tokens[0].text,k.tokens[0].tokens&&k.tokens[0].tokens.length>0&&k.tokens[0].tokens[0].type==="text"&&(k.tokens[0].tokens[0].text=n+" "+k.tokens[0].tokens[0].text)):k.tokens.unshift({type:"text",text:n}):C+=n}C+=this.parse(k.tokens,h),g+=this.renderer.listitem(C,w,!!v)}t+=this.renderer.list(g,p,c);continue}case"html":{const r=l;t+=this.renderer.html(r.text,r.block);continue}case"paragraph":{const r=l;t+=this.renderer.paragraph(this.parseInline(r.tokens));continue}case"text":{let r=l,p=r.tokens?this.parseInline(r.tokens):r.text;for(;i+1<e.length&&e[i+1].type==="text";)r=e[++i],p+=`
`+(r.tokens?this.parseInline(r.tokens):r.text);t+=s?this.renderer.paragraph(p):p;continue}default:{const r='Token with "'+l.type+'" type was not found.';if(this.options.silent)return console.error(r),"";throw new Error(r)}}}return t}parseInline(e,s){s=s||this.renderer;let t="";for(let i=0;i<e.length;i++){const l=e[i];if(this.options.extensions&&this.options.extensions.renderers&&this.options.extensions.renderers[l.type]){const r=this.options.extensions.renderers[l.type].call({parser:this},l);if(r!==!1||!["escape","html","link","image","strong","em","codespan","br","del","text"].includes(l.type)){t+=r||"";continue}}switch(l.type){case"escape":{const r=l;t+=s.text(r.text);break}case"html":{const r=l;t+=s.html(r.text);break}case"link":{const r=l;t+=s.link(r.href,r.title,this.parseInline(r.tokens,s));break}case"image":{const r=l;t+=s.image(r.href,r.title,r.text);break}case"strong":{const r=l;t+=s.strong(this.parseInline(r.tokens,s));break}case"em":{const r=l;t+=s.em(this.parseInline(r.tokens,s));break}case"codespan":{const r=l;t+=s.codespan(r.text);break}case"br":{t+=s.br();break}case"del":{const r=l;t+=s.del(this.parseInline(r.tokens,s));break}case"text":{const r=l;t+=s.text(r.text);break}default:{const r='Token with "'+l.type+'" type was not found.';if(this.options.silent)return console.error(r),"";throw new Error(r)}}}return t}}class ft{constructor(e){K(this,"options");this.options=e||qe}preprocess(e){return e}postprocess(e){return e}}K(ft,"passThroughHooks",new Set(["preprocess","postprocess"]));var Ze,ls,On;class _i{constructor(...e){Ds(this,Ze);K(this,"defaults",us());K(this,"options",this.setOptions);K(this,"parse",vt(this,Ze,ls).call(this,Me.lex,Pe.parse));K(this,"parseInline",vt(this,Ze,ls).call(this,Me.lexInline,Pe.parseInline));K(this,"Parser",Pe);K(this,"parser",Pe.parse);K(this,"Renderer",Nt);K(this,"TextRenderer",ps);K(this,"Lexer",Me);K(this,"lexer",Me.lex);K(this,"Tokenizer",Dt);K(this,"Slugger",ds);K(this,"Hooks",ft);this.use(...e)}walkTokens(e,s){var i,l;let t=[];for(const r of e)switch(t=t.concat(s.call(this,r)),r.type){case"table":{const p=r;for(const c of p.header)t=t.concat(this.walkTokens(c.tokens,s));for(const c of p.rows)for(const h of c)t=t.concat(this.walkTokens(h.tokens,s));break}case"list":{const p=r;t=t.concat(this.walkTokens(p.items,s));break}default:{const p=r;(l=(i=this.defaults.extensions)==null?void 0:i.childTokens)!=null&&l[p.type]?this.defaults.extensions.childTokens[p.type].forEach(c=>{t=t.concat(this.walkTokens(p[c],s))}):p.tokens&&(t=t.concat(this.walkTokens(p.tokens,s)))}}return t}use(...e){const s=this.defaults.extensions||{renderers:{},childTokens:{}};return e.forEach(t=>{const i={...t};if(i.async=this.defaults.async||i.async||!1,t.extensions&&(t.extensions.forEach(l=>{if(!l.name)throw new Error("extension name required");if("renderer"in l){const r=s.renderers[l.name];r?s.renderers[l.name]=function(...p){let c=l.renderer.apply(this,p);return c===!1&&(c=r.apply(this,p)),c}:s.renderers[l.name]=l.renderer}if("tokenizer"in l){if(!l.level||l.level!=="block"&&l.level!=="inline")throw new Error("extension level must be 'block' or 'inline'");const r=s[l.level];r?r.unshift(l.tokenizer):s[l.level]=[l.tokenizer],l.start&&(l.level==="block"?s.startBlock?s.startBlock.push(l.start):s.startBlock=[l.start]:l.level==="inline"&&(s.startInline?s.startInline.push(l.start):s.startInline=[l.start]))}"childTokens"in l&&l.childTokens&&(s.childTokens[l.name]=l.childTokens)}),i.extensions=s),t.renderer){const l=this.defaults.renderer||new Nt(this.defaults);for(const r in t.renderer){const p=t.renderer[r],c=r,h=l[c];l[c]=(...g)=>{let _=p.apply(l,g);return _===!1&&(_=h.apply(l,g)),_||""}}i.renderer=l}if(t.tokenizer){const l=this.defaults.tokenizer||new Dt(this.defaults);for(const r in t.tokenizer){const p=t.tokenizer[r],c=r,h=l[c];l[c]=(...g)=>{let _=p.apply(l,g);return _===!1&&(_=h.apply(l,g)),_}}i.tokenizer=l}if(t.hooks){const l=this.defaults.hooks||new ft;for(const r in t.hooks){const p=t.hooks[r],c=r,h=l[c];ft.passThroughHooks.has(r)?l[c]=g=>{if(this.defaults.async)return Promise.resolve(p.call(l,g)).then(k=>h.call(l,k));const _=p.call(l,g);return h.call(l,_)}:l[c]=(...g)=>{let _=p.apply(l,g);return _===!1&&(_=h.apply(l,g)),_}}i.hooks=l}if(t.walkTokens){const l=this.defaults.walkTokens,r=t.walkTokens;i.walkTokens=function(p){let c=[];return c.push(r.call(this,p)),l&&(c=c.concat(l.call(this,p))),c}}this.defaults={...this.defaults,...i}}),this}setOptions(e){return this.defaults={...this.defaults,...e},this}}Ze=new WeakSet,ls=function(e,s){return(t,i,l)=>{typeof i=="function"&&(l=i,i=null);const r={...i},p={...this.defaults,...r};this.defaults.async===!0&&r.async===!1&&(p.silent||console.warn("marked(): The async option was set to true by an extension. The async: false option sent to parse will be ignored."),p.async=!0);const c=vt(this,Ze,On).call(this,!!p.silent,!!p.async,l);if(typeof t>"u"||t===null)return c(new Error("marked(): input parameter is undefined or null"));if(typeof t!="string")return c(new Error("marked(): input parameter is of type "+Object.prototype.toString.call(t)+", string expected"));if(fi(p,l),p.hooks&&(p.hooks.options=p),l){const h=l,g=p.highlight;let _;try{p.hooks&&(t=p.hooks.preprocess(t)),_=e(t,p)}catch(w){return c(w)}const k=w=>{let C;if(!w)try{p.walkTokens&&this.walkTokens(_,p.walkTokens),C=s(_,p),p.hooks&&(C=p.hooks.postprocess(C))}catch(n){w=n}return p.highlight=g,w?c(w):h(null,C)};if(!g||g.length<3||(delete p.highlight,!_.length))return k();let v=0;this.walkTokens(_,w=>{w.type==="code"&&(v++,setTimeout(()=>{g(w.text,w.lang,(C,n)=>{if(C)return k(C);n!=null&&n!==w.text&&(w.text=n,w.escaped=!0),v--,v===0&&k()})},0))}),v===0&&k();return}if(p.async)return Promise.resolve(p.hooks?p.hooks.preprocess(t):t).then(h=>e(h,p)).then(h=>p.walkTokens?Promise.all(this.walkTokens(h,p.walkTokens)).then(()=>h):h).then(h=>s(h,p)).then(h=>p.hooks?p.hooks.postprocess(h):h).catch(c);try{p.hooks&&(t=p.hooks.preprocess(t));const h=e(t,p);p.walkTokens&&this.walkTokens(h,p.walkTokens);let g=s(h,p);return p.hooks&&(g=p.hooks.postprocess(g)),g}catch(h){return c(h)}}},On=function(e,s,t){return i=>{if(i.message+=`
Please report this to https://github.com/markedjs/marked.`,e){const l="<p>An error occurred:</p><pre>"+_e(i.message+"",!0)+"</pre>";if(s)return Promise.resolve(l);if(t){t(null,l);return}return l}if(s)return Promise.reject(i);if(t){t(i);return}throw i}};const Xe=new _i;function ee(a,e,s){return Xe.parse(a,e,s)}ee.options=ee.setOptions=function(a){return Xe.setOptions(a),ee.defaults=Xe.defaults,yn(ee.defaults),ee};ee.getDefaults=us;ee.defaults=qe;ee.use=function(...a){return Xe.use(...a),ee.defaults=Xe.defaults,yn(ee.defaults),ee};ee.walkTokens=function(a,e){return Xe.walkTokens(a,e)};ee.parseInline=Xe.parseInline;ee.Parser=Pe;ee.parser=Pe.parse;ee.Renderer=Nt;ee.TextRenderer=ps;ee.Lexer=Me;ee.lexer=Me.lex;ee.Tokenizer=Dt;ee.Slugger=ds;ee.Hooks=ft;ee.parse=ee;ee.options;ee.setOptions;ee.use;ee.walkTokens;ee.parseInline;Pe.parse;Me.lex;/*! @license DOMPurify 3.2.3 | (c) Cure53 and other contributors | Released under the Apache license 2.0 and Mozilla Public License 2.0 | github.com/cure53/DOMPurify/blob/3.2.3/LICENSE */const{entries:xn,setPrototypeOf:Vs,isFrozen:bi,getPrototypeOf:ki,getOwnPropertyDescriptor:wi}=Object;let{freeze:ye,seal:Ae,create:Sn}=Object,{apply:os,construct:rs}=typeof Reflect<"u"&&Reflect;ye||(ye=function(e){return e});Ae||(Ae=function(e){return e});os||(os=function(e,s,t){return e.apply(s,t)});rs||(rs=function(e,s){return new e(...s)});const Ot=Oe(Array.prototype.forEach),Us=Oe(Array.prototype.pop),ot=Oe(Array.prototype.push),Ct=Oe(String.prototype.toLowerCase),Yt=Oe(String.prototype.toString),Bs=Oe(String.prototype.match),rt=Oe(String.prototype.replace),yi=Oe(String.prototype.indexOf),vi=Oe(String.prototype.trim),Ce=Oe(Object.prototype.hasOwnProperty),we=Oe(RegExp.prototype.test),ct=Ei(TypeError);function Oe(a){return function(e){for(var s=arguments.length,t=new Array(s>1?s-1:0),i=1;i<s;i++)t[i-1]=arguments[i];return os(a,e,t)}}function Ei(a){return function(){for(var e=arguments.length,s=new Array(e),t=0;t<e;t++)s[t]=arguments[t];return rs(a,s)}}function W(a,e){let s=arguments.length>2&&arguments[2]!==void 0?arguments[2]:Ct;Vs&&Vs(a,null);let t=e.length;for(;t--;){let i=e[t];if(typeof i=="string"){const l=s(i);l!==i&&(bi(e)||(e[t]=l),i=l)}a[i]=!0}return a}function Ti(a){for(let e=0;e<a.length;e++)Ce(a,e)||(a[e]=null);return a}function Ue(a){const e=Sn(null);for(const[s,t]of xn(a))Ce(a,s)&&(Array.isArray(t)?e[s]=Ti(t):t&&typeof t=="object"&&t.constructor===Object?e[s]=Ue(t):e[s]=t);return e}function ht(a,e){for(;a!==null;){const t=wi(a,e);if(t){if(t.get)return Oe(t.get);if(typeof t.value=="function")return Oe(t.value)}a=ki(a)}function s(){return null}return s}const Gs=ye(["a","abbr","acronym","address","area","article","aside","audio","b","bdi","bdo","big","blink","blockquote","body","br","button","canvas","caption","center","cite","code","col","colgroup","content","data","datalist","dd","decorator","del","details","dfn","dialog","dir","div","dl","dt","element","em","fieldset","figcaption","figure","font","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","img","input","ins","kbd","label","legend","li","main","map","mark","marquee","menu","menuitem","meter","nav","nobr","ol","optgroup","option","output","p","picture","pre","progress","q","rp","rt","ruby","s","samp","section","select","shadow","small","source","spacer","span","strike","strong","style","sub","summary","sup","table","tbody","td","template","textarea","tfoot","th","thead","time","tr","track","tt","u","ul","var","video","wbr"]),Jt=ye(["svg","a","altglyph","altglyphdef","altglyphitem","animatecolor","animatemotion","animatetransform","circle","clippath","defs","desc","ellipse","filter","font","g","glyph","glyphref","hkern","image","line","lineargradient","marker","mask","metadata","mpath","path","pattern","polygon","polyline","radialgradient","rect","stop","style","switch","symbol","text","textpath","title","tref","tspan","view","vkern"]),Qt=ye(["feBlend","feColorMatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDistantLight","feDropShadow","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feImage","feMerge","feMergeNode","feMorphology","feOffset","fePointLight","feSpecularLighting","feSpotLight","feTile","feTurbulence"]),Oi=ye(["animate","color-profile","cursor","discard","font-face","font-face-format","font-face-name","font-face-src","font-face-uri","foreignobject","hatch","hatchpath","mesh","meshgradient","meshpatch","meshrow","missing-glyph","script","set","solidcolor","unknown","use"]),Kt=ye(["math","menclose","merror","mfenced","mfrac","mglyph","mi","mlabeledtr","mmultiscripts","mn","mo","mover","mpadded","mphantom","mroot","mrow","ms","mspace","msqrt","mstyle","msub","msup","msubsup","mtable","mtd","mtext","mtr","munder","munderover","mprescripts"]),xi=ye(["maction","maligngroup","malignmark","mlongdiv","mscarries","mscarry","msgroup","mstack","msline","msrow","semantics","annotation","annotation-xml","mprescripts","none"]),js=ye(["#text"]),Xs=ye(["accept","action","align","alt","autocapitalize","autocomplete","autopictureinpicture","autoplay","background","bgcolor","border","capture","cellpadding","cellspacing","checked","cite","class","clear","color","cols","colspan","controls","controlslist","coords","crossorigin","datetime","decoding","default","dir","disabled","disablepictureinpicture","disableremoteplayback","download","draggable","enctype","enterkeyhint","face","for","headers","height","hidden","high","href","hreflang","id","inputmode","integrity","ismap","kind","label","lang","list","loading","loop","low","max","maxlength","media","method","min","minlength","multiple","muted","name","nonce","noshade","novalidate","nowrap","open","optimum","pattern","placeholder","playsinline","popover","popovertarget","popovertargetaction","poster","preload","pubdate","radiogroup","readonly","rel","required","rev","reversed","role","rows","rowspan","spellcheck","scope","selected","shape","size","sizes","span","srclang","start","src","srcset","step","style","summary","tabindex","title","translate","type","usemap","valign","value","width","wrap","xmlns","slot"]),es=ye(["accent-height","accumulate","additive","alignment-baseline","amplitude","ascent","attributename","attributetype","azimuth","basefrequency","baseline-shift","begin","bias","by","class","clip","clippathunits","clip-path","clip-rule","color","color-interpolation","color-interpolation-filters","color-profile","color-rendering","cx","cy","d","dx","dy","diffuseconstant","direction","display","divisor","dur","edgemode","elevation","end","exponent","fill","fill-opacity","fill-rule","filter","filterunits","flood-color","flood-opacity","font-family","font-size","font-size-adjust","font-stretch","font-style","font-variant","font-weight","fx","fy","g1","g2","glyph-name","glyphref","gradientunits","gradienttransform","height","href","id","image-rendering","in","in2","intercept","k","k1","k2","k3","k4","kerning","keypoints","keysplines","keytimes","lang","lengthadjust","letter-spacing","kernelmatrix","kernelunitlength","lighting-color","local","marker-end","marker-mid","marker-start","markerheight","markerunits","markerwidth","maskcontentunits","maskunits","max","mask","media","method","mode","min","name","numoctaves","offset","operator","opacity","order","orient","orientation","origin","overflow","paint-order","path","pathlength","patterncontentunits","patterntransform","patternunits","points","preservealpha","preserveaspectratio","primitiveunits","r","rx","ry","radius","refx","refy","repeatcount","repeatdur","restart","result","rotate","scale","seed","shape-rendering","slope","specularconstant","specularexponent","spreadmethod","startoffset","stddeviation","stitchtiles","stop-color","stop-opacity","stroke-dasharray","stroke-dashoffset","stroke-linecap","stroke-linejoin","stroke-miterlimit","stroke-opacity","stroke","stroke-width","style","surfacescale","systemlanguage","tabindex","tablevalues","targetx","targety","transform","transform-origin","text-anchor","text-decoration","text-rendering","textlength","type","u1","u2","unicode","values","viewbox","visibility","version","vert-adv-y","vert-origin-x","vert-origin-y","width","word-spacing","wrap","writing-mode","xchannelselector","ychannelselector","x","x1","x2","xmlns","y","y1","y2","z","zoomandpan"]),Zs=ye(["accent","accentunder","align","bevelled","close","columnsalign","columnlines","columnspan","denomalign","depth","dir","display","displaystyle","encoding","fence","frame","height","href","id","largeop","length","linethickness","lspace","lquote","mathbackground","mathcolor","mathsize","mathvariant","maxsize","minsize","movablelimits","notation","numalign","open","rowalign","rowlines","rowspacing","rowspan","rspace","rquote","scriptlevel","scriptminsize","scriptsizemultiplier","selection","separator","separators","stretchy","subscriptshift","supscriptshift","symmetric","voffset","width","xmlns"]),xt=ye(["xlink:href","xml:id","xlink:title","xml:space","xmlns:xlink"]),Si=Ae(/\{\{[\w\W]*|[\w\W]*\}\}/gm),Ai=Ae(/<%[\w\W]*|[\w\W]*%>/gm),Li=Ae(/\$\{[\w\W]*}/gm),Ci=Ae(/^data-[\-\w.\u00B7-\uFFFF]+$/),Ii=Ae(/^aria-[\-\w]+$/),An=Ae(/^(?:(?:(?:f|ht)tps?|mailto|tel|callto|sms|cid|xmpp):|[^a-z]|[a-z+.\-]+(?:[^a-z+.\-:]|$))/i),Ri=Ae(/^(?:\w+script|data):/i),Di=Ae(/[\u0000-\u0020\u00A0\u1680\u180E\u2000-\u2029\u205F\u3000]/g),Ln=Ae(/^html$/i),Ni=Ae(/^[a-z][.\w]*(-[.\w]+)+$/i);var qs=Object.freeze({__proto__:null,ARIA_ATTR:Ii,ATTR_WHITESPACE:Di,CUSTOM_ELEMENT:Ni,DATA_ATTR:Ci,DOCTYPE_NAME:Ln,ERB_EXPR:Ai,IS_ALLOWED_URI:An,IS_SCRIPT_OR_DATA:Ri,MUSTACHE_EXPR:Si,TMPLIT_EXPR:Li});const ut={element:1,attribute:2,text:3,cdataSection:4,entityReference:5,entityNode:6,progressingInstruction:7,comment:8,document:9,documentType:10,documentFragment:11,notation:12},Mi=function(){return typeof window>"u"?null:window},Pi=function(e,s){if(typeof e!="object"||typeof e.createPolicy!="function")return null;let t=null;const i="data-tt-policy-suffix";s&&s.hasAttribute(i)&&(t=s.getAttribute(i));const l="dompurify"+(t?"#"+t:"");try{return e.createPolicy(l,{createHTML(r){return r},createScriptURL(r){return r}})}catch{return console.warn("TrustedTypes policy "+l+" could not be created."),null}},Ws=function(){return{afterSanitizeAttributes:[],afterSanitizeElements:[],afterSanitizeShadowDOM:[],beforeSanitizeAttributes:[],beforeSanitizeElements:[],beforeSanitizeShadowDOM:[],uponSanitizeAttribute:[],uponSanitizeElement:[],uponSanitizeShadowNode:[]}};function Cn(){let a=arguments.length>0&&arguments[0]!==void 0?arguments[0]:Mi();const e=V=>Cn(V);if(e.version="3.2.3",e.removed=[],!a||!a.document||a.document.nodeType!==ut.document)return e.isSupported=!1,e;let{document:s}=a;const t=s,i=t.currentScript,{DocumentFragment:l,HTMLTemplateElement:r,Node:p,Element:c,NodeFilter:h,NamedNodeMap:g=a.NamedNodeMap||a.MozNamedAttrMap,HTMLFormElement:_,DOMParser:k,trustedTypes:v}=a,w=c.prototype,C=ht(w,"cloneNode"),n=ht(w,"remove"),o=ht(w,"nextSibling"),d=ht(w,"childNodes"),u=ht(w,"parentNode");if(typeof r=="function"){const V=s.createElement("template");V.content&&V.content.ownerDocument&&(s=V.content.ownerDocument)}let m,y="";const{implementation:b,createNodeIterator:E,createDocumentFragment:x,getElementsByTagName:N}=s,{importNode:M}=t;let G=Ws();e.isSupported=typeof xn=="function"&&typeof u=="function"&&b&&b.createHTMLDocument!==void 0;const{MUSTACHE_EXPR:Y,ERB_EXPR:j,TMPLIT_EXPR:X,DATA_ATTR:ae,ARIA_ATTR:se,IS_SCRIPT_OR_DATA:pe,ATTR_WHITESPACE:ne,CUSTOM_ELEMENT:I}=qs;let{IS_ALLOWED_URI:D}=qs,U=null;const T=W({},[...Gs,...Jt,...Qt,...Kt,...js]);let R=null;const q=W({},[...Xs,...es,...Zs,...xt]);let ie=Object.seal(Sn(null,{tagNameCheck:{writable:!0,configurable:!1,enumerable:!0,value:null},attributeNameCheck:{writable:!0,configurable:!1,enumerable:!0,value:null},allowCustomizedBuiltInElements:{writable:!0,configurable:!1,enumerable:!0,value:!1}})),B=null,J=null,Q=!0,Le=!0,nt=!1,fe=!0,Fe=!1,We=!0,be=!1,Ve=!1,Bt=!1,Ye=!1,mt=!1,gt=!1,fs=!0,ms=!1;const zn="user-content-";let Gt=!0,it=!1,Je={},Qe=null;const gs=W({},["annotation-xml","audio","colgroup","desc","foreignobject","head","iframe","math","mi","mn","mo","ms","mtext","noembed","noframes","noscript","plaintext","script","style","svg","template","thead","title","video","xmp"]);let _s=null;const bs=W({},["audio","video","img","source","image","track"]);let jt=null;const ks=W({},["alt","class","for","id","label","name","pattern","placeholder","role","summary","title","value","style","xmlns"]),_t="http://www.w3.org/1998/Math/MathML",bt="http://www.w3.org/2000/svg",$e="http://www.w3.org/1999/xhtml";let Ke=$e,Xt=!1,Zt=null;const Hn=W({},[_t,bt,$e],Yt);let kt=W({},["mi","mo","mn","ms","mtext"]),wt=W({},["annotation-xml"]);const Vn=W({},["title","style","font","a","script"]);let at=null;const Un=["application/xhtml+xml","text/html"],Bn="text/html";let de=null,et=null;const Gn=s.createElement("form"),ws=function(f){return f instanceof RegExp||f instanceof Function},qt=function(){let f=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};if(!(et&&et===f)){if((!f||typeof f!="object")&&(f={}),f=Ue(f),at=Un.indexOf(f.PARSER_MEDIA_TYPE)===-1?Bn:f.PARSER_MEDIA_TYPE,de=at==="application/xhtml+xml"?Yt:Ct,U=Ce(f,"ALLOWED_TAGS")?W({},f.ALLOWED_TAGS,de):T,R=Ce(f,"ALLOWED_ATTR")?W({},f.ALLOWED_ATTR,de):q,Zt=Ce(f,"ALLOWED_NAMESPACES")?W({},f.ALLOWED_NAMESPACES,Yt):Hn,jt=Ce(f,"ADD_URI_SAFE_ATTR")?W(Ue(ks),f.ADD_URI_SAFE_ATTR,de):ks,_s=Ce(f,"ADD_DATA_URI_TAGS")?W(Ue(bs),f.ADD_DATA_URI_TAGS,de):bs,Qe=Ce(f,"FORBID_CONTENTS")?W({},f.FORBID_CONTENTS,de):gs,B=Ce(f,"FORBID_TAGS")?W({},f.FORBID_TAGS,de):{},J=Ce(f,"FORBID_ATTR")?W({},f.FORBID_ATTR,de):{},Je=Ce(f,"USE_PROFILES")?f.USE_PROFILES:!1,Q=f.ALLOW_ARIA_ATTR!==!1,Le=f.ALLOW_DATA_ATTR!==!1,nt=f.ALLOW_UNKNOWN_PROTOCOLS||!1,fe=f.ALLOW_SELF_CLOSE_IN_ATTR!==!1,Fe=f.SAFE_FOR_TEMPLATES||!1,We=f.SAFE_FOR_XML!==!1,be=f.WHOLE_DOCUMENT||!1,Ye=f.RETURN_DOM||!1,mt=f.RETURN_DOM_FRAGMENT||!1,gt=f.RETURN_TRUSTED_TYPE||!1,Bt=f.FORCE_BODY||!1,fs=f.SANITIZE_DOM!==!1,ms=f.SANITIZE_NAMED_PROPS||!1,Gt=f.KEEP_CONTENT!==!1,it=f.IN_PLACE||!1,D=f.ALLOWED_URI_REGEXP||An,Ke=f.NAMESPACE||$e,kt=f.MATHML_TEXT_INTEGRATION_POINTS||kt,wt=f.HTML_INTEGRATION_POINTS||wt,ie=f.CUSTOM_ELEMENT_HANDLING||{},f.CUSTOM_ELEMENT_HANDLING&&ws(f.CUSTOM_ELEMENT_HANDLING.tagNameCheck)&&(ie.tagNameCheck=f.CUSTOM_ELEMENT_HANDLING.tagNameCheck),f.CUSTOM_ELEMENT_HANDLING&&ws(f.CUSTOM_ELEMENT_HANDLING.attributeNameCheck)&&(ie.attributeNameCheck=f.CUSTOM_ELEMENT_HANDLING.attributeNameCheck),f.CUSTOM_ELEMENT_HANDLING&&typeof f.CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements=="boolean"&&(ie.allowCustomizedBuiltInElements=f.CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements),Fe&&(Le=!1),mt&&(Ye=!0),Je&&(U=W({},js),R=[],Je.html===!0&&(W(U,Gs),W(R,Xs)),Je.svg===!0&&(W(U,Jt),W(R,es),W(R,xt)),Je.svgFilters===!0&&(W(U,Qt),W(R,es),W(R,xt)),Je.mathMl===!0&&(W(U,Kt),W(R,Zs),W(R,xt))),f.ADD_TAGS&&(U===T&&(U=Ue(U)),W(U,f.ADD_TAGS,de)),f.ADD_ATTR&&(R===q&&(R=Ue(R)),W(R,f.ADD_ATTR,de)),f.ADD_URI_SAFE_ATTR&&W(jt,f.ADD_URI_SAFE_ATTR,de),f.FORBID_CONTENTS&&(Qe===gs&&(Qe=Ue(Qe)),W(Qe,f.FORBID_CONTENTS,de)),Gt&&(U["#text"]=!0),be&&W(U,["html","head","body"]),U.table&&(W(U,["tbody"]),delete B.tbody),f.TRUSTED_TYPES_POLICY){if(typeof f.TRUSTED_TYPES_POLICY.createHTML!="function")throw ct('TRUSTED_TYPES_POLICY configuration option must provide a "createHTML" hook.');if(typeof f.TRUSTED_TYPES_POLICY.createScriptURL!="function")throw ct('TRUSTED_TYPES_POLICY configuration option must provide a "createScriptURL" hook.');m=f.TRUSTED_TYPES_POLICY,y=m.createHTML("")}else m===void 0&&(m=Pi(v,i)),m!==null&&typeof y=="string"&&(y=m.createHTML(""));ye&&ye(f),et=f}},ys=W({},[...Jt,...Qt,...Oi]),vs=W({},[...Kt,...xi]),jn=function(f){let O=u(f);(!O||!O.tagName)&&(O={namespaceURI:Ke,tagName:"template"});const P=Ct(f.tagName),he=Ct(O.tagName);return Zt[f.namespaceURI]?f.namespaceURI===bt?O.namespaceURI===$e?P==="svg":O.namespaceURI===_t?P==="svg"&&(he==="annotation-xml"||kt[he]):!!ys[P]:f.namespaceURI===_t?O.namespaceURI===$e?P==="math":O.namespaceURI===bt?P==="math"&&wt[he]:!!vs[P]:f.namespaceURI===$e?O.namespaceURI===bt&&!wt[he]||O.namespaceURI===_t&&!kt[he]?!1:!vs[P]&&(Vn[P]||!ys[P]):!!(at==="application/xhtml+xml"&&Zt[f.namespaceURI]):!1},Re=function(f){ot(e.removed,{element:f});try{u(f).removeChild(f)}catch{n(f)}},yt=function(f,O){try{ot(e.removed,{attribute:O.getAttributeNode(f),from:O})}catch{ot(e.removed,{attribute:null,from:O})}if(O.removeAttribute(f),f==="is")if(Ye||mt)try{Re(O)}catch{}else try{O.setAttribute(f,"")}catch{}},Es=function(f){let O=null,P=null;if(Bt)f="<remove></remove>"+f;else{const me=Bs(f,/^[\r\n\t ]+/);P=me&&me[0]}at==="application/xhtml+xml"&&Ke===$e&&(f='<html xmlns="http://www.w3.org/1999/xhtml"><head></head><body>'+f+"</body></html>");const he=m?m.createHTML(f):f;if(Ke===$e)try{O=new k().parseFromString(he,at)}catch{}if(!O||!O.documentElement){O=b.createDocument(Ke,"template",null);try{O.documentElement.innerHTML=Xt?y:he}catch{}}const ge=O.body||O.documentElement;return f&&P&&ge.insertBefore(s.createTextNode(P),ge.childNodes[0]||null),Ke===$e?N.call(O,be?"html":"body")[0]:be?O.documentElement:ge},Ts=function(f){return E.call(f.ownerDocument||f,f,h.SHOW_ELEMENT|h.SHOW_COMMENT|h.SHOW_TEXT|h.SHOW_PROCESSING_INSTRUCTION|h.SHOW_CDATA_SECTION,null)},Wt=function(f){return f instanceof _&&(typeof f.nodeName!="string"||typeof f.textContent!="string"||typeof f.removeChild!="function"||!(f.attributes instanceof g)||typeof f.removeAttribute!="function"||typeof f.setAttribute!="function"||typeof f.namespaceURI!="string"||typeof f.insertBefore!="function"||typeof f.hasChildNodes!="function")},Os=function(f){return typeof p=="function"&&f instanceof p};function ze(V,f,O){Ot(V,P=>{P.call(e,f,O,et)})}const xs=function(f){let O=null;if(ze(G.beforeSanitizeElements,f,null),Wt(f))return Re(f),!0;const P=de(f.nodeName);if(ze(G.uponSanitizeElement,f,{tagName:P,allowedTags:U}),f.hasChildNodes()&&!Os(f.firstElementChild)&&we(/<[/\w]/g,f.innerHTML)&&we(/<[/\w]/g,f.textContent)||f.nodeType===ut.progressingInstruction||We&&f.nodeType===ut.comment&&we(/<[/\w]/g,f.data))return Re(f),!0;if(!U[P]||B[P]){if(!B[P]&&As(P)&&(ie.tagNameCheck instanceof RegExp&&we(ie.tagNameCheck,P)||ie.tagNameCheck instanceof Function&&ie.tagNameCheck(P)))return!1;if(Gt&&!Qe[P]){const he=u(f)||f.parentNode,ge=d(f)||f.childNodes;if(ge&&he){const me=ge.length;for(let ve=me-1;ve>=0;--ve){const De=C(ge[ve],!0);De.__removalCount=(f.__removalCount||0)+1,he.insertBefore(De,o(f))}}}return Re(f),!0}return f instanceof c&&!jn(f)||(P==="noscript"||P==="noembed"||P==="noframes")&&we(/<\/no(script|embed|frames)/i,f.innerHTML)?(Re(f),!0):(Fe&&f.nodeType===ut.text&&(O=f.textContent,Ot([Y,j,X],he=>{O=rt(O,he," ")}),f.textContent!==O&&(ot(e.removed,{element:f.cloneNode()}),f.textContent=O)),ze(G.afterSanitizeElements,f,null),!1)},Ss=function(f,O,P){if(fs&&(O==="id"||O==="name")&&(P in s||P in Gn))return!1;if(!(Le&&!J[O]&&we(ae,O))){if(!(Q&&we(se,O))){if(!R[O]||J[O]){if(!(As(f)&&(ie.tagNameCheck instanceof RegExp&&we(ie.tagNameCheck,f)||ie.tagNameCheck instanceof Function&&ie.tagNameCheck(f))&&(ie.attributeNameCheck instanceof RegExp&&we(ie.attributeNameCheck,O)||ie.attributeNameCheck instanceof Function&&ie.attributeNameCheck(O))||O==="is"&&ie.allowCustomizedBuiltInElements&&(ie.tagNameCheck instanceof RegExp&&we(ie.tagNameCheck,P)||ie.tagNameCheck instanceof Function&&ie.tagNameCheck(P))))return!1}else if(!jt[O]){if(!we(D,rt(P,ne,""))){if(!((O==="src"||O==="xlink:href"||O==="href")&&f!=="script"&&yi(P,"data:")===0&&_s[f])){if(!(nt&&!we(pe,rt(P,ne,"")))){if(P)return!1}}}}}}return!0},As=function(f){return f!=="annotation-xml"&&Bs(f,I)},Ls=function(f){ze(G.beforeSanitizeAttributes,f,null);const{attributes:O}=f;if(!O||Wt(f))return;const P={attrName:"",attrValue:"",keepAttr:!0,allowedAttributes:R,forceKeepAttr:void 0};let he=O.length;for(;he--;){const ge=O[he],{name:me,namespaceURI:ve,value:De}=ge,lt=de(me);let ke=me==="value"?De:vi(De);if(P.attrName=lt,P.attrValue=ke,P.keepAttr=!0,P.forceKeepAttr=void 0,ze(G.uponSanitizeAttribute,f,P),ke=P.attrValue,ms&&(lt==="id"||lt==="name")&&(yt(me,f),ke=zn+ke),We&&we(/((--!?|])>)|<\/(style|title)/i,ke)){yt(me,f);continue}if(P.forceKeepAttr||(yt(me,f),!P.keepAttr))continue;if(!fe&&we(/\/>/i,ke)){yt(me,f);continue}Fe&&Ot([Y,j,X],Is=>{ke=rt(ke,Is," ")});const Cs=de(f.nodeName);if(Ss(Cs,lt,ke)){if(m&&typeof v=="object"&&typeof v.getAttributeType=="function"&&!ve)switch(v.getAttributeType(Cs,lt)){case"TrustedHTML":{ke=m.createHTML(ke);break}case"TrustedScriptURL":{ke=m.createScriptURL(ke);break}}try{ve?f.setAttributeNS(ve,me,ke):f.setAttribute(me,ke),Wt(f)?Re(f):Us(e.removed)}catch{}}}ze(G.afterSanitizeAttributes,f,null)},Xn=function V(f){let O=null;const P=Ts(f);for(ze(G.beforeSanitizeShadowDOM,f,null);O=P.nextNode();)ze(G.uponSanitizeShadowNode,O,null),xs(O),Ls(O),O.content instanceof l&&V(O.content);ze(G.afterSanitizeShadowDOM,f,null)};return e.sanitize=function(V){let f=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},O=null,P=null,he=null,ge=null;if(Xt=!V,Xt&&(V="<!-->"),typeof V!="string"&&!Os(V))if(typeof V.toString=="function"){if(V=V.toString(),typeof V!="string")throw ct("dirty is not a string, aborting")}else throw ct("toString is not a function");if(!e.isSupported)return V;if(Ve||qt(f),e.removed=[],typeof V=="string"&&(it=!1),it){if(V.nodeName){const De=de(V.nodeName);if(!U[De]||B[De])throw ct("root node is forbidden and cannot be sanitized in-place")}}else if(V instanceof p)O=Es("<!---->"),P=O.ownerDocument.importNode(V,!0),P.nodeType===ut.element&&P.nodeName==="BODY"||P.nodeName==="HTML"?O=P:O.appendChild(P);else{if(!Ye&&!Fe&&!be&&V.indexOf("<")===-1)return m&&gt?m.createHTML(V):V;if(O=Es(V),!O)return Ye?null:gt?y:""}O&&Bt&&Re(O.firstChild);const me=Ts(it?V:O);for(;he=me.nextNode();)xs(he),Ls(he),he.content instanceof l&&Xn(he.content);if(it)return V;if(Ye){if(mt)for(ge=x.call(O.ownerDocument);O.firstChild;)ge.appendChild(O.firstChild);else ge=O;return(R.shadowroot||R.shadowrootmode)&&(ge=M.call(t,ge,!0)),ge}let ve=be?O.outerHTML:O.innerHTML;return be&&U["!doctype"]&&O.ownerDocument&&O.ownerDocument.doctype&&O.ownerDocument.doctype.name&&we(Ln,O.ownerDocument.doctype.name)&&(ve="<!DOCTYPE "+O.ownerDocument.doctype.name+`>
`+ve),Fe&&Ot([Y,j,X],De=>{ve=rt(ve,De," ")}),m&&gt?m.createHTML(ve):ve},e.setConfig=function(){let V=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};qt(V),Ve=!0},e.clearConfig=function(){et=null,Ve=!1},e.isValidAttribute=function(V,f,O){et||qt({});const P=de(V),he=de(f);return Ss(P,he,O)},e.addHook=function(V,f){typeof f=="function"&&ot(G[V],f)},e.removeHook=function(V){return Us(G[V])},e.removeHooks=function(V){G[V]=[]},e.removeAllHooks=function(){G=Ws()},e}var Fi=Cn();const $i=[{pkg_name:"fractal_tasks_core",version:"1.3.3",task_list:[{version:"1.3.3",name:"Convert Cellvoyager to OME-Zarr",category:"Conversion",modality:"HCS",tags:["Yokogawa","Cellvoyager"],input_types:{},output_types:{},docs_link:"https://fractal-analytics-platform.github.io/fractal-tasks-core",docs_info:`## cellvoyager_to_ome_zarr_init
Create a OME-NGFF zarr folder, without reading/writing image data.

Find plates (for each folder in input_paths):

- glob image files,
- parse metadata from image filename to identify plates,
- identify populated channels.

Create a zarr folder (for each plate):

- parse mlf metadata,
- identify wells and field of view (FOV),
- create FOV ZARR,
- verify that channels are uniform (i.e., same channels).
## cellvoyager_to_ome_zarr_compute
Convert Yokogawa output (png, tif) to zarr file.

This task is run after an init task (typically
\`cellvoyager_to_ome_zarr_init\` or
\`cellvoyager_to_ome_zarr_init_multiplex\`), and it populates the empty
OME-Zarr files that were prepared.

Note that the current task always overwrites existing data. To avoid this
behavior, set the \`overwrite\` argument of the init task to \`False\`.
`,type:"compound",authors:"Fractal Core Team",install_instructions:'## How to add this task to a Fractal instance\n\nTrigger a _PyPI_ task collection for package `fractal-tasks-core`, package version `1.3.3` and package extras fractal-tasks.\n\n## How to install this task in a Python environment\n\n```\npip install "fractal-tasks-core[fractal-tasks]==1.3.3"\n```\n'},{version:"1.3.3",name:"Convert Cellvoyager Multiplexing to OME-Zarr",category:"Conversion",modality:"HCS",tags:["Yokogawa","Cellvoyager"],input_types:{},output_types:{},docs_link:"https://fractal-analytics-platform.github.io/fractal-tasks-core",docs_info:`## cellvoyager_to_ome_zarr_init_multiplex
Create OME-NGFF structure and metadata to host a multiplexing dataset.

This task takes a set of image folders (i.e. different multiplexing
acquisitions) and build the internal structure and metadata of a OME-NGFF
zarr group, without actually loading/writing the image data.

Each element in input_paths should be treated as a different acquisition.
## cellvoyager_to_ome_zarr_compute
Convert Yokogawa output (png, tif) to zarr file.

This task is run after an init task (typically
\`cellvoyager_to_ome_zarr_init\` or
\`cellvoyager_to_ome_zarr_init_multiplex\`), and it populates the empty
OME-Zarr files that were prepared.

Note that the current task always overwrites existing data. To avoid this
behavior, set the \`overwrite\` argument of the init task to \`False\`.
`,type:"compound",authors:"Fractal Core Team",install_instructions:'## How to add this task to a Fractal instance\n\nTrigger a _PyPI_ task collection for package `fractal-tasks-core`, package version `1.3.3` and package extras fractal-tasks.\n\n## How to install this task in a Python environment\n\n```\npip install "fractal-tasks-core[fractal-tasks]==1.3.3"\n```\n'},{version:"1.3.3",name:"Project Image (HCS Plate)",category:"Image Processing",modality:"HCS",tags:["Preprocessing"],input_types:{is_3D:!0},output_types:{is_3D:!1},docs_link:"https://fractal-analytics-platform.github.io/fractal-tasks-core",docs_info:`## copy_ome_zarr_hcs_plate
Duplicate the OME-Zarr HCS structure for a set of zarr_urls.

This task only processes the zarr images in the zarr_urls, not all the
images in the plate. It copies all the  plate & well structure, but none
of the image metadata or the actual image data:

- For each plate, create a new OME-Zarr HCS plate with the attributes for
    all the images in zarr_urls
- For each well (in each plate), create a new zarr subgroup with the
   same attributes as the original one.

Note: this task makes use of methods from the \`Attributes\` class, see
https://zarr.readthedocs.io/en/stable/api/attrs.html.
## projection
Perform intensity projection along Z axis with a chosen method.

Note: this task stores the output in a new zarr file.
`,type:"compound",authors:"Fractal Core Team",install_instructions:'## How to add this task to a Fractal instance\n\nTrigger a _PyPI_ task collection for package `fractal-tasks-core`, package version `1.3.3` and package extras fractal-tasks.\n\n## How to install this task in a Python environment\n\n```\npip install "fractal-tasks-core[fractal-tasks]==1.3.3"\n```\n'},{version:"1.3.3",name:"Illumination Correction",category:"Image Processing",modality:null,tags:["Preprocessing"],input_types:{illumination_corrected:!1},output_types:{illumination_corrected:!0},docs_link:"https://fractal-analytics-platform.github.io/fractal-tasks-core",docs_info:`## illumination_correction
Applies illumination correction to the images in the OME-Zarr.

Assumes that the illumination correction profiles were generated before
separately and that the same background subtraction was used during
calculation of the illumination correction (otherwise, it will not work
well & the correction may only be partial).
`,type:"parallel",authors:"Fractal Core Team",install_instructions:'## How to add this task to a Fractal instance\n\nTrigger a _PyPI_ task collection for package `fractal-tasks-core`, package version `1.3.3` and package extras fractal-tasks.\n\n## How to install this task in a Python environment\n\n```\npip install "fractal-tasks-core[fractal-tasks]==1.3.3"\n```\n'},{version:"1.3.3",name:"Cellpose Segmentation",category:"Segmentation",modality:null,tags:["Deep Learning","Convolutional Neural Network","Instance Segmentation"],input_types:{},output_types:{},docs_link:"https://fractal-analytics-platform.github.io/fractal-tasks-core",docs_info:`## cellpose_segmentation
Run cellpose segmentation on the ROIs of a single OME-Zarr image.
`,type:"parallel",authors:"Fractal Core Team",install_instructions:'## How to add this task to a Fractal instance\n\nTrigger a _PyPI_ task collection for package `fractal-tasks-core`, package version `1.3.3` and package extras fractal-tasks.\n\n## How to install this task in a Python environment\n\n```\npip install "fractal-tasks-core[fractal-tasks]==1.3.3"\n```\n'},{version:"1.3.3",name:"Calculate Registration (image-based)",category:"Registration",modality:"HCS",tags:["Multiplexing"],input_types:{},output_types:{},docs_link:"https://fractal-analytics-platform.github.io/fractal-tasks-core",docs_info:`## image_based_registration_hcs_init
Initialized calculate registration task

This task prepares a parallelization list of all zarr_urls that need to be
used to calculate the registration between acquisitions (all zarr_urls
except the reference acquisition vs. the reference acquisition).
This task only works for HCS OME-Zarrs for 2 reasons: Only HCS OME-Zarrs
currently have defined acquisition metadata to determine reference
acquisitions. And we have only implemented the grouping of images for
HCS OME-Zarrs by well (with the assumption that every well just has 1
image per acqusition).
## calculate_registration_image_based
Calculate registration based on images

This task consists of 3 parts:

1. Loading the images of a given ROI (=> loop over ROIs)
2. Calculating the transformation for that ROI
3. Storing the calculated transformation in the ROI table
`,type:"compound",authors:"Fractal Core Team",install_instructions:'## How to add this task to a Fractal instance\n\nTrigger a _PyPI_ task collection for package `fractal-tasks-core`, package version `1.3.3` and package extras fractal-tasks.\n\n## How to install this task in a Python environment\n\n```\npip install "fractal-tasks-core[fractal-tasks]==1.3.3"\n```\n'},{version:"1.3.3",name:"Find Registration Consensus",category:"Registration",modality:"HCS",tags:["Multiplexing"],input_types:{},output_types:{},docs_link:"https://fractal-analytics-platform.github.io/fractal-tasks-core",docs_info:`## init_group_by_well_for_multiplexing
Finds images for all acquisitions per well.

Returns the parallelization_list to run \`find_registration_consensus\`.
## find_registration_consensus
Applies pre-calculated registration to ROI tables.

Apply pre-calculated registration such that resulting ROIs contain
the consensus align region between all acquisitions.

Parallelization level: well
`,type:"compound",authors:"Fractal Core Team",install_instructions:'## How to add this task to a Fractal instance\n\nTrigger a _PyPI_ task collection for package `fractal-tasks-core`, package version `1.3.3` and package extras fractal-tasks.\n\n## How to install this task in a Python environment\n\n```\npip install "fractal-tasks-core[fractal-tasks]==1.3.3"\n```\n'},{version:"1.3.3",name:"Apply Registration to Image",category:"Registration",modality:"HCS",tags:["Multiplexing"],input_types:{registered:!1},output_types:{registered:!0},docs_link:"https://fractal-analytics-platform.github.io/fractal-tasks-core",docs_info:`## apply_registration_to_image
Apply registration to images by using a registered ROI table

This task consists of 4 parts:

1. Mask all regions in images that are not available in the
registered ROI table and store each acquisition aligned to the
reference_acquisition (by looping over ROIs).
2. Do the same for all label images.
3. Copy all tables from the non-aligned image to the aligned image
(currently only works well if the only tables are well & FOV ROI tables
(registered and original). Not implemented for measurement tables and
other ROI tables).
4. Clean up: Delete the old, non-aligned image and rename the new,
aligned image to take over its place.
`,type:"parallel",authors:"Fractal Core Team",install_instructions:'## How to add this task to a Fractal instance\n\nTrigger a _PyPI_ task collection for package `fractal-tasks-core`, package version `1.3.3` and package extras fractal-tasks.\n\n## How to install this task in a Python environment\n\n```\npip install "fractal-tasks-core[fractal-tasks]==1.3.3"\n```\n'},{version:"1.3.3",name:"Import OME-Zarr",category:null,modality:null,tags:[],input_types:{},output_types:{},docs_link:"https://fractal-analytics-platform.github.io/fractal-tasks-core",docs_info:`## import_ome_zarr
Import a single OME-Zarr into Fractal.

The single OME-Zarr can be a full OME-Zarr HCS plate or an individual
OME-Zarr image. The image needs to be in the zarr_dir as specified by the
dataset. The current version of this task:

1. Creates the appropriate components-related metadata, needed for
   processing an existing OME-Zarr through Fractal.
2. Optionally adds new ROI tables to the existing OME-Zarr.
`,type:"non_parallel",authors:"Fractal Core Team",install_instructions:'## How to add this task to a Fractal instance\n\nTrigger a _PyPI_ task collection for package `fractal-tasks-core`, package version `1.3.3` and package extras fractal-tasks.\n\n## How to install this task in a Python environment\n\n```\npip install "fractal-tasks-core[fractal-tasks]==1.3.3"\n```\n'},{version:"1.3.3",name:"Napari Workflows Wrapper",category:"Measurement",modality:null,tags:[],input_types:{},output_types:{},docs_link:"https://fractal-analytics-platform.github.io/fractal-tasks-core",docs_info:`## napari_workflows_wrapper
Run a napari-workflow on the ROIs of a single OME-NGFF image.

This task takes images and labels and runs a napari-workflow on them that
can produce a label and tables as output.

Examples of allowed entries for \`input_specs\` and \`output_specs\`:

\`\`\`
input_specs = {
    "in_1": {"type": "image", "channel": {"wavelength_id": "A01_C02"}},
    "in_2": {"type": "image", "channel": {"label": "DAPI"}},
    "in_3": {"type": "label", "label_name": "label_DAPI"},
}

output_specs = {
    "out_1": {"type": "label", "label_name": "label_DAPI_new"},
    "out_2": {"type": "dataframe", "table_name": "measurements"},
}
\`\`\`
`,type:"parallel",authors:"Fractal Core Team",install_instructions:'## How to add this task to a Fractal instance\n\nTrigger a _PyPI_ task collection for package `fractal-tasks-core`, package version `1.3.3` and package extras fractal-tasks.\n\n## How to install this task in a Python environment\n\n```\npip install "fractal-tasks-core[fractal-tasks]==1.3.3"\n```\n'}]},{pkg_name:"fractal_faim_ipa",version:"0.4.3",task_list:[{version:"0.4.3",name:"FAIM IPA OME-Zarr Converter",category:"Conversion",modality:"HCS",tags:["Molecular Devices","Image Xpress","MD"],input_types:{},output_types:{},docs_link:null,docs_info:`## convert_ome_zarr
Create OME-Zarr plate from MD Image Xpress files.

This is a non-parallel task => it parses the metadata, creates the plates
and then converts all the wells in the same process
`,type:"non_parallel",authors:null,install_instructions:'## How to add this task to a Fractal instance\n\nTrigger a _PyPI_ task collection with package `fractal-faim-ipa` and package version `0.4.3`.\n\n## How to install this task in a Python environment\n\n```\npip install "fractal-faim-ipa==0.4.3"\n```\n'}]},{pkg_name:"fractal_lif_converters",version:"0.3.3",task_list:[{version:"0.3.3",name:"Convert Lif Plate to OME-Zarr",category:"Conversion",modality:"HCS",tags:["Leica","Plate converter"],input_types:{},output_types:{},docs_link:null,docs_info:`## convert_lif_plate_init_task
Initialize the conversion of LIF files to an OME-Zarr - Plate.
## convert_lif_compute_task
Export a single scene or plate acquisition from a LIF file to OME-Zarr.
`,type:"compound",authors:"Lorenzo Cerrone",install_instructions:'## How to add this task to a Fractal instance\n\nTrigger a _PyPI_ task collection with package `fractal-lif-converters` and package version `0.3.3`.\n\n## How to install this task in a Python environment\n\n```\npip install "fractal-lif-converters==0.3.3"\n```\n'},{version:"0.3.3",name:"Convert Lif Scene to OME-Zarr",category:"Conversion",modality:null,tags:["Leica","Single Image Converter"],input_types:{},output_types:{},docs_link:null,docs_info:`## convert_lif_scene_init_task
Initialize the conversion of LIF files to OME-Zarr - NgffImages.
## convert_lif_compute_task
Export a single scene or plate acquisition from a LIF file to OME-Zarr.
`,type:"compound",authors:"Lorenzo Cerrone",install_instructions:'## How to add this task to a Fractal instance\n\nTrigger a _PyPI_ task collection with package `fractal-lif-converters` and package version `0.3.3`.\n\n## How to install this task in a Python environment\n\n```\npip install "fractal-lif-converters==0.3.3"\n```\n'}]},{pkg_name:"operetta_compose",version:"0.2.4",task_list:[{version:"0.2.4",name:"Harmony to OME-Zarr",category:"Conversion",modality:"HCS",tags:["Opera","Operetta","Perkin Elmer"],input_types:{},output_types:{},docs_link:"https://leukemia-kispi.github.io/operetta-compose/",docs_info:`## harmony_to_ome_zarr
Convert TIFFs which were exported from Harmony (Operetta/Opera, Perkin-Elmer) to OME-ZARR
`,type:"non_parallel",authors:"Fabio Steffen",install_instructions:'## How to add this task to a Fractal instance\n\nTrigger a _PyPI_ task collection with package `operetta-compose` and package version `0.2.4`.\n\n## How to install this task in a Python environment\n\n```\npip install "operetta-compose==0.2.4"\n```\n'},{version:"0.2.4",name:"Stardist segmentation",category:"Segmentation",modality:null,tags:[],input_types:{},output_types:{},docs_link:"https://leukemia-kispi.github.io/operetta-compose/",docs_info:`## stardist_segmentation
Segment cells with Stardist
`,type:"parallel",authors:"Fabio Steffen",install_instructions:'## How to add this task to a Fractal instance\n\nTrigger a _PyPI_ task collection with package `operetta-compose` and package version `0.2.4`.\n\n## How to install this task in a Python environment\n\n```\npip install "operetta-compose==0.2.4"\n```\n'},{version:"0.2.4",name:"Regionprops measurement",category:"Measurement",modality:null,tags:["regionprops","intensity","morphology"],input_types:{},output_types:{},docs_link:"https://leukemia-kispi.github.io/operetta-compose/",docs_info:`## regionprops_measurement
Take measurements using regionprobs and write the features to the OME-ZARR
`,type:"parallel",authors:"Fabio Steffen",install_instructions:'## How to add this task to a Fractal instance\n\nTrigger a _PyPI_ task collection with package `operetta-compose` and package version `0.2.4`.\n\n## How to install this task in a Python environment\n\n```\npip install "operetta-compose==0.2.4"\n```\n'},{version:"0.2.4",name:"Feature classification",category:null,modality:null,tags:["napari feature classifier","object classification"],input_types:{},output_types:{},docs_link:"https://leukemia-kispi.github.io/operetta-compose/",docs_info:`## feature_classification
Classify cells using the [napari-feature-classifier](https://github.com/fractal-napari-plugins-collection/napari-feature-classifier) and write them to the OME-ZARR
`,type:"parallel",authors:"Fabio Steffen",install_instructions:'## How to add this task to a Fractal instance\n\nTrigger a _PyPI_ task collection with package `operetta-compose` and package version `0.2.4`.\n\n## How to install this task in a Python environment\n\n```\npip install "operetta-compose==0.2.4"\n```\n'},{version:"0.2.4",name:"Condition registration",category:null,modality:"HCS",tags:["Metadata","Treatment conditions"],input_types:{},output_types:{},docs_link:"https://leukemia-kispi.github.io/operetta-compose/",docs_info:"## condition_registration\nRegister the experimental (drug layout) in the OME-ZARR.\nThe table should contain at least the columns `row` and `col` identifying the well.\nIt can have an arbitrary number of additional metadata columns (e.g. drug, concentration, medium, sample).\nDrug combinations can be specified by two entries pointing to the same `row` / `col`\n",type:"parallel",authors:"Fabio Steffen",install_instructions:'## How to add this task to a Fractal instance\n\nTrigger a _PyPI_ task collection with package `operetta-compose` and package version `0.2.4`.\n\n## How to install this task in a Python environment\n\n```\npip install "operetta-compose==0.2.4"\n```\n'}]},{pkg_name:"fractal_helper_tasks",version:"0.1.2",task_list:[{version:"0.1.2",name:"Drop T Dimension",category:null,modality:null,tags:["Singelton time dimension"],input_types:{},output_types:{has_t:!1},docs_link:null,docs_info:`## drop_t_dimension
Drops singleton t dimension.
`,type:"non_parallel",authors:"Joel Luethi",install_instructions:`## How to add this task to a Fractal instance

1. Download the wheel file from [this link](https://github.com/fractal-analytics-platform/fractal-helper-tasks/releases/download/v0.1.2/fractal_helper_tasks-0.1.2-py3-none-any.whl),
2. Trigger a _local_ task collection by uploading the wheel file.

## How to install this task in a Python environment

1. Download the wheel file from [this link](https://github.com/fractal-analytics-platform/fractal-helper-tasks/releases/download/v0.1.2/fractal_helper_tasks-0.1.2-py3-none-any.whl)
2. \`pip install fractal_helper_tasks-0.1.2-py3-none-any.whl\`
`},{version:"0.1.2",name:"Convert 2D segmentation to 3D",category:null,modality:null,tags:["Mixed modality","2D to 3D workflows"],input_types:{is_3D:!1},output_types:{},docs_link:null,docs_info:`## convert_2D_segmentation_to_3D
Convert 2D segmentation to 3D segmentation.

This task loads the 2D segmentation, replicates it along the Z slice and
stores it back into the 3D OME-Zarr image.

This is a temporary workaround task, as long as we store 2D data in
a separate OME-Zarr file from the 3D data. If the 2D & 3D OME-Zarr images
have different suffixes in their name, use \`image_suffix_2D_to_remove\` &
\`image_suffix_3D_to_add\`. If their base names are different, this task
does not support processing them at the moment.

It makes the assumption that the 3D OME-Zarrs are stored in the same place
as the 2D OME-Zarrs (same based folder).
`,type:"parallel",authors:"Joel Luethi",install_instructions:`## How to add this task to a Fractal instance

1. Download the wheel file from [this link](https://github.com/fractal-analytics-platform/fractal-helper-tasks/releases/download/v0.1.2/fractal_helper_tasks-0.1.2-py3-none-any.whl),
2. Trigger a _local_ task collection by uploading the wheel file.

## How to install this task in a Python environment

1. Download the wheel file from [this link](https://github.com/fractal-analytics-platform/fractal-helper-tasks/releases/download/v0.1.2/fractal_helper_tasks-0.1.2-py3-none-any.whl)
2. \`pip install fractal_helper_tasks-0.1.2-py3-none-any.whl\`
`}]},{pkg_name:"scmultiplex",version:"0.8.0",task_list:[{version:"0.8.0",name:"scMultiplex Calculate Object Linking",category:"Registration",modality:"HCS",tags:["multiplexing","2D"],input_types:{},output_types:{},docs_link:null,docs_info:`## _image_based_registration_hcs_init
Initialized calculate registration task

This task prepares a parallelization list of all zarr_urls that need to be
used to calculate the registration between acquisitions (all zarr_urls
except the reference acquisition vs. the reference acquisition).
This task only works for HCS OME-Zarrs for 2 reasons: Only HCS OME-Zarrs
currently have defined acquisition metadata to determine reference
acquisitions. And we have only implemented the grouping of images for
HCS OME-Zarrs by well (with the assumption that every well just has 1
image per acqusition).
## calculate_object_linking
Calculate object linking based on segmentation label map images

This task consists of 4 parts:

1. Load the object segmentation images for each well (paired reference and alignment round)
2. Calculate the shift transformation for the image pair
3. Apply shifts to image pair and identify matching object labels given an iou cutoff threshold
3. Store the identified matches as a linking table in alignment round directory

Parallelization level: image
`,type:"compound",authors:"Nicole Repina, Enrico Tagliavini, Tim-Oliver Buchholz, Joel Luethi",install_instructions:`## How to add this task to a Fractal instance

1. Download the wheel file from [this link](https://github.com/fmi-basel/gliberal-scMultipleX/releases/download/v0.8.0/scmultiplex-0.8.0-py3-none-any.whl),
2. Trigger a _local_ task collection by uploading the wheel file, with package extras fractal-tasks.

## How to install this task in a Python environment

1. Download the wheel file from [this link](https://github.com/fmi-basel/gliberal-scMultipleX/releases/download/v0.8.0/scmultiplex-0.8.0-py3-none-any.whl)
2. \`pip install "scmultiplex-0.8.0-py3-none-any.whl[fractal-tasks]"\`
`},{version:"0.8.0",name:"scMultiplex Calculate Linking Consensus",category:"Registration",modality:"HCS",tags:["multiplexing","2D","3D"],input_types:{},output_types:{},docs_link:null,docs_info:`## _init_group_by_well_for_multiplexing
Finds images for all acquisitions per well.

Returns the parallelization_list to run \`find_registration_consensus\`.
## calculate_linking_consensus
Applies pre-calculated registration to ROI tables.

Apply pre-calculated registration such that resulting ROIs contain
the consensus align region between all cycles.

Parallelization level: well
`,type:"compound",authors:"Nicole Repina, Enrico Tagliavini, Tim-Oliver Buchholz, Joel Luethi",install_instructions:`## How to add this task to a Fractal instance

1. Download the wheel file from [this link](https://github.com/fmi-basel/gliberal-scMultipleX/releases/download/v0.8.0/scmultiplex-0.8.0-py3-none-any.whl),
2. Trigger a _local_ task collection by uploading the wheel file, with package extras fractal-tasks.

## How to install this task in a Python environment

1. Download the wheel file from [this link](https://github.com/fmi-basel/gliberal-scMultipleX/releases/download/v0.8.0/scmultiplex-0.8.0-py3-none-any.whl)
2. \`pip install "scmultiplex-0.8.0-py3-none-any.whl[fractal-tasks]"\`
`},{version:"0.8.0",name:"scMultiplex Relabel by Linking Consensus",category:"Registration",modality:"HCS",tags:["multiplexing","2D","3D"],input_types:{},output_types:{},docs_link:null,docs_info:`## _image_based_registration_hcs_allrounds_init
Initialized calculate registration task

Same as _image_based_registration_hcs_init.py only does not exclude reference round in zarr_url list;
all rounds are processed.
## relabel_by_linking_consensus
Relabels image labels and ROI tables based on consensus linking.

Parallelization level: image
`,type:"compound",authors:"Nicole Repina, Enrico Tagliavini, Tim-Oliver Buchholz, Joel Luethi",install_instructions:`## How to add this task to a Fractal instance

1. Download the wheel file from [this link](https://github.com/fmi-basel/gliberal-scMultipleX/releases/download/v0.8.0/scmultiplex-0.8.0-py3-none-any.whl),
2. Trigger a _local_ task collection by uploading the wheel file, with package extras fractal-tasks.

## How to install this task in a Python environment

1. Download the wheel file from [this link](https://github.com/fmi-basel/gliberal-scMultipleX/releases/download/v0.8.0/scmultiplex-0.8.0-py3-none-any.whl)
2. \`pip install "scmultiplex-0.8.0-py3-none-any.whl[fractal-tasks]"\`
`},{version:"0.8.0",name:"scMultiplex Calculate Platymatch Registration",category:"Registration",modality:"HCS",tags:["multiplexing","3D"],input_types:{},output_types:{},docs_link:null,docs_info:`## _image_based_registration_hcs_init
Initialized calculate registration task

This task prepares a parallelization list of all zarr_urls that need to be
used to calculate the registration between acquisitions (all zarr_urls
except the reference acquisition vs. the reference acquisition).
This task only works for HCS OME-Zarrs for 2 reasons: Only HCS OME-Zarrs
currently have defined acquisition metadata to determine reference
acquisitions. And we have only implemented the grouping of images for
HCS OME-Zarrs by well (with the assumption that every well just has 1
image per acqusition).
## calculate_platymatch_registration
Calculate point-cloud-based registration with PlatyMatch.

This task consists of 4 parts:

1. Load the sub-object segmentation images for each well (paired reference and alignment round)
2. Select sub-objects that belong to object region by loading with object ROI table and mask by object mask.
   Object pair is defined by consensus linking. Filter the sub-objects to remove small debris that was segmented.
3. Calculate affine and optionally the free-form deformation for each object pair
4. Output: save the identified matches as a linking table in alignment round directory
   and optionally the transformation matrix on disk.

Parallelization level: image
`,type:"compound",authors:"Nicole Repina, Enrico Tagliavini, Tim-Oliver Buchholz, Joel Luethi",install_instructions:`## How to add this task to a Fractal instance

1. Download the wheel file from [this link](https://github.com/fmi-basel/gliberal-scMultipleX/releases/download/v0.8.0/scmultiplex-0.8.0-py3-none-any.whl),
2. Trigger a _local_ task collection by uploading the wheel file, with package extras fractal-tasks.

## How to install this task in a Python environment

1. Download the wheel file from [this link](https://github.com/fmi-basel/gliberal-scMultipleX/releases/download/v0.8.0/scmultiplex-0.8.0-py3-none-any.whl)
2. \`pip install "scmultiplex-0.8.0-py3-none-any.whl[fractal-tasks]"\`
`},{version:"0.8.0",name:"scMultiplex Surface Mesh Multiscale",category:"Image Processing",modality:"HCS",tags:["3D","mesh"],input_types:{},output_types:{},docs_link:null,docs_info:`## _init_group_by_well_for_multiplexing
Finds images for all acquisitions per well.

Returns the parallelization_list to run \`find_registration_consensus\`.
## surface_mesh_multiscale
Calculate 3D surface mesh of parent object (e.g. tissue, organoid)
from 3D cell-level segmentation of children (e.g. nuclei)

Recommended to run on child objects that have been filtered to remove debris and disconnected components
(e.g. following cleanup_3d_segmentation task)

This task consists of 4 parts:

1. Load the sub-object (e.g. nuc) segmentation images for each object of a given reference round; skip other rounds.
    Select sub-objects (e.g. nuc) that belong to parent object region by masking by parent.
2. Perform label fusion and edge detection to generate surface label image.
3. Calculate surface mesh of label image using vtkDiscreteFlyingEdges3D algorithm. Smoothing is applied with
    vtkWindowedSincPolyDataFilter and tuned with 4 task parameters: passband, smoothing_iterations, feature_angle,
    polynomial_degree (minimal effect).
    The number of triangles in the mesh is optionally reduced with vtkQuadricDecimation filter to form a good
    approximation to the original geometry and is tuned with task parameter target_reduction.
4. Output: save the (1) meshes (.stl) per object id in meshes folder and (2) well label map as a new label in zarr.
    Note that label map output may be clipped for objects that are dense and have overlapping pixels.
    In this case, the 'winning' object in the overlap region is the one with higher label id.
`,type:"compound",authors:"Nicole Repina, Enrico Tagliavini, Tim-Oliver Buchholz, Joel Luethi",install_instructions:`## How to add this task to a Fractal instance

1. Download the wheel file from [this link](https://github.com/fmi-basel/gliberal-scMultipleX/releases/download/v0.8.0/scmultiplex-0.8.0-py3-none-any.whl),
2. Trigger a _local_ task collection by uploading the wheel file, with package extras fractal-tasks.

## How to install this task in a Python environment

1. Download the wheel file from [this link](https://github.com/fmi-basel/gliberal-scMultipleX/releases/download/v0.8.0/scmultiplex-0.8.0-py3-none-any.whl)
2. \`pip install "scmultiplex-0.8.0-py3-none-any.whl[fractal-tasks]"\`
`},{version:"0.8.0",name:"scMultiplex Segment by Intensity Threshold",category:"Segmentation",modality:"HCS",tags:["Classical segmentation","3D"],input_types:{},output_types:{},docs_link:null,docs_info:`## init_select_multiplexing_round
Finds images for desired acquisition per well.

Returns the parallelization_list.
## segment_by_intensity_threshold
Calculate full 3D object segmentation after 2D MIP-based segmentation using intensity thresholding of
raw intensity image(s).

This task consists of 3 parts:

1. Load the intensity images for selected channels using MIP-based segmentation ROIs.
2. Generate 3D mask based on simple thresholding of the combined channel images. The thresholded image is
    smoothened using gaussian blurring followed by Canny edge detection. Optional z-illumination correctopn
    is applied on the fly. The MIP-based segmentation is used to mask
    the resulting label image to roughly exclude any neighboring organoids and debris. To further exclude
    neighboring organoids and debris, the largest connected component is selected as the final label image.
3. Output: save the (1) new label image and (2) new masking ROI table in the selected zarr url.
`,type:"compound",authors:"Nicole Repina, Enrico Tagliavini, Tim-Oliver Buchholz, Joel Luethi",install_instructions:`## How to add this task to a Fractal instance

1. Download the wheel file from [this link](https://github.com/fmi-basel/gliberal-scMultipleX/releases/download/v0.8.0/scmultiplex-0.8.0-py3-none-any.whl),
2. Trigger a _local_ task collection by uploading the wheel file, with package extras fractal-tasks.

## How to install this task in a Python environment

1. Download the wheel file from [this link](https://github.com/fmi-basel/gliberal-scMultipleX/releases/download/v0.8.0/scmultiplex-0.8.0-py3-none-any.whl)
2. \`pip install "scmultiplex-0.8.0-py3-none-any.whl[fractal-tasks]"\`
`},{version:"0.8.0",name:"scMultiplex Spherical Harmonics from Label Image",category:"Measurement",modality:"HCS",tags:["3D"],input_types:{},output_types:{},docs_link:null,docs_info:`## _init_group_by_well_for_multiplexing
Finds images for all acquisitions per well.

Returns the parallelization_list to run \`find_registration_consensus\`.
## spherical_harmonics_from_labelimage
Calculate spherical harmonics of 3D input label image using aics_shparam.

This task consists of 6 parts:

1. Load 3D label image based on provided label name and ROI table
2. Compute 3D mesh with vtkContourFilter using aics_shparam functions
3. Compute spherical harmonics of mesh using aics_shparam
4. Compute reconstruction error (mse) of computed harmonics
5. Optionally generate reconstructed mesh from the calculated harmonics
6. Output: save the (1) spherical harmonic coefficients and mse error as feature table
    (2) reconstructed meshes (.stl) per object id in a new meshes folder within zarr structure
`,type:"compound",authors:"Nicole Repina, Enrico Tagliavini, Tim-Oliver Buchholz, Joel Luethi",install_instructions:`## How to add this task to a Fractal instance

1. Download the wheel file from [this link](https://github.com/fmi-basel/gliberal-scMultipleX/releases/download/v0.8.0/scmultiplex-0.8.0-py3-none-any.whl),
2. Trigger a _local_ task collection by uploading the wheel file, with package extras fractal-tasks.

## How to install this task in a Python environment

1. Download the wheel file from [this link](https://github.com/fmi-basel/gliberal-scMultipleX/releases/download/v0.8.0/scmultiplex-0.8.0-py3-none-any.whl)
2. \`pip install "scmultiplex-0.8.0-py3-none-any.whl[fractal-tasks]"\`
`},{version:"0.8.0",name:"scMultiplex Mesh Measurements",category:"Measurement",modality:"HCS",tags:["3D","mesh","morphology"],input_types:{},output_types:{},docs_link:null,docs_info:`## _init_group_by_well_for_multiplexing
Finds images for all acquisitions per well.

Returns the parallelization_list to run \`find_registration_consensus\`.
## scmultiplex_mesh_measurements
Extract shape features of 3D input meshes.

This task consists of 5 parts:

1. Load meshes (.stl) from zarr structure that have been previously generated
    (e.g. using Surface Mesh Multiscale task)
2. Extract mesh morphology measurements: volume, surface area, extent, solidity, concavity, asymmetry,
    aspect ratio, and normalized surface area to volume ratio. Units correspond to units of mesh. If mesh was
    generated with surface_mesh_multiscale task, units are physical units (um). For further details of features see
    scMultiplex FeatureFunctions.py
3. Optionally calculate Gaussian curvature at each mesh point (set calculate_curvature = True)
4. Optionally compute spherical harmonics of mesh using aics_shparam (set calculate_harmonics = True).
    Compute reconstruction error (mse) of computed harmonics and optionally generate reconstructed mesh from the
    calculated harmonics
5. Output: save (1) extracted measurements as a new table (output_table_name), (2) optional spherical harmonic
    coefficients and mse error as a separate feature table ('output_table_name'_harmonics) (3) optional
    reconstructed meshes from spherical harmonics as .stl within zarr structure (3) optional convex hull
    and bounding box on disk as .vtp within zarr structure (4) optional curvature meshes on disk as .vtp within
    zarr structure.
`,type:"compound",authors:"Nicole Repina, Enrico Tagliavini, Tim-Oliver Buchholz, Joel Luethi",install_instructions:`## How to add this task to a Fractal instance

1. Download the wheel file from [this link](https://github.com/fmi-basel/gliberal-scMultipleX/releases/download/v0.8.0/scmultiplex-0.8.0-py3-none-any.whl),
2. Trigger a _local_ task collection by uploading the wheel file, with package extras fractal-tasks.

## How to install this task in a Python environment

1. Download the wheel file from [this link](https://github.com/fmi-basel/gliberal-scMultipleX/releases/download/v0.8.0/scmultiplex-0.8.0-py3-none-any.whl)
2. \`pip install "scmultiplex-0.8.0-py3-none-any.whl[fractal-tasks]"\`
`},{version:"0.8.0",name:"scMultiplex Feature Measurements",category:"Measurement",modality:null,tags:["regionprops","morphology","intensity"],input_types:{},output_types:{},docs_link:null,docs_info:`## scmultiplex_feature_measurements
Measurements of intensities and morphologies

Wrapper task for scmultiplex measurements for Fractal to generate
measurements of intensities and morphologies
`,type:"parallel",authors:"Nicole Repina, Enrico Tagliavini, Tim-Oliver Buchholz, Joel Luethi",install_instructions:`## How to add this task to a Fractal instance

1. Download the wheel file from [this link](https://github.com/fmi-basel/gliberal-scMultipleX/releases/download/v0.8.0/scmultiplex-0.8.0-py3-none-any.whl),
2. Trigger a _local_ task collection by uploading the wheel file, with package extras fractal-tasks.

## How to install this task in a Python environment

1. Download the wheel file from [this link](https://github.com/fmi-basel/gliberal-scMultipleX/releases/download/v0.8.0/scmultiplex-0.8.0-py3-none-any.whl)
2. \`pip install "scmultiplex-0.8.0-py3-none-any.whl[fractal-tasks]"\`
`},{version:"0.8.0",name:"scMultiplex Expand Labels",category:null,modality:null,tags:["2D","3D"],input_types:{},output_types:{},docs_link:null,docs_info:`## expand_labels
Expand labels in 2D or 3D image without overlap.
`,type:"parallel",authors:"Nicole Repina, Enrico Tagliavini, Tim-Oliver Buchholz, Joel Luethi",install_instructions:`## How to add this task to a Fractal instance

1. Download the wheel file from [this link](https://github.com/fmi-basel/gliberal-scMultipleX/releases/download/v0.8.0/scmultiplex-0.8.0-py3-none-any.whl),
2. Trigger a _local_ task collection by uploading the wheel file, with package extras fractal-tasks.

## How to install this task in a Python environment

1. Download the wheel file from [this link](https://github.com/fmi-basel/gliberal-scMultipleX/releases/download/v0.8.0/scmultiplex-0.8.0-py3-none-any.whl)
2. \`pip install "scmultiplex-0.8.0-py3-none-any.whl[fractal-tasks]"\`
`}]},{pkg_name:"fractal_ome_zarr_hcs_stitching",version:"0.0.6",task_list:[{version:"0.0.6",name:"Stitching Task",category:"Registration",modality:null,tags:["multiview-stitcher","Fusion","Registration","Stitching","2D","3D"],input_types:{stitched:!1},output_types:{stitched:!0},docs_link:null,docs_info:`## stitching_task
Stitches FOVs from an OME-Zarr image.

Performs registration and fusion of FOVs indicated
in the FOV_ROI_table of the OME-Zarr image. Writes the
fused image back to a "fused" group in the same Zarr array.

Todo:
  - include and update output metadata / FOV ROI table
  - test 2D / 3D
  - optimize for large data
  - currently optimized for search first mode, need to implement
    registration pair finding for "grid" (?) mode
`,type:"parallel",authors:"Marvin Albert, Joel Luethi, Nicole Repina",install_instructions:`## How to add this task to a Fractal instance

1. Download the wheel file from [this link](https://github.com/m-albert/fractal-ome-zarr-hcs-stitching/releases/download/v0.0.6/fractal_ome_zarr_hcs_stitching-0.0.6-py3-none-any.whl),
2. Trigger a _local_ task collection by uploading the wheel file.

## How to install this task in a Python environment

1. Download the wheel file from [this link](https://github.com/m-albert/fractal-ome-zarr-hcs-stitching/releases/download/v0.0.6/fractal_ome_zarr_hcs_stitching-0.0.6-py3-none-any.whl)
2. \`pip install fractal_ome_zarr_hcs_stitching-0.0.6-py3-none-any.whl\`
`}]}];var zi=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function In(a){return a&&a.__esModule&&Object.prototype.hasOwnProperty.call(a,"default")?a.default:a}var ts={};const Hi=typeof process=="object"&&ts&&ts.NODE_DEBUG&&/\bsemver\b/i.test(ts.NODE_DEBUG)?(...a)=>console.error("SEMVER",...a):()=>{};var Rn=Hi;const Vi="2.0.0",Dn=256,Ui=Number.MAX_SAFE_INTEGER||9007199254740991,Bi=16,Gi=Dn-6,ji=["major","premajor","minor","preminor","patch","prepatch","prerelease"];var Nn={MAX_LENGTH:Dn,MAX_SAFE_COMPONENT_LENGTH:Bi,MAX_SAFE_BUILD_LENGTH:Gi,MAX_SAFE_INTEGER:Ui,RELEASE_TYPES:ji,SEMVER_SPEC_VERSION:Vi,FLAG_INCLUDE_PRERELEASE:1,FLAG_LOOSE:2},cs={exports:{}};(function(a,e){const{MAX_SAFE_COMPONENT_LENGTH:s,MAX_SAFE_BUILD_LENGTH:t,MAX_LENGTH:i}=Nn,l=Rn;e=a.exports={};const r=e.re=[],p=e.safeRe=[],c=e.src=[],h=e.t={};let g=0;const _="[a-zA-Z0-9-]",k=[["\\s",1],["\\d",i],[_,t]],v=C=>{for(const[n,o]of k)C=C.split(`${n}*`).join(`${n}{0,${o}}`).split(`${n}+`).join(`${n}{1,${o}}`);return C},w=(C,n,o)=>{const d=v(n),u=g++;l(C,u,n),h[C]=u,c[u]=n,r[u]=new RegExp(n,o?"g":void 0),p[u]=new RegExp(d,o?"g":void 0)};w("NUMERICIDENTIFIER","0|[1-9]\\d*"),w("NUMERICIDENTIFIERLOOSE","\\d+"),w("NONNUMERICIDENTIFIER",`\\d*[a-zA-Z-]${_}*`),w("MAINVERSION",`(${c[h.NUMERICIDENTIFIER]})\\.(${c[h.NUMERICIDENTIFIER]})\\.(${c[h.NUMERICIDENTIFIER]})`),w("MAINVERSIONLOOSE",`(${c[h.NUMERICIDENTIFIERLOOSE]})\\.(${c[h.NUMERICIDENTIFIERLOOSE]})\\.(${c[h.NUMERICIDENTIFIERLOOSE]})`),w("PRERELEASEIDENTIFIER",`(?:${c[h.NUMERICIDENTIFIER]}|${c[h.NONNUMERICIDENTIFIER]})`),w("PRERELEASEIDENTIFIERLOOSE",`(?:${c[h.NUMERICIDENTIFIERLOOSE]}|${c[h.NONNUMERICIDENTIFIER]})`),w("PRERELEASE",`(?:-(${c[h.PRERELEASEIDENTIFIER]}(?:\\.${c[h.PRERELEASEIDENTIFIER]})*))`),w("PRERELEASELOOSE",`(?:-?(${c[h.PRERELEASEIDENTIFIERLOOSE]}(?:\\.${c[h.PRERELEASEIDENTIFIERLOOSE]})*))`),w("BUILDIDENTIFIER",`${_}+`),w("BUILD",`(?:\\+(${c[h.BUILDIDENTIFIER]}(?:\\.${c[h.BUILDIDENTIFIER]})*))`),w("FULLPLAIN",`v?${c[h.MAINVERSION]}${c[h.PRERELEASE]}?${c[h.BUILD]}?`),w("FULL",`^${c[h.FULLPLAIN]}$`),w("LOOSEPLAIN",`[v=\\s]*${c[h.MAINVERSIONLOOSE]}${c[h.PRERELEASELOOSE]}?${c[h.BUILD]}?`),w("LOOSE",`^${c[h.LOOSEPLAIN]}$`),w("GTLT","((?:<|>)?=?)"),w("XRANGEIDENTIFIERLOOSE",`${c[h.NUMERICIDENTIFIERLOOSE]}|x|X|\\*`),w("XRANGEIDENTIFIER",`${c[h.NUMERICIDENTIFIER]}|x|X|\\*`),w("XRANGEPLAIN",`[v=\\s]*(${c[h.XRANGEIDENTIFIER]})(?:\\.(${c[h.XRANGEIDENTIFIER]})(?:\\.(${c[h.XRANGEIDENTIFIER]})(?:${c[h.PRERELEASE]})?${c[h.BUILD]}?)?)?`),w("XRANGEPLAINLOOSE",`[v=\\s]*(${c[h.XRANGEIDENTIFIERLOOSE]})(?:\\.(${c[h.XRANGEIDENTIFIERLOOSE]})(?:\\.(${c[h.XRANGEIDENTIFIERLOOSE]})(?:${c[h.PRERELEASELOOSE]})?${c[h.BUILD]}?)?)?`),w("XRANGE",`^${c[h.GTLT]}\\s*${c[h.XRANGEPLAIN]}$`),w("XRANGELOOSE",`^${c[h.GTLT]}\\s*${c[h.XRANGEPLAINLOOSE]}$`),w("COERCEPLAIN",`(^|[^\\d])(\\d{1,${s}})(?:\\.(\\d{1,${s}}))?(?:\\.(\\d{1,${s}}))?`),w("COERCE",`${c[h.COERCEPLAIN]}(?:$|[^\\d])`),w("COERCEFULL",c[h.COERCEPLAIN]+`(?:${c[h.PRERELEASE]})?(?:${c[h.BUILD]})?(?:$|[^\\d])`),w("COERCERTL",c[h.COERCE],!0),w("COERCERTLFULL",c[h.COERCEFULL],!0),w("LONETILDE","(?:~>?)"),w("TILDETRIM",`(\\s*)${c[h.LONETILDE]}\\s+`,!0),e.tildeTrimReplace="$1~",w("TILDE",`^${c[h.LONETILDE]}${c[h.XRANGEPLAIN]}$`),w("TILDELOOSE",`^${c[h.LONETILDE]}${c[h.XRANGEPLAINLOOSE]}$`),w("LONECARET","(?:\\^)"),w("CARETTRIM",`(\\s*)${c[h.LONECARET]}\\s+`,!0),e.caretTrimReplace="$1^",w("CARET",`^${c[h.LONECARET]}${c[h.XRANGEPLAIN]}$`),w("CARETLOOSE",`^${c[h.LONECARET]}${c[h.XRANGEPLAINLOOSE]}$`),w("COMPARATORLOOSE",`^${c[h.GTLT]}\\s*(${c[h.LOOSEPLAIN]})$|^$`),w("COMPARATOR",`^${c[h.GTLT]}\\s*(${c[h.FULLPLAIN]})$|^$`),w("COMPARATORTRIM",`(\\s*)${c[h.GTLT]}\\s*(${c[h.LOOSEPLAIN]}|${c[h.XRANGEPLAIN]})`,!0),e.comparatorTrimReplace="$1$2$3",w("HYPHENRANGE",`^\\s*(${c[h.XRANGEPLAIN]})\\s+-\\s+(${c[h.XRANGEPLAIN]})\\s*$`),w("HYPHENRANGELOOSE",`^\\s*(${c[h.XRANGEPLAINLOOSE]})\\s+-\\s+(${c[h.XRANGEPLAINLOOSE]})\\s*$`),w("STAR","(<|>)?=?\\s*\\*"),w("GTE0","^\\s*>=\\s*0\\.0\\.0\\s*$"),w("GTE0PRE","^\\s*>=\\s*0\\.0\\.0-0\\s*$")})(cs,cs.exports);var Xi=cs.exports;const Zi=Object.freeze({loose:!0}),qi=Object.freeze({}),Wi=a=>a?typeof a!="object"?Zi:a:qi;var Yi=Wi;const Ys=/^[0-9]+$/,Mn=(a,e)=>{const s=Ys.test(a),t=Ys.test(e);return s&&t&&(a=+a,e=+e),a===e?0:s&&!t?-1:t&&!s?1:a<e?-1:1},Ji=(a,e)=>Mn(e,a);var Qi={compareIdentifiers:Mn,rcompareIdentifiers:Ji};const St=Rn,{MAX_LENGTH:Js,MAX_SAFE_INTEGER:At}=Nn,{safeRe:Qs,t:Ks}=Xi,Ki=Yi,{compareIdentifiers:tt}=Qi;let ea=class Ne{constructor(e,s){if(s=Ki(s),e instanceof Ne){if(e.loose===!!s.loose&&e.includePrerelease===!!s.includePrerelease)return e;e=e.version}else if(typeof e!="string")throw new TypeError(`Invalid version. Must be a string. Got type "${typeof e}".`);if(e.length>Js)throw new TypeError(`version is longer than ${Js} characters`);St("SemVer",e,s),this.options=s,this.loose=!!s.loose,this.includePrerelease=!!s.includePrerelease;const t=e.trim().match(s.loose?Qs[Ks.LOOSE]:Qs[Ks.FULL]);if(!t)throw new TypeError(`Invalid Version: ${e}`);if(this.raw=e,this.major=+t[1],this.minor=+t[2],this.patch=+t[3],this.major>At||this.major<0)throw new TypeError("Invalid major version");if(this.minor>At||this.minor<0)throw new TypeError("Invalid minor version");if(this.patch>At||this.patch<0)throw new TypeError("Invalid patch version");t[4]?this.prerelease=t[4].split(".").map(i=>{if(/^[0-9]+$/.test(i)){const l=+i;if(l>=0&&l<At)return l}return i}):this.prerelease=[],this.build=t[5]?t[5].split("."):[],this.format()}format(){return this.version=`${this.major}.${this.minor}.${this.patch}`,this.prerelease.length&&(this.version+=`-${this.prerelease.join(".")}`),this.version}toString(){return this.version}compare(e){if(St("SemVer.compare",this.version,this.options,e),!(e instanceof Ne)){if(typeof e=="string"&&e===this.version)return 0;e=new Ne(e,this.options)}return e.version===this.version?0:this.compareMain(e)||this.comparePre(e)}compareMain(e){return e instanceof Ne||(e=new Ne(e,this.options)),tt(this.major,e.major)||tt(this.minor,e.minor)||tt(this.patch,e.patch)}comparePre(e){if(e instanceof Ne||(e=new Ne(e,this.options)),this.prerelease.length&&!e.prerelease.length)return-1;if(!this.prerelease.length&&e.prerelease.length)return 1;if(!this.prerelease.length&&!e.prerelease.length)return 0;let s=0;do{const t=this.prerelease[s],i=e.prerelease[s];if(St("prerelease compare",s,t,i),t===void 0&&i===void 0)return 0;if(i===void 0)return 1;if(t===void 0)return-1;if(t===i)continue;return tt(t,i)}while(++s)}compareBuild(e){e instanceof Ne||(e=new Ne(e,this.options));let s=0;do{const t=this.build[s],i=e.build[s];if(St("build compare",s,t,i),t===void 0&&i===void 0)return 0;if(i===void 0)return 1;if(t===void 0)return-1;if(t===i)continue;return tt(t,i)}while(++s)}inc(e,s,t){switch(e){case"premajor":this.prerelease.length=0,this.patch=0,this.minor=0,this.major++,this.inc("pre",s,t);break;case"preminor":this.prerelease.length=0,this.patch=0,this.minor++,this.inc("pre",s,t);break;case"prepatch":this.prerelease.length=0,this.inc("patch",s,t),this.inc("pre",s,t);break;case"prerelease":this.prerelease.length===0&&this.inc("patch",s,t),this.inc("pre",s,t);break;case"major":(this.minor!==0||this.patch!==0||this.prerelease.length===0)&&this.major++,this.minor=0,this.patch=0,this.prerelease=[];break;case"minor":(this.patch!==0||this.prerelease.length===0)&&this.minor++,this.patch=0,this.prerelease=[];break;case"patch":this.prerelease.length===0&&this.patch++,this.prerelease=[];break;case"pre":{const i=Number(t)?1:0;if(!s&&t===!1)throw new Error("invalid increment argument: identifier is empty");if(this.prerelease.length===0)this.prerelease=[i];else{let l=this.prerelease.length;for(;--l>=0;)typeof this.prerelease[l]=="number"&&(this.prerelease[l]++,l=-2);if(l===-1){if(s===this.prerelease.join(".")&&t===!1)throw new Error("invalid increment argument: identifier already exists");this.prerelease.push(i)}}if(s){let l=[s,i];t===!1&&(l=[s]),tt(this.prerelease[0],s)===0?isNaN(this.prerelease[1])&&(this.prerelease=l):this.prerelease=l}break}default:throw new Error(`invalid increment argument: ${e}`)}return this.raw=this.format(),this.build.length&&(this.raw+=`+${this.build.join(".")}`),this}};var ta=ea;const en=ta,sa=(a,e,s)=>new en(a,s).compare(new en(e,s));var na=sa;const ia=na,aa=(a,e)=>ia(a,e,!0);var la=aa;const oa=In(la);function ra(a,e){const s=[];for(const t of a)for(const i of t.task_list){const l=t[e];let r=s.find(h=>h.groupTitle===l);const p=ha(t,i),c=t.version||"";if(r){let h=r.tasks.find(g=>Object.values(g.taskVersions).find(_=>_.task_name===i.name));h?h.taskVersions[c]=p:(h={selectedVersion:c,taskVersions:{[c]:p}},r.tasks.push(h))}else r={groupTitle:t[e],tasks:[{selectedVersion:c,taskVersions:{[c]:p}}]},s.push(r)}return ca(s),s}function ca(a){for(const e of a){for(const s of e.tasks){const t=Object.keys(s.taskVersions).filter(i=>i!=="");t.length>0&&(hs(t),s.selectedVersion=t[0])}e.tasks.sort((s,t)=>s.taskVersions[s.selectedVersion].task_id<t.taskVersions[t.selectedVersion].task_id?-1:1)}a.sort((e,s)=>e.groupTitle.localeCompare(s.groupTitle,void 0,{sensitivity:"base"}))}function hs(a){try{a.sort((e,s)=>e?s?oa(e,s):1:-1).reverse()}catch(e){console.warn("Semver error:",e)}return a}function ha(a,e){return{pkg_name:a.pkg_name,task_id:e.id,task_name:e.name,version:a.version||"",category:e.category,modality:e.modality,authors:e.authors,tags:e.tags,input_types:e.input_types,docs_info:e.docs_info||""}}var Pn={exports:{}};(function(a,e){(function(s,t){a.exports=t()})(zi,function(){class s{constructor(n){n||(n={}),this.main=n.main||"ss-main",this.placeholder=n.placeholder||"ss-placeholder",this.values=n.values||"ss-values",this.single=n.single||"ss-single",this.max=n.max||"ss-max",this.value=n.value||"ss-value",this.valueText=n.valueText||"ss-value-text",this.valueDelete=n.valueDelete||"ss-value-delete",this.valueOut=n.valueOut||"ss-value-out",this.deselect=n.deselect||"ss-deselect",this.deselectPath=n.deselectPath||"M10,10 L90,90 M10,90 L90,10",this.arrow=n.arrow||"ss-arrow",this.arrowClose=n.arrowClose||"M10,30 L50,70 L90,30",this.arrowOpen=n.arrowOpen||"M10,70 L50,30 L90,70",this.content=n.content||"ss-content",this.openAbove=n.openAbove||"ss-open-above",this.openBelow=n.openBelow||"ss-open-below",this.search=n.search||"ss-search",this.searchHighlighter=n.searchHighlighter||"ss-search-highlight",this.searching=n.searching||"ss-searching",this.addable=n.addable||"ss-addable",this.addablePath=n.addablePath||"M50,10 L50,90 M10,50 L90,50",this.list=n.list||"ss-list",this.optgroup=n.optgroup||"ss-optgroup",this.optgroupLabel=n.optgroupLabel||"ss-optgroup-label",this.optgroupLabelText=n.optgroupLabelText||"ss-optgroup-label-text",this.optgroupActions=n.optgroupActions||"ss-optgroup-actions",this.optgroupSelectAll=n.optgroupSelectAll||"ss-selectall",this.optgroupSelectAllBox=n.optgroupSelectAllBox||"M60,10 L10,10 L10,90 L90,90 L90,50",this.optgroupSelectAllCheck=n.optgroupSelectAllCheck||"M30,45 L50,70 L90,10",this.optgroupClosable=n.optgroupClosable||"ss-closable",this.option=n.option||"ss-option",this.optionDelete=n.optionDelete||"M10,10 L90,90 M10,90 L90,10",this.highlighted=n.highlighted||"ss-highlighted",this.open=n.open||"ss-open",this.close=n.close||"ss-close",this.selected=n.selected||"ss-selected",this.error=n.error||"ss-error",this.disabled=n.disabled||"ss-disabled",this.hide=n.hide||"ss-hide"}}function t(){return Math.random().toString(36).substring(2,10)}function i(C,n){function o(u,m){return m&&u&&u.classList&&u.classList.contains(m)||m&&u&&u.dataset&&u.dataset.id&&u.dataset.id===n?u:null}function d(u,m){return!u||u===document?null:o(u,m)?u:d(u.parentNode,m)}return o(C,n)||d(C,n)}function l(C,n=50,o=!1){let d;return function(...u){const m=self,y=()=>{d=null,o||C.apply(m,u)},b=o&&!d;clearTimeout(d),d=setTimeout(y,n),b&&C.apply(m,u)}}function r(C,n){return JSON.stringify(C)===JSON.stringify(n)}function p(C){const n=C.replace(/[A-Z\u00C0-\u00D6\u00D8-\u00DE]/g,o=>"-"+o.toLowerCase());return C[0]===C[0].toUpperCase()?n.substring(1):n}class c{constructor(n){if(this.id=!n.id||n.id===""?t():n.id,this.label=n.label||"",this.selectAll=n.selectAll===void 0?!1:n.selectAll,this.selectAllText=n.selectAllText||"Select All",this.closable=n.closable||"off",this.options=[],n.options)for(const o of n.options)this.options.push(new h(o))}}class h{constructor(n){this.id=!n.id||n.id===""?t():n.id,this.value=n.value===void 0?n.text:n.value,this.text=n.text||"",this.html=n.html||"",this.selected=n.selected!==void 0?n.selected:!1,this.display=n.display!==void 0?n.display:!0,this.disabled=n.disabled!==void 0?n.disabled:!1,this.mandatory=n.mandatory!==void 0?n.mandatory:!1,this.placeholder=n.placeholder!==void 0?n.placeholder:!1,this.class=n.class||"",this.style=n.style||"",this.data=n.data||{}}}class g{constructor(n,o){this.selectType="single",this.data=[],this.selectedOrder=[],this.selectType=n,this.setData(o)}validateDataArray(n){if(!Array.isArray(n))return new Error("Data must be an array");for(let o of n)if(o instanceof c||"label"in o){if(!("label"in o))return new Error("Optgroup must have a label");if("options"in o&&o.options)for(let d of o.options){const u=this.validateOption(d);if(u)return u}}else if(o instanceof h||"text"in o){const d=this.validateOption(o);if(d)return d}else return new Error("Data object must be a valid optgroup or option");return null}validateOption(n){return"text"in n?null:new Error("Option must have a text")}partialToFullData(n){let o=[];return n.forEach(d=>{if(d instanceof c||"label"in d){let u=[];"options"in d&&d.options&&d.options.forEach(m=>{u.push(new h(m))}),u.length>0&&o.push(new c(d))}(d instanceof h||"text"in d)&&o.push(new h(d))}),o}setData(n){this.data=this.partialToFullData(n),this.selectType==="single"&&this.setSelectedBy("id",this.getSelected())}getData(){return this.filter(null,!0)}getDataOptions(){return this.filter(null,!1)}addOption(n,o=!1){if(o){let d=[new h(n)];this.setData(d.concat(this.getData()))}else this.setData(this.getData().concat(new h(n)))}setSelectedBy(n,o){let d=null,u=!1;const m=[];for(let b of this.data){if(b instanceof c)for(let E of b.options)d||(d=E),E.selected=u?!1:o.includes(E[n]),E.selected&&(m.push(E),this.selectType==="single"&&(u=!0));b instanceof h&&(d||(d=b),b.selected=u?!1:o.includes(b[n]),b.selected&&(m.push(b),this.selectType==="single"&&(u=!0)))}this.selectType==="single"&&d&&!u&&(d.selected=!0,m.push(d));const y=o.map(b=>{var E;return((E=m.find(x=>x[n]===b))===null||E===void 0?void 0:E.id)||""});this.selectedOrder=y}getSelected(){return this.getSelectedOptions().map(n=>n.id)}getSelectedValues(){return this.getSelectedOptions().map(n=>n.value)}getSelectedOptions(){return this.filter(n=>n.selected,!1)}getOptgroupByID(n){for(let o of this.data)if(o instanceof c&&o.id===n)return o;return null}getOptionByID(n){let o=this.filter(d=>d.id===n,!1);return o.length?o[0]:null}getSelectType(){return this.selectType}getFirstOption(){let n=null;for(let o of this.data)if(o instanceof c?n=o.options[0]:o instanceof h&&(n=o),n)break;return n}search(n,o){return n=n.trim(),n===""?this.getData():this.filter(d=>o(d,n),!0)}filter(n,o){const d=[];return this.data.forEach(u=>{if(u instanceof c){let m=[];if(u.options.forEach(y=>{(!n||n(y))&&(o?m.push(new h(y)):d.push(new h(y)))}),m.length>0){let y=new c(u);y.options=m,d.push(y)}}u instanceof h&&(!n||n(u))&&d.push(new h(u))}),d}selectedOrderOptions(n){const o=[];return this.selectedOrder.forEach(d=>{const u=n.find(m=>m.id===d);u&&o.push(u)}),n.forEach(d=>{let u=!1;o.forEach(m=>{if(d.id===m.id){u=!0;return}}),u||o.push(d)}),o}}class _{constructor(n,o,d,u){this.store=d,this.settings=n,this.classes=o,this.callbacks=u,this.main=this.mainDiv(),this.content=this.contentDiv(),this.updateClassStyles(),this.updateAriaAttributes(),this.settings.contentLocation&&this.settings.contentLocation.appendChild(this.content.main)}enable(){this.main.main.classList.remove(this.classes.disabled),this.content.search.input.disabled=!1}disable(){this.main.main.classList.add(this.classes.disabled),this.content.search.input.disabled=!0}open(){this.main.arrow.path.setAttribute("d",this.classes.arrowOpen),this.main.main.classList.add(this.settings.openPosition==="up"?this.classes.openAbove:this.classes.openBelow),this.main.main.setAttribute("aria-expanded","true"),this.moveContent();const n=this.store.getSelectedOptions();if(n.length){const o=n[n.length-1].id,d=this.content.list.querySelector('[data-id="'+o+'"]');d&&this.ensureElementInView(this.content.list,d)}}close(){this.main.main.classList.remove(this.classes.openAbove),this.main.main.classList.remove(this.classes.openBelow),this.main.main.setAttribute("aria-expanded","false"),this.content.main.classList.remove(this.classes.openAbove),this.content.main.classList.remove(this.classes.openBelow),this.main.arrow.path.setAttribute("d",this.classes.arrowClose)}updateClassStyles(){if(this.main.main.className="",this.main.main.removeAttribute("style"),this.content.main.className="",this.content.main.removeAttribute("style"),this.main.main.classList.add(this.classes.main),this.content.main.classList.add(this.classes.content),this.settings.style!==""&&(this.main.main.style.cssText=this.settings.style,this.content.main.style.cssText=this.settings.style),this.settings.class.length)for(const n of this.settings.class)n.trim()!==""&&(this.main.main.classList.add(n.trim()),this.content.main.classList.add(n.trim()));(this.settings.contentPosition==="relative"||this.settings.contentPosition==="fixed")&&this.content.main.classList.add("ss-"+this.settings.contentPosition)}updateAriaAttributes(){this.main.main.role="combobox",this.main.main.setAttribute("aria-haspopup","listbox"),this.main.main.setAttribute("aria-controls",this.content.main.id),this.main.main.setAttribute("aria-expanded","false"),this.content.main.setAttribute("role","listbox")}mainDiv(){var n;const o=document.createElement("div");o.dataset.id=this.settings.id,o.setAttribute("aria-label",this.settings.ariaLabel),o.tabIndex=0,o.onkeydown=N=>{switch(N.key){case"ArrowUp":case"ArrowDown":return this.callbacks.open(),N.key==="ArrowDown"?this.highlight("down"):this.highlight("up"),!1;case"Tab":return this.callbacks.close(),!0;case"Enter":case" ":this.callbacks.open();const M=this.content.list.querySelector("."+this.classes.highlighted);return M&&M.click(),!1;case"Escape":return this.callbacks.close(),!1}return N.key.length===1&&this.callbacks.open(),!0},o.onclick=N=>{this.settings.disabled||(this.settings.isOpen?this.callbacks.close():this.callbacks.open())};const d=document.createElement("div");d.classList.add(this.classes.values),o.appendChild(d);const u=document.createElement("div");u.classList.add(this.classes.deselect);const m=(n=this.store)===null||n===void 0?void 0:n.getSelectedOptions();!this.settings.allowDeselect||this.settings.isMultiple&&m&&m.length<=0?u.classList.add(this.classes.hide):u.classList.remove(this.classes.hide),u.onclick=N=>{if(N.stopPropagation(),this.settings.disabled)return;let M=!0;const G=this.store.getSelectedOptions(),Y=[];if(this.callbacks.beforeChange&&(M=this.callbacks.beforeChange(Y,G)===!0),M){if(this.settings.isMultiple)this.callbacks.setSelected([],!1),this.updateDeselectAll();else{const j=this.store.getFirstOption(),X=j?j.id:"";this.callbacks.setSelected(X,!1)}this.settings.closeOnSelect&&this.callbacks.close(),this.callbacks.afterChange&&this.callbacks.afterChange(this.store.getSelectedOptions())}};const y=document.createElementNS("http://www.w3.org/2000/svg","svg");y.setAttribute("viewBox","0 0 100 100");const b=document.createElementNS("http://www.w3.org/2000/svg","path");b.setAttribute("d",this.classes.deselectPath),y.appendChild(b),u.appendChild(y),o.appendChild(u);const E=document.createElementNS("http://www.w3.org/2000/svg","svg");E.classList.add(this.classes.arrow),E.setAttribute("viewBox","0 0 100 100");const x=document.createElementNS("http://www.w3.org/2000/svg","path");return x.setAttribute("d",this.classes.arrowClose),this.settings.alwaysOpen&&E.classList.add(this.classes.hide),E.appendChild(x),o.appendChild(E),{main:o,values:d,deselect:{main:u,svg:y,path:b},arrow:{main:E,path:x}}}mainFocus(n){n!=="click"&&this.main.main.focus({preventScroll:!0})}placeholder(){const n=this.store.filter(u=>u.placeholder,!1);let o=this.settings.placeholderText;n.length&&(n[0].html!==""?o=n[0].html:n[0].text!==""&&(o=n[0].text));const d=document.createElement("div");return d.classList.add(this.classes.placeholder),d.innerHTML=o,d}renderValues(){if(!this.settings.isMultiple){this.renderSingleValue();return}this.renderMultipleValues(),this.updateDeselectAll()}renderSingleValue(){const n=this.store.filter(d=>d.selected&&!d.placeholder,!1),o=n.length>0?n[0]:null;if(!o)this.main.values.innerHTML=this.placeholder().outerHTML;else{const d=document.createElement("div");d.classList.add(this.classes.single),o.html?d.innerHTML=o.html:d.innerText=o.text,this.main.values.innerHTML=d.outerHTML}!this.settings.allowDeselect||!n.length?this.main.deselect.main.classList.add(this.classes.hide):this.main.deselect.main.classList.remove(this.classes.hide)}renderMultipleValues(){let n=this.main.values.childNodes,o=this.store.filter(u=>u.selected&&u.display,!1);if(o.length===0){this.main.values.innerHTML=this.placeholder().outerHTML;return}else{const u=this.main.values.querySelector("."+this.classes.placeholder);u&&u.remove()}if(o.length>this.settings.maxValuesShown){const u=document.createElement("div");u.classList.add(this.classes.max),u.textContent=this.settings.maxValuesMessage.replace("{number}",o.length.toString()),this.main.values.innerHTML=u.outerHTML;return}else{const u=this.main.values.querySelector("."+this.classes.max);u&&u.remove()}this.settings.keepOrder&&(o=this.store.selectedOrderOptions(o));let d=[];for(let u=0;u<n.length;u++){const m=n[u],y=m.getAttribute("data-id");y&&(o.filter(E=>E.id===y,!1).length||d.push(m))}for(const u of d)u.classList.add(this.classes.valueOut),setTimeout(()=>{this.main.values.hasChildNodes()&&this.main.values.contains(u)&&this.main.values.removeChild(u)},100);n=this.main.values.childNodes;for(let u=0;u<o.length;u++){let m=!0;for(let y=0;y<n.length;y++)o[u].id===String(n[y].dataset.id)&&(m=!1);m&&(this.settings.keepOrder?this.main.values.appendChild(this.multipleValue(o[u])):n.length===0?this.main.values.appendChild(this.multipleValue(o[u])):u===0?this.main.values.insertBefore(this.multipleValue(o[u]),n[u]):n[u-1].insertAdjacentElement("afterend",this.multipleValue(o[u])))}}multipleValue(n){const o=document.createElement("div");o.classList.add(this.classes.value),o.dataset.id=n.id;const d=document.createElement("div");if(d.classList.add(this.classes.valueText),d.textContent=n.text,o.appendChild(d),!n.mandatory){const u=document.createElement("div");u.classList.add(this.classes.valueDelete),u.onclick=b=>{if(b.preventDefault(),b.stopPropagation(),this.settings.disabled)return;let E=!0;const x=this.store.getSelectedOptions(),N=x.filter(M=>M.selected&&M.id!==n.id,!0);if(!(this.settings.minSelected&&N.length<this.settings.minSelected)&&(this.callbacks.beforeChange&&(E=this.callbacks.beforeChange(N,x)===!0),E)){let M=[];for(const G of N){if(G instanceof c)for(const Y of G.options)M.push(Y.id);G instanceof h&&M.push(G.id)}this.callbacks.setSelected(M,!1),this.settings.closeOnSelect&&this.callbacks.close(),this.callbacks.afterChange&&this.callbacks.afterChange(N),this.updateDeselectAll()}};const m=document.createElementNS("http://www.w3.org/2000/svg","svg");m.setAttribute("viewBox","0 0 100 100");const y=document.createElementNS("http://www.w3.org/2000/svg","path");y.setAttribute("d",this.classes.optionDelete),m.appendChild(y),u.appendChild(m),o.appendChild(u)}return o}contentDiv(){const n=document.createElement("div");n.dataset.id=this.settings.id;const o=this.searchDiv();n.appendChild(o.main);const d=this.listDiv();return n.appendChild(d),{main:n,search:o,list:d}}moveContent(){if(this.settings.contentPosition==="relative"){this.moveContentBelow();return}if(this.settings.openPosition==="down"){this.moveContentBelow();return}else if(this.settings.openPosition==="up"){this.moveContentAbove();return}this.putContent()==="up"?this.moveContentAbove():this.moveContentBelow()}searchDiv(){const n=document.createElement("div"),o=document.createElement("input"),d=document.createElement("div");n.classList.add(this.classes.search);const u={main:n,input:o};if(this.settings.showSearch||(n.classList.add(this.classes.hide),o.readOnly=!0),o.type="search",o.placeholder=this.settings.searchPlaceholder,o.tabIndex=-1,o.setAttribute("aria-label",this.settings.searchPlaceholder),o.setAttribute("autocapitalize","off"),o.setAttribute("autocomplete","off"),o.setAttribute("autocorrect","off"),o.oninput=l(m=>{this.callbacks.search(m.target.value)},100),o.onkeydown=m=>{switch(m.key){case"ArrowUp":case"ArrowDown":return m.key==="ArrowDown"?this.highlight("down"):this.highlight("up"),!1;case"Tab":return this.callbacks.close(),!0;case"Escape":return this.callbacks.close(),!1;case" ":const y=this.content.list.querySelector("."+this.classes.highlighted);return y?(y.click(),!1):!0;case"Enter":if(this.callbacks.addable)return d.click(),!1;{const b=this.content.list.querySelector("."+this.classes.highlighted);if(b)return b.click(),!1}return!0}return!0},n.appendChild(o),this.callbacks.addable){d.classList.add(this.classes.addable);const m=document.createElementNS("http://www.w3.org/2000/svg","svg");m.setAttribute("viewBox","0 0 100 100");const y=document.createElementNS("http://www.w3.org/2000/svg","path");y.setAttribute("d",this.classes.addablePath),m.appendChild(y),d.appendChild(m),d.onclick=b=>{if(b.preventDefault(),b.stopPropagation(),!this.callbacks.addable)return;const E=this.content.search.input.value.trim();if(E===""){this.content.search.input.focus();return}const x=M=>{let G=new h(M);if(this.callbacks.addOption(G),this.settings.isMultiple){let Y=this.store.getSelected();Y.push(G.id),this.callbacks.setSelected(Y,!0)}else this.callbacks.setSelected([G.id],!0);this.callbacks.search(""),this.settings.closeOnSelect&&setTimeout(()=>{this.callbacks.close()},100)},N=this.callbacks.addable(E);N===!1||N===void 0||N===null||(N instanceof Promise?N.then(M=>{typeof M=="string"?x({text:M,value:M}):N instanceof Error?this.renderError(N.message):x(M)}):typeof N=="string"?x({text:N,value:N}):N instanceof Error?this.renderError(N.message):x(N))},n.appendChild(d),u.addable={main:d,svg:m,path:y}}return u}searchFocus(){this.content.search.input.focus()}getOptions(n=!1,o=!1,d=!1){let u="."+this.classes.option;return n&&(u+=":not(."+this.classes.placeholder+")"),o&&(u+=":not(."+this.classes.disabled+")"),d&&(u+=":not(."+this.classes.hide+")"),Array.from(this.content.list.querySelectorAll(u))}highlight(n){const o=this.getOptions(!0,!0,!0);if(o.length===0)return;if(o.length===1&&!o[0].classList.contains(this.classes.highlighted)){o[0].classList.add(this.classes.highlighted);return}let d=!1;for(const u of o)u.classList.contains(this.classes.highlighted)&&(d=!0);if(!d){for(const u of o)if(u.classList.contains(this.classes.selected)){u.classList.add(this.classes.highlighted);break}}for(let u=0;u<o.length;u++)if(o[u].classList.contains(this.classes.highlighted)){const m=o[u];m.classList.remove(this.classes.highlighted);const y=m.parentElement;if(y&&y.classList.contains(this.classes.open)){const x=y.querySelector("."+this.classes.optgroupLabel);x&&x.click()}let b=o[n==="down"?u+1<o.length?u+1:0:u-1>=0?u-1:o.length-1];b.classList.add(this.classes.highlighted),this.ensureElementInView(this.content.list,b);const E=b.parentElement;if(E&&E.classList.contains(this.classes.close)){const x=E.querySelector("."+this.classes.optgroupLabel);x&&x.click()}return}o[n==="down"?0:o.length-1].classList.add(this.classes.highlighted),this.ensureElementInView(this.content.list,o[n==="down"?0:o.length-1])}listDiv(){const n=document.createElement("div");return n.classList.add(this.classes.list),n}renderError(n){this.content.list.innerHTML="";const o=document.createElement("div");o.classList.add(this.classes.error),o.textContent=n,this.content.list.appendChild(o)}renderSearching(){this.content.list.innerHTML="";const n=document.createElement("div");n.classList.add(this.classes.searching),n.textContent=this.settings.searchingText,this.content.list.appendChild(n)}renderOptions(n){if(this.content.list.innerHTML="",n.length===0){const o=document.createElement("div");o.classList.add(this.classes.search),this.callbacks.addable?o.innerHTML=this.settings.addableText.replace("{value}",this.content.search.input.value):o.innerHTML=this.settings.searchText,this.content.list.appendChild(o);return}this.settings.allowDeselect&&!this.settings.isMultiple&&(this.store.filter(d=>d.placeholder,!1).length||this.store.addOption(new h({text:"",value:"",selected:!1,placeholder:!0}),!0));for(const o of n){if(o instanceof c){const d=document.createElement("div");d.classList.add(this.classes.optgroup);const u=document.createElement("div");u.classList.add(this.classes.optgroupLabel),d.appendChild(u);const m=document.createElement("div");m.classList.add(this.classes.optgroupLabelText),m.textContent=o.label,u.appendChild(m);const y=document.createElement("div");if(y.classList.add(this.classes.optgroupActions),u.appendChild(y),this.settings.isMultiple&&o.selectAll){const b=document.createElement("div");b.classList.add(this.classes.optgroupSelectAll);let E=!0;for(const Y of o.options)if(!Y.selected){E=!1;break}E&&b.classList.add(this.classes.selected);const x=document.createElement("span");x.textContent=o.selectAllText,b.appendChild(x);const N=document.createElementNS("http://www.w3.org/2000/svg","svg");N.setAttribute("viewBox","0 0 100 100"),b.appendChild(N);const M=document.createElementNS("http://www.w3.org/2000/svg","path");M.setAttribute("d",this.classes.optgroupSelectAllBox),N.appendChild(M);const G=document.createElementNS("http://www.w3.org/2000/svg","path");G.setAttribute("d",this.classes.optgroupSelectAllCheck),N.appendChild(G),b.addEventListener("click",Y=>{Y.preventDefault(),Y.stopPropagation();const j=this.store.getSelected();if(E){const X=j.filter(ae=>{for(const se of o.options)if(ae===se.id)return!1;return!0});this.callbacks.setSelected(X,!0);return}else{const X=j.concat(o.options.map(ae=>ae.id));for(const ae of o.options)this.store.getOptionByID(ae.id)||this.callbacks.addOption(ae);this.callbacks.setSelected(X,!0);return}}),y.appendChild(b)}if(o.closable!=="off"){const b=document.createElement("div");b.classList.add(this.classes.optgroupClosable);const E=document.createElementNS("http://www.w3.org/2000/svg","svg");E.setAttribute("viewBox","0 0 100 100"),E.classList.add(this.classes.arrow),b.appendChild(E);const x=document.createElementNS("http://www.w3.org/2000/svg","path");E.appendChild(x),o.options.some(N=>N.selected)||this.content.search.input.value.trim()!==""?(b.classList.add(this.classes.open),x.setAttribute("d",this.classes.arrowOpen)):o.closable==="open"?(d.classList.add(this.classes.open),x.setAttribute("d",this.classes.arrowOpen)):o.closable==="close"&&(d.classList.add(this.classes.close),x.setAttribute("d",this.classes.arrowClose)),u.addEventListener("click",N=>{N.preventDefault(),N.stopPropagation(),d.classList.contains(this.classes.close)?(d.classList.remove(this.classes.close),d.classList.add(this.classes.open),x.setAttribute("d",this.classes.arrowOpen)):(d.classList.remove(this.classes.open),d.classList.add(this.classes.close),x.setAttribute("d",this.classes.arrowClose))}),y.appendChild(b)}d.appendChild(u);for(const b of o.options)d.appendChild(this.option(b));this.content.list.appendChild(d)}o instanceof h&&this.content.list.appendChild(this.option(o))}}option(n){if(n.placeholder){const d=document.createElement("div");return d.classList.add(this.classes.option),d.classList.add(this.classes.hide),d}const o=document.createElement("div");return o.dataset.id=n.id,o.classList.add(this.classes.option),o.setAttribute("role","option"),n.class&&n.class.split(" ").forEach(d=>{o.classList.add(d)}),n.style&&(o.style.cssText=n.style),this.settings.searchHighlight&&this.content.search.input.value.trim()!==""?o.innerHTML=this.highlightText(n.html!==""?n.html:n.text,this.content.search.input.value,this.classes.searchHighlighter):n.html!==""?o.innerHTML=n.html:o.textContent=n.text,this.settings.showOptionTooltips&&o.textContent&&o.setAttribute("title",o.textContent),n.display||o.classList.add(this.classes.hide),n.disabled&&o.classList.add(this.classes.disabled),n.selected&&this.settings.hideSelected&&o.classList.add(this.classes.hide),n.selected?(o.classList.add(this.classes.selected),o.setAttribute("aria-selected","true"),this.main.main.setAttribute("aria-activedescendant",o.id)):(o.classList.remove(this.classes.selected),o.setAttribute("aria-selected","false")),o.addEventListener("click",d=>{d.preventDefault(),d.stopPropagation();const u=this.store.getSelected(),m=d.currentTarget,y=String(m.dataset.id);if(n.disabled||n.selected&&!this.settings.allowDeselect||this.settings.isMultiple&&this.settings.maxSelected<=u.length&&!n.selected||this.settings.isMultiple&&this.settings.minSelected>=u.length&&n.selected)return;let b=!1;const E=this.store.getSelectedOptions();let x=[];this.settings.isMultiple&&(n.selected?x=E.filter(N=>N.id!==y):x=E.concat(n)),this.settings.isMultiple||(n.selected?x=[]:x=[n]),this.callbacks.beforeChange||(b=!0),this.callbacks.beforeChange&&(this.callbacks.beforeChange(x,E)===!1?b=!1:b=!0),b&&(this.store.getOptionByID(y)||this.callbacks.addOption(n),this.callbacks.setSelected(x.map(N=>N.id),!1),this.settings.closeOnSelect&&this.callbacks.close(),this.callbacks.afterChange&&this.callbacks.afterChange(x))}),o}destroy(){this.main.main.remove(),this.content.main.remove()}highlightText(n,o,d){let u=n;const m=new RegExp("(?![^<]*>)("+o.trim()+")(?![^<]*>[^<>]*</)","i");if(!n.match(m))return n;const y=n.match(m).index,b=y+n.match(m)[0].toString().length,E=n.substring(y,b);return u=u.replace(m,`<mark class="${d}">${E}</mark>`),u}moveContentAbove(){const n=this.main.main.offsetHeight,o=this.content.main.offsetHeight;this.main.main.classList.remove(this.classes.openBelow),this.main.main.classList.add(this.classes.openAbove),this.content.main.classList.remove(this.classes.openBelow),this.content.main.classList.add(this.classes.openAbove);const d=this.main.main.getBoundingClientRect();this.content.main.style.margin="-"+(n+o-1)+"px 0px 0px 0px",this.content.main.style.top=d.top+d.height+(this.settings.contentPosition==="fixed"?0:window.scrollY)+"px",this.content.main.style.left=d.left+(this.settings.contentPosition==="fixed"?0:window.scrollX)+"px",this.content.main.style.width=d.width+"px"}moveContentBelow(){this.main.main.classList.remove(this.classes.openAbove),this.main.main.classList.add(this.classes.openBelow),this.content.main.classList.remove(this.classes.openAbove),this.content.main.classList.add(this.classes.openBelow);const n=this.main.main.getBoundingClientRect();this.content.main.style.margin="-1px 0px 0px 0px",this.settings.contentPosition!=="relative"&&(this.content.main.style.top=n.top+n.height+(this.settings.contentPosition==="fixed"?0:window.scrollY)+"px",this.content.main.style.left=n.left+(this.settings.contentPosition==="fixed"?0:window.scrollX)+"px",this.content.main.style.width=n.width+"px")}ensureElementInView(n,o){const d=n.scrollTop+n.offsetTop,u=d+n.clientHeight,m=o.offsetTop,y=m+o.clientHeight;m<d?n.scrollTop-=d-m:y>u&&(n.scrollTop+=y-u)}putContent(){const n=this.main.main.offsetHeight,o=this.main.main.getBoundingClientRect(),d=this.content.main.offsetHeight;return window.innerHeight-(o.top+n)<=d&&o.top>d?"up":"down"}updateDeselectAll(){if(!this.store||!this.settings)return;const n=this.store.getSelectedOptions(),o=n&&n.length>0,d=this.settings.isMultiple,u=this.settings.allowDeselect,m=this.main.deselect.main,y=this.classes.hide;u&&!(d&&!o)?m.classList.remove(y):m.classList.add(y)}}class k{constructor(n){this.listen=!1,this.observer=null,this.select=n,this.valueChange=this.valueChange.bind(this),this.select.addEventListener("change",this.valueChange,{passive:!0}),this.observer=new MutationObserver(this.observeCall.bind(this)),this.changeListen(!0)}enable(){this.select.disabled=!1}disable(){this.select.disabled=!0}hideUI(){this.select.tabIndex=-1,this.select.style.display="none",this.select.setAttribute("aria-hidden","true")}showUI(){this.select.removeAttribute("tabindex"),this.select.style.display="",this.select.removeAttribute("aria-hidden")}changeListen(n){this.listen=n,n&&this.observer&&this.observer.observe(this.select,{subtree:!0,childList:!0,attributes:!0}),n||this.observer&&this.observer.disconnect()}valueChange(n){return this.listen&&this.onValueChange&&this.onValueChange(this.getSelectedOptions()),!0}observeCall(n){if(!this.listen)return;let o=!1,d=!1,u=!1;for(const m of n){if(m.target===this.select&&(m.attributeName==="disabled"&&(d=!0),m.attributeName==="class"&&(o=!0),m.type==="childList")){for(const y of m.addedNodes)if(y.nodeName==="OPTION"&&y.value===this.select.value){this.select.dispatchEvent(new Event("change"));break}u=!0}(m.target.nodeName==="OPTGROUP"||m.target.nodeName==="OPTION")&&(u=!0)}o&&this.onClassChange&&this.onClassChange(this.select.className.split(" ")),d&&this.onDisabledChange&&(this.changeListen(!1),this.onDisabledChange(this.select.disabled),this.changeListen(!0)),u&&this.onOptionsChange&&(this.changeListen(!1),this.onOptionsChange(this.getData()),this.changeListen(!0))}getData(){let n=[];const o=this.select.childNodes;for(const d of o)d.nodeName==="OPTGROUP"&&n.push(this.getDataFromOptgroup(d)),d.nodeName==="OPTION"&&n.push(this.getDataFromOption(d));return n}getDataFromOptgroup(n){let o={id:n.id,label:n.label,selectAll:n.dataset?n.dataset.selectall==="true":!1,selectAllText:n.dataset?n.dataset.selectalltext:"Select all",closable:n.dataset?n.dataset.closable:"off",options:[]};const d=n.childNodes;for(const u of d)u.nodeName==="OPTION"&&o.options.push(this.getDataFromOption(u));return o}getDataFromOption(n){return{id:n.id,value:n.value,text:n.text,html:n.dataset&&n.dataset.html?n.dataset.html:"",selected:n.selected,display:n.style.display!=="none",disabled:n.disabled,mandatory:n.dataset?n.dataset.mandatory==="true":!1,placeholder:n.dataset.placeholder==="true",class:n.className,style:n.style.cssText,data:n.dataset}}getSelectedOptions(){let n=[];const o=this.select.childNodes;for(const d of o){if(d.nodeName==="OPTGROUP"){const u=d.childNodes;for(const m of u)if(m.nodeName==="OPTION"){const y=m;y.selected&&n.push(this.getDataFromOption(y))}}if(d.nodeName==="OPTION"){const u=d;u.selected&&n.push(this.getDataFromOption(u))}}return n}getSelectedValues(){return this.getSelectedOptions().map(n=>n.value)}setSelected(n){this.changeListen(!1);const o=this.select.childNodes;for(const d of o){if(d.nodeName==="OPTGROUP"){const m=d.childNodes;for(const y of m)if(y.nodeName==="OPTION"){const b=y;b.selected=n.includes(b.id)}}if(d.nodeName==="OPTION"){const u=d;u.selected=n.includes(u.id)}}this.changeListen(!0)}setSelectedByValue(n){this.changeListen(!1);const o=this.select.childNodes;for(const d of o){if(d.nodeName==="OPTGROUP"){const m=d.childNodes;for(const y of m)if(y.nodeName==="OPTION"){const b=y;b.selected=n.includes(b.value)}}if(d.nodeName==="OPTION"){const u=d;u.selected=n.includes(u.value)}}this.changeListen(!0)}updateSelect(n,o,d){this.changeListen(!1),n&&(this.select.dataset.id=n),o&&(this.select.style.cssText=o),d&&(this.select.className="",d.forEach(u=>{u.trim()!==""&&this.select.classList.add(u.trim())})),this.changeListen(!0)}updateOptions(n){this.changeListen(!1),this.select.innerHTML="";for(const o of n)o instanceof c&&this.select.appendChild(this.createOptgroup(o)),o instanceof h&&this.select.appendChild(this.createOption(o));this.select.dispatchEvent(new Event("change",{bubbles:!0})),this.changeListen(!0)}createOptgroup(n){const o=document.createElement("optgroup");if(o.id=n.id,o.label=n.label,n.selectAll&&(o.dataset.selectAll="true"),n.closable!=="off"&&(o.dataset.closable=n.closable),n.options)for(const d of n.options)o.appendChild(this.createOption(d));return o}createOption(n){const o=document.createElement("option");return o.id=n.id,o.value=n.value,o.textContent=n.text,n.html!==""&&o.setAttribute("data-html",n.html),n.selected&&(o.selected=n.selected),n.disabled&&(o.disabled=!0),n.display||(o.style.display="none"),n.placeholder&&o.setAttribute("data-placeholder","true"),n.mandatory&&o.setAttribute("data-mandatory","true"),n.class&&n.class.split(" ").forEach(d=>{o.classList.add(d)}),n.data&&typeof n.data=="object"&&Object.keys(n.data).forEach(d=>{o.setAttribute("data-"+p(d),n.data[d])}),o}destroy(){this.changeListen(!1),this.select.removeEventListener("change",this.valueChange),this.observer&&(this.observer.disconnect(),this.observer=null),delete this.select.dataset.id,this.showUI()}}class v{constructor(n){this.id="",this.style="",this.class=[],this.isMultiple=!1,this.isOpen=!1,this.isFullOpen=!1,this.intervalMove=null,n||(n={}),this.id="ss-"+t(),this.style=n.style||"",this.class=n.class||[],this.disabled=n.disabled!==void 0?n.disabled:!1,this.alwaysOpen=n.alwaysOpen!==void 0?n.alwaysOpen:!1,this.showSearch=n.showSearch!==void 0?n.showSearch:!0,this.focusSearch=n.focusSearch!==void 0?n.focusSearch:!0,this.ariaLabel=n.ariaLabel||"Combobox",this.searchPlaceholder=n.searchPlaceholder||"Search",this.searchText=n.searchText||"No Results",this.searchingText=n.searchingText||"Searching...",this.searchHighlight=n.searchHighlight!==void 0?n.searchHighlight:!1,this.closeOnSelect=n.closeOnSelect!==void 0?n.closeOnSelect:!0,this.contentLocation=n.contentLocation||document.body,this.contentPosition=n.contentPosition||"absolute",this.openPosition=n.openPosition||"auto",this.placeholderText=n.placeholderText!==void 0?n.placeholderText:"Select Value",this.allowDeselect=n.allowDeselect!==void 0?n.allowDeselect:!1,this.hideSelected=n.hideSelected!==void 0?n.hideSelected:!1,this.keepOrder=n.keepOrder!==void 0?n.keepOrder:!1,this.showOptionTooltips=n.showOptionTooltips!==void 0?n.showOptionTooltips:!1,this.minSelected=n.minSelected||0,this.maxSelected=n.maxSelected||1e3,this.timeoutDelay=n.timeoutDelay||200,this.maxValuesShown=n.maxValuesShown||20,this.maxValuesMessage=n.maxValuesMessage||"{number} selected",this.addableText=n.addableText||'Press "Enter" to add {value}'}}class w{constructor(n){var o;if(this.events={search:void 0,searchFilter:(b,E)=>b.text.toLowerCase().indexOf(E.toLowerCase())!==-1,addable:void 0,beforeChange:void 0,afterChange:void 0,beforeOpen:void 0,afterOpen:void 0,beforeClose:void 0,afterClose:void 0},this.windowResize=l(()=>{!this.settings.isOpen&&!this.settings.isFullOpen||this.render.moveContent()}),this.windowScroll=l(()=>{!this.settings.isOpen&&!this.settings.isFullOpen||this.render.moveContent()}),this.documentClick=b=>{this.settings.isOpen&&b.target&&!i(b.target,this.settings.id)&&this.close(b.type)},this.windowVisibilityChange=()=>{document.hidden&&this.close()},this.selectEl=typeof n.select=="string"?document.querySelector(n.select):n.select,!this.selectEl){n.events&&n.events.error&&n.events.error(new Error("Could not find select element"));return}if(this.selectEl.tagName!=="SELECT"){n.events&&n.events.error&&n.events.error(new Error("Element isnt of type select"));return}this.selectEl.dataset.ssid&&this.destroy(),this.settings=new v(n.settings),this.cssClasses=new s(n.cssClasses);const d=["afterChange","beforeOpen","afterOpen","beforeClose","afterClose"];for(const b in n.events)n.events.hasOwnProperty(b)&&(d.indexOf(b)!==-1?this.events[b]=l(n.events[b],100):this.events[b]=n.events[b]);this.settings.disabled=!((o=n.settings)===null||o===void 0)&&o.disabled?n.settings.disabled:this.selectEl.disabled,this.settings.isMultiple=this.selectEl.multiple,this.settings.style=this.selectEl.style.cssText,this.settings.class=this.selectEl.className.split(" "),this.select=new k(this.selectEl),this.select.updateSelect(this.settings.id,this.settings.style,this.settings.class),this.select.hideUI(),this.select.onValueChange=b=>{this.setSelected(b.map(E=>E.id))},this.select.onClassChange=b=>{this.settings.class=b,this.render.updateClassStyles()},this.select.onDisabledChange=b=>{b?this.disable():this.enable()},this.select.onOptionsChange=b=>{this.setData(b)},this.store=new g(this.settings.isMultiple?"multiple":"single",n.data?n.data:this.select.getData()),n.data&&this.select.updateOptions(this.store.getData());const u={open:this.open.bind(this),close:this.close.bind(this),addable:this.events.addable?this.events.addable:void 0,setSelected:this.setSelected.bind(this),addOption:this.addOption.bind(this),search:this.search.bind(this),beforeChange:this.events.beforeChange,afterChange:this.events.afterChange};this.render=new _(this.settings,this.cssClasses,this.store,u),this.render.renderValues(),this.render.renderOptions(this.store.getData());const m=this.selectEl.getAttribute("aria-label"),y=this.selectEl.getAttribute("aria-labelledby");m?this.render.main.main.setAttribute("aria-label",m):y&&this.render.main.main.setAttribute("aria-labelledby",y),this.selectEl.parentNode&&this.selectEl.parentNode.insertBefore(this.render.main.main,this.selectEl.nextSibling),window.addEventListener("resize",this.windowResize,!1),this.settings.openPosition==="auto"&&window.addEventListener("scroll",this.windowScroll,!1),document.addEventListener("visibilitychange",this.windowVisibilityChange),this.settings.disabled&&this.disable(),this.settings.alwaysOpen&&this.open(),this.selectEl.slim=this}enable(){this.settings.disabled=!1,this.select.enable(),this.render.enable()}disable(){this.settings.disabled=!0,this.select.disable(),this.render.disable()}getData(){return this.store.getData()}setData(n){const o=this.store.getSelected(),d=this.store.validateDataArray(n);if(d){this.events.error&&this.events.error(d);return}this.store.setData(n);const u=this.store.getData();this.select.updateOptions(u),this.render.renderValues(),this.render.renderOptions(u),this.events.afterChange&&!r(o,this.store.getSelected())&&this.events.afterChange(this.store.getSelectedOptions())}getSelected(){let n=this.store.getSelectedOptions();return this.settings.keepOrder&&(n=this.store.selectedOrderOptions(n)),n.map(o=>o.value)}setSelected(n,o=!0){const d=this.store.getSelected(),u=this.store.getDataOptions();n=Array.isArray(n)?n:[n];const m=[];for(const b of n){if(u.find(E=>E.id==b)){m.push(b);continue}for(const E of u.filter(x=>x.value==b))m.push(E.id)}this.store.setSelectedBy("id",m);const y=this.store.getData();this.select.updateOptions(y),this.render.renderValues(),this.render.content.search.input.value!==""?this.search(this.render.content.search.input.value):this.render.renderOptions(y),o&&this.events.afterChange&&!r(d,this.store.getSelected())&&this.events.afterChange(this.store.getSelectedOptions())}addOption(n){const o=this.store.getSelected();this.store.getDataOptions().some(u=>{var m;return u.value===((m=n.value)!==null&&m!==void 0?m:n.text)})||this.store.addOption(n);const d=this.store.getData();this.select.updateOptions(d),this.render.renderValues(),this.render.renderOptions(d),this.events.afterChange&&!r(o,this.store.getSelected())&&this.events.afterChange(this.store.getSelectedOptions())}open(){this.settings.disabled||this.settings.isOpen||(this.events.beforeOpen&&this.events.beforeOpen(),this.render.open(),this.settings.showSearch&&this.settings.focusSearch&&this.render.searchFocus(),this.settings.isOpen=!0,setTimeout(()=>{this.events.afterOpen&&this.events.afterOpen(),this.settings.isOpen&&(this.settings.isFullOpen=!0),document.addEventListener("click",this.documentClick)},this.settings.timeoutDelay),this.settings.contentPosition==="absolute"&&(this.settings.intervalMove&&clearInterval(this.settings.intervalMove),this.settings.intervalMove=setInterval(this.render.moveContent.bind(this.render),500)))}close(n=null){!this.settings.isOpen||this.settings.alwaysOpen||(this.events.beforeClose&&this.events.beforeClose(),this.render.close(),this.render.content.search.input.value!==""&&this.search(""),this.render.mainFocus(n),this.settings.isOpen=!1,this.settings.isFullOpen=!1,setTimeout(()=>{this.events.afterClose&&this.events.afterClose(),document.removeEventListener("click",this.documentClick)},this.settings.timeoutDelay),this.settings.intervalMove&&clearInterval(this.settings.intervalMove))}search(n){if(this.render.content.search.input.value!==n&&(this.render.content.search.input.value=n),!this.events.search){this.render.renderOptions(n===""?this.store.getData():this.store.search(n,this.events.searchFilter));return}this.render.renderSearching();const o=this.events.search(n,this.store.getSelectedOptions());if(o instanceof Promise){o.then(d=>{this.render.renderOptions(this.store.partialToFullData(d))}).catch(d=>{this.render.renderError(typeof d=="string"?d:d.message)});return}else Array.isArray(o)?this.render.renderOptions(this.store.partialToFullData(o)):this.render.renderError("Search event must return a promise or an array of data")}destroy(){document.removeEventListener("click",this.documentClick),window.removeEventListener("resize",this.windowResize,!1),this.settings.openPosition==="auto"&&window.removeEventListener("scroll",this.windowScroll,!1),document.removeEventListener("visibilitychange",this.windowVisibilityChange),this.store.setData([]),this.render.destroy(),this.select.destroy()}}return w})})(Pn);var ua=Pn.exports;const pa=In(ua);function tn(a){let e,s;return{c(){e=z("span"),s=Ee(a[0]),this.h()},l(t){e=H(t,"SPAN",{style:!0,class:!0});var i=Z(e);s=Te(i,a[0]),i.forEach(L),this.h()},h(){Ns(e,"background-color",a[2](a[0])),F(e,"class","badge rounded-pill coloured-badge text-dark")},m(t,i){ce(t,e,i),S(e,s)},p(t,i){i&1&&Ie(s,t[0]),i&1&&Ns(e,"background-color",t[2](t[0]))},d(t){t&&L(e)}}}function da(a){let e,s=a[0]&&a[1]&&tn(a);return{c(){s&&s.c(),e=Se()},l(t){s&&s.l(t),e=Se()},m(t,i){s&&s.m(t,i),ce(t,e,i)},p(t,[i]){t[0]&&t[1]?s?s.p(t,i):(s=tn(t),s.c(),s.m(e.parentNode,e)):s&&(s.d(1),s=null)},i:Be,o:Be,d(t){t&&L(e),s&&s.d(t)}}}function fa(a,e,s){let{value:t}=e,i;function l(p){return new i({lightness:.8,saturation:.95}).hex(p)}let r=!1;return wn(async()=>{i=(await ti(async()=>{const{default:p}=await import("../chunks/esm.B-bOhdOb.js");return{default:p}},[],import.meta.url)).default,s(1,r=!0)}),a.$$set=p=>{"value"in p&&s(0,t=p.value)},[t,r,l]}class Fn extends Pt{constructor(e){super(),Ft(this,e,fa,da,Mt,{value:0})}}function ma(a){let e,s='<i class="bi bi-x"></i>';return{c(){e=z("span"),e.innerHTML=s,this.h()},l(t){e=H(t,"SPAN",{class:!0,"aria-checked":!0,"data-svelte-h":!0}),xe(e)!=="svelte-1og8rg0"&&(e.innerHTML=s),this.h()},h(){F(e,"class","text-danger boolean-icon svelte-1f3x2lj"),F(e,"aria-checked","false")},m(t,i){ce(t,e,i)},d(t){t&&L(e)}}}function ga(a){let e,s='<i class="bi bi-check"></i>';return{c(){e=z("span"),e.innerHTML=s,this.h()},l(t){e=H(t,"SPAN",{class:!0,"aria-checked":!0,"data-svelte-h":!0}),xe(e)!=="svelte-w4qkap"&&(e.innerHTML=s),this.h()},h(){F(e,"class","text-success boolean-icon svelte-1f3x2lj"),F(e,"aria-checked","true")},m(t,i){ce(t,e,i)},d(t){t&&L(e)}}}function _a(a){let e;function s(l,r){if(l[0]===!0)return ga;if(l[0]===!1)return ma}let t=s(a),i=t&&t(a);return{c(){i&&i.c(),e=Se()},l(l){i&&i.l(l),e=Se()},m(l,r){i&&i.m(l,r),ce(l,e,r)},p(l,[r]){t!==(t=s(l))&&(i&&i.d(1),i=t&&t(l),i&&(i.c(),i.m(e.parentNode,e)))},i:Be,o:Be,d(l){l&&L(e),i&&i.d(l)}}}function ba(a,e,s){let{value:t}=e;return a.$$set=i=>{"value"in i&&s(0,t=i.value)},[t]}class ka extends Pt{constructor(e){super(),Ft(this,e,ba,_a,Mt,{value:0})}}function sn(a,e,s){const t=a.slice();return t[35]=e[s],t}function nn(a,e,s){const t=a.slice();return t[38]=e[s],t[39]=e,t[40]=s,t}const wa=a=>({task:a[0]&2}),an=a=>({task:a[38].taskVersions[a[38].selectedVersion]}),ya=a=>({task:a[0]&2}),ln=a=>({task:a[38].taskVersions[a[38].selectedVersion]});function on(a,e,s){const t=a.slice();return t[41]=e[s],t}function rn(a,e,s){const t=a.slice();return t[44]=e[s][0],t[45]=e[s][1],t}const va=a=>({}),cn=a=>({});function Ea(a){let e,s,t,i,l,r,p=a[7][$n]+"",c,h,g,_="Category",k,v,w="Modality",C,n,o="Input Types",d,u,m="Metadata",y,b,E="Version",x,N,M,G,Y,j,X,ae,se,pe,ne=a[5]===1?"task":"tasks",I,D;const U=a[16]["extra-columns-header"],T=ss(U,a,a[15],cn);let R=He(a[1]),q=[];for(let B=0;B<R.length;B+=1)q[B]=gn(sn(a,R,B));const ie=B=>ue(q[B],1,1,()=>{q[B]=null});return{c(){e=z("div"),s=z("div"),t=z("table"),i=z("thead"),l=z("tr"),r=z("th"),c=Ee(p),h=oe(),g=z("th"),g.textContent=_,k=oe(),v=z("th"),v.textContent=w,C=oe(),n=z("th"),n.textContent=o,d=oe(),u=z("th"),u.textContent=m,y=oe(),b=z("th"),b.textContent=E,x=oe(),T&&T.c(),N=oe(),M=z("tbody");for(let B=0;B<q.length;B+=1)q[B].c();G=oe(),Y=z("p"),j=Ee("Showing "),X=Ee(a[6]),ae=Ee(" of "),se=Ee(a[5]),pe=oe(),I=Ee(ne),this.h()},l(B){e=H(B,"DIV",{class:!0});var J=Z(e);s=H(J,"DIV",{class:!0});var Q=Z(s);t=H(Q,"TABLE",{class:!0,id:!0});var Le=Z(t);i=H(Le,"THEAD",{});var nt=Z(i);l=H(nt,"TR",{});var fe=Z(l);r=H(fe,"TH",{class:!0});var Fe=Z(r);c=Te(Fe,p),Fe.forEach(L),h=re(fe),g=H(fe,"TH",{class:!0,"data-svelte-h":!0}),xe(g)!=="svelte-10ppr1q"&&(g.textContent=_),k=re(fe),v=H(fe,"TH",{class:!0,"data-svelte-h":!0}),xe(v)!=="svelte-slk3w9"&&(v.textContent=w),C=re(fe),n=H(fe,"TH",{class:!0,"data-svelte-h":!0}),xe(n)!=="svelte-udakd"&&(n.textContent=o),d=re(fe),u=H(fe,"TH",{class:!0,"data-svelte-h":!0}),xe(u)!=="svelte-v7n8cf"&&(u.textContent=m),y=re(fe),b=H(fe,"TH",{colspan:!0,class:!0,"data-svelte-h":!0}),xe(b)!=="svelte-hpno2d"&&(b.textContent=E),x=re(fe),T&&T.l(fe),fe.forEach(L),nt.forEach(L),N=re(Le),M=H(Le,"TBODY",{});var We=Z(M);for(let Ve=0;Ve<q.length;Ve+=1)q[Ve].l(We);We.forEach(L),Le.forEach(L),Q.forEach(L),J.forEach(L),G=re(B),Y=H(B,"P",{class:!0});var be=Z(Y);j=Te(be,"Showing "),X=Te(be,a[6]),ae=Te(be," of "),se=Te(be,a[5]),pe=re(be),I=Te(be,ne),be.forEach(L),this.h()},h(){F(r,"class","svelte-v3mpfp"),F(g,"class","svelte-v3mpfp"),F(v,"class","svelte-v3mpfp"),F(n,"class","svelte-v3mpfp"),F(u,"class","svelte-v3mpfp"),F(b,"colspan","2"),F(b,"class","svelte-v3mpfp"),F(t,"class","table table-borderless svelte-v3mpfp"),F(t,"id","filtered-tasks-table"),F(s,"class","card-body p-0"),F(e,"class","card"),F(Y,"class","mt-3 text-center mb-0")},m(B,J){ce(B,e,J),S(e,s),S(s,t),S(t,i),S(i,l),S(l,r),S(r,c),S(l,h),S(l,g),S(l,k),S(l,v),S(l,C),S(l,n),S(l,d),S(l,u),S(l,y),S(l,b),S(l,x),T&&T.m(l,null),S(t,N),S(t,M);for(let Q=0;Q<q.length;Q+=1)q[Q]&&q[Q].m(M,null);ce(B,G,J),ce(B,Y,J),S(Y,j),S(Y,X),S(Y,ae),S(Y,se),S(Y,pe),S(Y,I),D=!0},p(B,J){if(T&&T.p&&(!D||J[0]&32768)&&ns(T,U,B,B[15],D?as(U,B[15],J,va):is(B[15]),cn),J[0]&32794){R=He(B[1]);let Q;for(Q=0;Q<R.length;Q+=1){const Le=sn(B,R,Q);q[Q]?(q[Q].p(Le,J),le(q[Q],1)):(q[Q]=gn(Le),q[Q].c(),le(q[Q],1),q[Q].m(M,null))}for(Ge(),Q=R.length;Q<q.length;Q+=1)ie(Q);je()}(!D||J[0]&64)&&Ie(X,B[6]),(!D||J[0]&32)&&Ie(se,B[5]),(!D||J[0]&32)&&ne!==(ne=B[5]===1?"task":"tasks")&&Ie(I,ne)},i(B){if(!D){le(T,B);for(let J=0;J<R.length;J+=1)le(q[J]);D=!0}},o(B){ue(T,B),q=q.filter(Boolean);for(let J=0;J<q.length;J+=1)ue(q[J]);D=!1},d(B){B&&(L(e),L(G),L(Y)),T&&T.d(B),$t(q,B)}}}function Ta(a){let e,s=`There are no available tasks. You can add new tasks on the
		<a href="/v2/tasks/management">Tasks management</a> page.`;return{c(){e=z("p"),e.innerHTML=s},l(t){e=H(t,"P",{"data-svelte-h":!0}),xe(e)!=="svelte-1jz05g4"&&(e.innerHTML=s)},m(t,i){ce(t,e,i)},p:Be,i:Be,o:Be,d(t){t&&L(e)}}}function hn(a){let e,s,t=a[38].taskVersions[a[38].selectedVersion].task_name+"",i,l,r,p,c,h,g,_,k,v=bn(a[38].taskVersions[a[38].selectedVersion])+"",w,C,n,o,d,u,m,y,b,E=a[38].taskVersions[a[38].selectedVersion].category&&un(a),x=a[38].taskVersions[a[38].selectedVersion].modality&&pn(a),N=He(Object.entries(a[38].taskVersions[a[38].selectedVersion].input_types)),M=[];for(let I=0;I<N.length;I+=1)M[I]=dn(rn(a,N,I));const G=I=>ue(M[I],1,1,()=>{M[I]=null});function Y(I,D){return D[0]&2&&(o=null),o==null&&(o=Object.keys(I[38].taskVersions).length>1),o?xa:Oa}let j=Y(a,[-1,-1]),X=j(a);const ae=a[16]["docs-info"],se=ss(ae,a,a[15],ln),pe=a[16]["extra-columns"],ne=ss(pe,a,a[15],an);return{c(){e=z("tr"),s=z("td"),i=Ee(t),l=oe(),r=z("td"),E&&E.c(),p=oe(),c=z("td"),x&&x.c(),h=oe(),g=z("td");for(let I=0;I<M.length;I+=1)M[I].c();_=oe(),k=z("td"),w=Ee(v),C=oe(),n=z("td"),X.c(),d=oe(),u=z("td"),se&&se.c(),m=oe(),ne&&ne.c(),y=oe(),this.h()},l(I){e=H(I,"TR",{});var D=Z(e);s=H(D,"TD",{class:!0});var U=Z(s);i=Te(U,t),U.forEach(L),l=re(D),r=H(D,"TD",{class:!0});var T=Z(r);E&&E.l(T),T.forEach(L),p=re(D),c=H(D,"TD",{class:!0});var R=Z(c);x&&x.l(R),R.forEach(L),h=re(D),g=H(D,"TD",{class:!0});var q=Z(g);for(let Q=0;Q<M.length;Q+=1)M[Q].l(q);q.forEach(L),_=re(D),k=H(D,"TD",{class:!0});var ie=Z(k);w=Te(ie,v),ie.forEach(L),C=re(D),n=H(D,"TD",{class:!0});var B=Z(n);X.l(B),B.forEach(L),d=re(D),u=H(D,"TD",{class:!0});var J=Z(u);se&&se.l(J),J.forEach(L),m=re(D),ne&&ne.l(D),y=re(D),D.forEach(L),this.h()},h(){F(s,"class","task-name-col svelte-v3mpfp"),F(r,"class","svelte-v3mpfp"),F(c,"class","svelte-v3mpfp"),F(g,"class","metadata-col svelte-v3mpfp"),F(k,"class","metadata-col svelte-v3mpfp"),F(n,"class","version-col svelte-v3mpfp"),F(u,"class","docs-info-col svelte-v3mpfp")},m(I,D){ce(I,e,D),S(e,s),S(s,i),S(e,l),S(e,r),E&&E.m(r,null),S(e,p),S(e,c),x&&x.m(c,null),S(e,h),S(e,g);for(let U=0;U<M.length;U+=1)M[U]&&M[U].m(g,null);S(e,_),S(e,k),S(k,w),S(e,C),S(e,n),X.m(n,null),S(e,d),S(e,u),se&&se.m(u,null),S(e,m),ne&&ne.m(e,null),S(e,y),b=!0},p(I,D){if((!b||D[0]&2)&&t!==(t=I[38].taskVersions[I[38].selectedVersion].task_name+"")&&Ie(i,t),I[38].taskVersions[I[38].selectedVersion].category?E?(E.p(I,D),D[0]&2&&le(E,1)):(E=un(I),E.c(),le(E,1),E.m(r,null)):E&&(Ge(),ue(E,1,1,()=>{E=null}),je()),I[38].taskVersions[I[38].selectedVersion].modality?x?(x.p(I,D),D[0]&2&&le(x,1)):(x=pn(I),x.c(),le(x,1),x.m(c,null)):x&&(Ge(),ue(x,1,1,()=>{x=null}),je()),D[0]&2){N=He(Object.entries(I[38].taskVersions[I[38].selectedVersion].input_types));let U;for(U=0;U<N.length;U+=1){const T=rn(I,N,U);M[U]?(M[U].p(T,D),le(M[U],1)):(M[U]=dn(T),M[U].c(),le(M[U],1),M[U].m(g,null))}for(Ge(),U=N.length;U<M.length;U+=1)G(U);je()}(!b||D[0]&2)&&v!==(v=bn(I[38].taskVersions[I[38].selectedVersion])+"")&&Ie(w,v),j===(j=Y(I,D))&&X?X.p(I,D):(X.d(1),X=j(I),X&&(X.c(),X.m(n,null))),se&&se.p&&(!b||D[0]&32770)&&ns(se,ae,I,I[15],b?as(ae,I[15],D,ya):is(I[15]),ln),ne&&ne.p&&(!b||D[0]&32770)&&ns(ne,pe,I,I[15],b?as(pe,I[15],D,wa):is(I[15]),an)},i(I){if(!b){le(E),le(x);for(let D=0;D<N.length;D+=1)le(M[D]);le(se,I),le(ne,I),b=!0}},o(I){ue(E),ue(x),M=M.filter(Boolean);for(let D=0;D<M.length;D+=1)ue(M[D]);ue(se,I),ue(ne,I),b=!1},d(I){I&&L(e),E&&E.d(),x&&x.d(),$t(M,I),X.d(),se&&se.d(I),ne&&ne.d(I)}}}function un(a){let e,s,t,i,l;s=new Fn({props:{value:a[38].taskVersions[a[38].selectedVersion].category}});function r(){return a[18](a[38])}return{c(){e=z("button"),zt(s.$$.fragment),this.h()},l(p){e=H(p,"BUTTON",{class:!0});var c=Z(e);Ht(s.$$.fragment,c),c.forEach(L),this.h()},h(){F(e,"class","btn btn-link p-0")},m(p,c){ce(p,e,c),Vt(s,e,null),t=!0,i||(l=st(e,"click",r),i=!0)},p(p,c){a=p;const h={};c[0]&2&&(h.value=a[38].taskVersions[a[38].selectedVersion].category),s.$set(h)},i(p){t||(le(s.$$.fragment,p),t=!0)},o(p){ue(s.$$.fragment,p),t=!1},d(p){p&&L(e),Ut(s),i=!1,l()}}}function pn(a){let e,s,t,i,l;s=new Fn({props:{value:a[38].taskVersions[a[38].selectedVersion].modality}});function r(){return a[19](a[38])}return{c(){e=z("button"),zt(s.$$.fragment),this.h()},l(p){e=H(p,"BUTTON",{class:!0});var c=Z(e);Ht(s.$$.fragment,c),c.forEach(L),this.h()},h(){F(e,"class","btn btn-link p-0")},m(p,c){ce(p,e,c),Vt(s,e,null),t=!0,i||(l=st(e,"click",r),i=!0)},p(p,c){a=p;const h={};c[0]&2&&(h.value=a[38].taskVersions[a[38].selectedVersion].modality),s.$set(h)},i(p){t||(le(s.$$.fragment,p),t=!0)},o(p){ue(s.$$.fragment,p),t=!1},d(p){p&&L(e),Ut(s),i=!1,l()}}}function dn(a){let e,s,t=a[44]+"",i,l,r,p,c,h;return p=new ka({props:{value:a[45]}}),{c(){e=z("div"),s=z("div"),i=Ee(t),l=oe(),r=z("div"),zt(p.$$.fragment),c=oe(),this.h()},l(g){e=H(g,"DIV",{class:!0});var _=Z(e);s=H(_,"DIV",{class:!0});var k=Z(s);i=Te(k,t),k.forEach(L),l=re(_),r=H(_,"DIV",{});var v=Z(r);Ht(p.$$.fragment,v),v.forEach(L),c=re(_),_.forEach(L),this.h()},h(){F(s,"class","input-type-text me-1 svelte-v3mpfp"),F(e,"class","d-flex flex-row")},m(g,_){ce(g,e,_),S(e,s),S(s,i),S(e,l),S(e,r),Vt(p,r,null),S(e,c),h=!0},p(g,_){(!h||_[0]&2)&&t!==(t=g[44]+"")&&Ie(i,t);const k={};_[0]&2&&(k.value=g[45]),p.$set(k)},i(g){h||(le(p.$$.fragment,g),h=!0)},o(g){ue(p.$$.fragment,g),h=!1},d(g){g&&L(e),Ut(p)}}}function Oa(a){let e=a[38].taskVersions[a[38].selectedVersion].version+"",s;return{c(){s=Ee(e)},l(t){s=Te(t,e)},m(t,i){ce(t,s,i)},p(t,i){i[0]&2&&e!==(e=t[38].taskVersions[t[38].selectedVersion].version+"")&&Ie(s,e)},d(t){t&&L(s)}}}function xa(a){let e,s,t,i,l=He(hs(Object.keys(a[38].taskVersions))),r=[];for(let c=0;c<l.length;c+=1)r[c]=fn(on(a,l,c));function p(){a[20].call(e,a[39],a[40])}return{c(){e=z("select");for(let c=0;c<r.length;c+=1)r[c].c();this.h()},l(c){e=H(c,"SELECT",{class:!0,"aria-label":!0});var h=Z(e);for(let g=0;g<r.length;g+=1)r[g].l(h);h.forEach(L),this.h()},h(){F(e,"class","form-select"),F(e,"aria-label",s="Version for task "+a[38].taskVersions[a[38].selectedVersion].task_name),a[38].selectedVersion===void 0&&Jn(p)},m(c,h){ce(c,e,h);for(let g=0;g<r.length;g+=1)r[g]&&r[g].m(e,null);Ms(e,a[38].selectedVersion,!0),t||(i=st(e,"change",p),t=!0)},p(c,h){if(a=c,h[0]&2){l=He(hs(Object.keys(a[38].taskVersions)));let g;for(g=0;g<l.length;g+=1){const _=on(a,l,g);r[g]?r[g].p(_,h):(r[g]=fn(_),r[g].c(),r[g].m(e,null))}for(;g<r.length;g+=1)r[g].d(1);r.length=l.length}h[0]&2&&s!==(s="Version for task "+a[38].taskVersions[a[38].selectedVersion].task_name)&&F(e,"aria-label",s),h[0]&2&&Ms(e,a[38].selectedVersion)},d(c){c&&L(e),$t(r,c),t=!1,i()}}}function fn(a){let e,s=(a[41]||"None")+"",t,i;return{c(){e=z("option"),t=Ee(s),this.h()},l(l){e=H(l,"OPTION",{});var r=Z(e);t=Te(r,s),r.forEach(L),this.h()},h(){e.__value=i=a[41],It(e,e.__value)},m(l,r){ce(l,e,r),S(e,t)},p(l,r){r[0]&2&&s!==(s=(l[41]||"None")+"")&&Ie(t,s),r[0]&2&&i!==(i=l[41])&&(e.__value=i,It(e,e.__value))},d(l){l&&L(e)}}}function mn(a){let e,s,t=a[38].taskVersions[a[38].selectedVersion]&&hn(a);return{c(){t&&t.c(),e=Se()},l(i){t&&t.l(i),e=Se()},m(i,l){t&&t.m(i,l),ce(i,e,l),s=!0},p(i,l){i[38].taskVersions[i[38].selectedVersion]?t?(t.p(i,l),l[0]&2&&le(t,1)):(t=hn(i),t.c(),le(t,1),t.m(e.parentNode,e)):t&&(Ge(),ue(t,1,1,()=>{t=null}),je())},i(i){s||(le(t),s=!0)},o(i){ue(t),s=!1},d(i){i&&L(e),t&&t.d(i)}}}function gn(a){let e,s,t=a[35].groupTitle+"",i,l,r,p,c=He(a[35].tasks),h=[];for(let _=0;_<c.length;_+=1)h[_]=mn(nn(a,c,_));const g=_=>ue(h[_],1,1,()=>{h[_]=null});return{c(){e=z("tr"),s=z("th"),i=Ee(t),l=oe();for(let _=0;_<h.length;_+=1)h[_].c();r=Se(),this.h()},l(_){e=H(_,"TR",{class:!0});var k=Z(e);s=H(k,"TH",{colspan:!0,class:!0});var v=Z(s);i=Te(v,t),v.forEach(L),k.forEach(L),l=re(_);for(let w=0;w<h.length;w+=1)h[w].l(_);r=Se(),this.h()},h(){F(s,"colspan","3"),F(s,"class","svelte-v3mpfp"),F(e,"class","border-top")},m(_,k){ce(_,e,k),S(e,s),S(s,i),ce(_,l,k);for(let v=0;v<h.length;v+=1)h[v]&&h[v].m(_,k);ce(_,r,k),p=!0},p(_,k){if((!p||k[0]&2)&&t!==(t=_[35].groupTitle+"")&&Ie(i,t),k[0]&32794){c=He(_[35].tasks);let v;for(v=0;v<c.length;v+=1){const w=nn(_,c,v);h[v]?(h[v].p(w,k),le(h[v],1)):(h[v]=mn(w),h[v].c(),le(h[v],1),h[v].m(r.parentNode,r))}for(Ge(),v=c.length;v<h.length;v+=1)g(v);je()}},i(_){if(!p){for(let k=0;k<c.length;k+=1)le(h[k]);p=!0}},o(_){h=h.filter(Boolean);for(let k=0;k<h.length;k+=1)ue(h[k]);p=!1},d(_){_&&(L(e),L(l),L(r)),$t(h,_)}}}function Sa(a){let e,s,t,i,l="Filter tasks",r,p,c,h,g,_,k,v,w,C="Reset",n,o,d='<div class="col"><select id="package-filter" class="invisible"></select></div> <div class="col"><select id="category-filter" class="invisible"></select></div> <div class="col"><select id="modality-filter" class="invisible"></select></div> <div class="col"><select id="input-type-filter" class="invisible"></select></div> <div class="col"><select id="tag-filter" class="invisible"></select></div>',u,m,y,b,E,x,N;const M=[Ta,Ea],G=[];function Y(j,X){return j[0].length===0?0:1}return m=Y(a),y=G[m]=M[m](a),{c(){e=z("div"),s=z("div"),t=z("div"),i=z("div"),i.textContent=l,r=oe(),p=z("div"),c=z("div"),h=z("div"),g=z("div"),_=z("input"),k=oe(),v=z("div"),w=z("button"),w.textContent=C,n=oe(),o=z("div"),o.innerHTML=d,u=oe(),y.c(),b=Se(),this.h()},l(j){e=H(j,"DIV",{class:!0});var X=Z(e);s=H(X,"DIV",{class:!0});var ae=Z(s);t=H(ae,"DIV",{class:!0});var se=Z(t);i=H(se,"DIV",{class:!0,"data-svelte-h":!0}),xe(i)!=="svelte-gyxyme"&&(i.textContent=l),r=re(se),p=H(se,"DIV",{class:!0});var pe=Z(p);c=H(pe,"DIV",{class:!0});var ne=Z(c);h=H(ne,"DIV",{class:!0});var I=Z(h);g=H(I,"DIV",{class:!0});var D=Z(g);_=H(D,"INPUT",{type:!0,class:!0,placeholder:!0}),D.forEach(L),I.forEach(L),k=re(ne),v=H(ne,"DIV",{});var U=Z(v);w=H(U,"BUTTON",{class:!0,"data-svelte-h":!0}),xe(w)!=="svelte-1iagwg6"&&(w.textContent=C),U.forEach(L),ne.forEach(L),pe.forEach(L),se.forEach(L),n=re(ae),o=H(ae,"DIV",{class:!0,"data-svelte-h":!0}),xe(o)!=="svelte-1gf425z"&&(o.innerHTML=d),ae.forEach(L),X.forEach(L),u=re(j),y.l(j),b=Se(),this.h()},h(){F(i,"class","col-3 col-lg-6"),F(_,"type","text"),F(_,"class","form-control ms-auto"),F(_,"placeholder","Search..."),F(g,"class","input-group input-group-sm"),F(h,"class","flex-fill"),F(w,"class","btn btn-outline-secondary btn-sm ms-3"),F(c,"class","d-flex"),F(p,"class","col-9 col-lg-6"),F(t,"class","row mb-2"),F(o,"class","row"),F(s,"class","card-body"),F(e,"class","card mb-2"),Et(e,"invisible",a[0].length===0),Et(e,"collapse",a[0].length===0)},m(j,X){ce(j,e,X),S(e,s),S(s,t),S(t,i),S(t,r),S(t,p),S(p,c),S(c,h),S(h,g),S(g,_),It(_,a[2]),S(c,k),S(c,v),S(v,w),S(s,n),S(s,o),ce(j,u,X),G[m].m(j,X),ce(j,b,X),E=!0,x||(N=[st(_,"input",a[17]),st(w,"click",a[8])],x=!0)},p(j,X){X[0]&4&&_.value!==j[2]&&It(_,j[2]),(!E||X[0]&1)&&Et(e,"invisible",j[0].length===0),(!E||X[0]&1)&&Et(e,"collapse",j[0].length===0);let ae=m;m=Y(j),m===ae?G[m].p(j,X):(Ge(),ue(G[ae],1,1,()=>{G[ae]=null}),je(),y=G[m],y?y.p(j,X):(y=G[m]=M[m](j),y.c()),le(y,1),y.m(b.parentNode,b))},i(j){E||(le(y),E=!0)},o(j){ue(y),E=!1},d(j){j&&(L(e),L(u),L(b)),G[m].d(j),x=!1,Yn(N)}}}let $n="pkg_name";function pt(a,e,s){a==null||a.setData([{text:s,placeholder:!0},...e])}function _n(a,e){return[...new Set(a.flatMap(s=>s.task_list).map(e).filter(s=>s!==null))]}function dt(a){return a.map(e=>({text:e,value:e}))}function bn(a){const e=[];return e.push(...a.tags),a.authors&&e.push(a.authors),e.join(", ")}function Aa(a,e,s){let t,i,{$$slots:l={},$$scope:r}=e,{taskGroups:p}=e,c=[],h=[],g="",_,k="",v,w="",C,n="",o,d="",u,m="",y={pkg_name:"Task"};function b(){p&&(se(p),s(0,c=ra(p,$n)),E())}function E(){s(1,h=c.map(T=>{const R=T.tasks.filter(q=>x(q.taskVersions[q.selectedVersion]));return{...T,tasks:R}}).filter(T=>T.tasks.length>0))}function x(T){return N(T)&&M(T)&&G(T)&&j(T)&&Y(T)&&X(T)}function N(T){if(!g)return!0;const R=g.toLowerCase();return T.task_name.toLowerCase().includes(R)||T.pkg_name.toLowerCase().includes(R)||T.category&&T.category.toLowerCase().includes(R)||T.modality&&T.modality.toLowerCase().includes(R)||T.authors&&T.authors.toLowerCase().includes(R)||Object.keys(T.input_types).find(q=>q.toLowerCase().includes(R))!==void 0||T.tags.find(q=>q.toLowerCase().includes(R))!==void 0}function M(T){return k?T.category!==null&&T.category===k:!0}function G(T){return w?T.modality!==null&&T.modality===w:!0}function Y(T){return n?T.pkg_name===n:!0}function j(T){return d?T.tags.find(R=>R===d)!==void 0:!0}function X(T){return m?Object.keys(T.input_types).find(R=>R===m)!==void 0:!0}function ae(){s(2,g=""),s(10,k=""),_==null||_.setSelected(""),v==null||v.setSelected(""),C==null||C.setSelected(""),o==null||o.setSelected(""),u==null||u.setSelected("")}function se(T){pt(_,dt(_n(T,R=>R.category)),"Category"),pt(v,dt(_n(T,R=>R.modality)),"Modality"),pt(C,dt([...new Set(T.map(R=>R.pkg_name))]),"Package"),pt(o,dt([...new Set(T.flatMap(R=>R.task_list).flatMap(R=>R.tags).filter(R=>R!==null))]),"Tag"),pt(u,dt([...new Set(T.flatMap(R=>R.task_list).flatMap(R=>Object.keys(R.input_types)))]),"Input type")}wn(()=>{s(3,_=pe("category-filter","Select category","Category",T=>{s(10,k=T)})),s(4,v=pe("modality-filter","Select modality","Modality",T=>{s(11,w=T)})),C=pe("package-filter","Select package","Package",T=>{s(12,n=T)}),o=pe("tag-filter","Select tag","Tag",T=>{s(13,d=T)}),u=pe("input-type-filter","Select input type","Input type",T=>{s(14,m=T)}),b()});function pe(T,R,q,ie){const B=document.getElementById(T);return B==null||B.classList.remove("invisible"),new pa({select:`#${T}`,settings:{showSearch:!0,allowDeselect:!0,ariaLabel:R},events:{afterChange:J=>{J.length===0||J[0].value===q?ie(""):ie(J[0].value)}}})}function ne(){g=this.value,s(2,g)}const I=T=>_==null?void 0:_.setSelected(T.taskVersions[T.selectedVersion].category),D=T=>v==null?void 0:v.setSelected(T.taskVersions[T.selectedVersion].modality);function U(T,R){T[R].selectedVersion=Qn(this),s(1,h),s(2,g),s(10,k),s(11,w),s(12,n),s(13,d),s(14,m),s(0,c)}return a.$$set=T=>{"taskGroups"in T&&s(9,p=T.taskGroups),"$$scope"in T&&s(15,r=T.$$scope)},a.$$.update=()=>{a.$$.dirty[0]&512&&p&&b(),a.$$.dirty[0]&31749&&(g||k||w||n||d||m?E():s(1,h=c)),a.$$.dirty[0]&2&&s(6,t=h.reduce((T,R)=>T+R.tasks.length,0)),a.$$.dirty[0]&1&&s(5,i=c.reduce((T,R)=>T+R.tasks.length,0))},[c,h,g,_,v,i,t,y,ae,p,k,w,n,d,m,r,l,ne,I,D,U]}class La extends Pt{constructor(e){super(),Ft(this,e,Aa,Sa,Mt,{taskGroups:9},null,[-1,-1])}}function kn(a){let e,s='<i class="bi bi-info-circle"></i>',t,i;function l(){return a[3](a[4])}return{c(){e=z("button"),e.innerHTML=s,this.h()},l(r){e=H(r,"BUTTON",{class:!0,"data-svelte-h":!0}),xe(e)!=="svelte-1dukvoy"&&(e.innerHTML=s),this.h()},h(){F(e,"class","btn btn-info ms-2")},m(r,p){ce(r,e,p),t||(i=st(e,"click",l),t=!0)},p(r,p){a=r},d(r){r&&L(e),t=!1,i()}}}function Ca(a){let e,s=a[4].docs_info&&kn(a);return{c(){s&&s.c(),e=Se()},l(t){s&&s.l(t),e=Se()},m(t,i){s&&s.m(t,i),ce(t,e,i)},p(t,i){t[4].docs_info?s?s.p(t,i):(s=kn(t),s.c(),s.m(e.parentNode,e)):s&&(s.d(1),s=null)},d(t){t&&L(e),s&&s.d(t)}}}function Ia(a){var o,d;let e,s,t,i,l,r,p,c=((o=a[1])==null?void 0:o.task_name)+"",h,g,_,k,v,w,C=a[0]((d=a[1])==null?void 0:d.docs_info)+"",n;return e=new La({props:{taskGroups:$i,$$slots:{"docs-info":[Ca,({task:u})=>({4:u}),({task:u})=>u?16:0]},$$scope:{ctx:a}}}),{c(){zt(e.$$.fragment),s=oe(),t=z("div"),i=z("div"),l=z("div"),r=z("div"),p=z("h5"),h=Ee(c),g=oe(),_=z("button"),k=oe(),v=z("div"),w=new Kn(!1),this.h()},l(u){Ht(e.$$.fragment,u),s=re(u),t=H(u,"DIV",{class:!0,id:!0,tabindex:!0});var m=Z(t);i=H(m,"DIV",{class:!0});var y=Z(i);l=H(y,"DIV",{class:!0});var b=Z(l);r=H(b,"DIV",{class:!0});var E=Z(r);p=H(E,"H5",{class:!0});var x=Z(p);h=Te(x,c),x.forEach(L),g=re(E),_=H(E,"BUTTON",{type:!0,class:!0,"data-bs-dismiss":!0,"aria-label":!0}),Z(_).forEach(L),E.forEach(L),k=re(b),v=H(b,"DIV",{class:!0});var N=Z(v);w=ei(N,!1),N.forEach(L),b.forEach(L),y.forEach(L),m.forEach(L),this.h()},h(){F(p,"class","modal-title"),F(_,"type","button"),F(_,"class","btn-close"),F(_,"data-bs-dismiss","modal"),F(_,"aria-label","Close"),F(r,"class","modal-header"),w.a=null,F(v,"class","modal-body"),F(l,"class","modal-content"),F(i,"class","modal-dialog modal-dialog-scrollable"),F(t,"class","modal modal-xl"),F(t,"id","docs-info-modal"),F(t,"tabindex","-1")},m(u,m){Vt(e,u,m),ce(u,s,m),ce(u,t,m),S(t,i),S(i,l),S(l,r),S(r,p),S(p,h),S(r,g),S(r,_),S(l,k),S(l,v),w.m(C,v),n=!0},p(u,[m]){var b,E;const y={};m&48&&(y.$$scope={dirty:m,ctx:u}),e.$set(y),(!n||m&2)&&c!==(c=((b=u[1])==null?void 0:b.task_name)+"")&&Ie(h,c),(!n||m&2)&&C!==(C=u[0]((E=u[1])==null?void 0:E.docs_info)+"")&&w.p(C)},i(u){n||(le(e.$$.fragment,u),n=!0)},o(u){ue(e.$$.fragment,u),n=!1},d(u){u&&(L(s),L(t)),Ut(e,u)}}}function Ra(a){const e=document.getElementById(a),s=bootstrap.Modal.getInstance(e);return s||new bootstrap.Modal(e)}function Da(a,e,s){let t=null;function i(p){s(1,t=p),Ra("docs-info-modal").show()}function l(p){return p?Fi.sanitize(ee.parse(p)):""}return[l,t,i,p=>i(p)]}class $a extends Pt{constructor(e){super(),Ft(this,e,Da,Ia,Mt,{formatMarkdown:0})}get formatMarkdown(){return this.$$.ctx[0]}}export{$a as component};
