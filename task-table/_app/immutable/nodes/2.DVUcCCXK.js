var qn=Object.defineProperty;var Rs=l=>{throw TypeError(l)};var Xn=(l,e,s)=>e in l?qn(l,e,{enumerable:!0,configurable:!0,writable:!0,value:s}):l[e]=s;var J=(l,e,s)=>Xn(l,typeof e!="symbol"?e+"":e,s),Wn=(l,e,s)=>e.has(l)||Rs("Cannot "+s);var Ns=(l,e,s)=>e.has(l)?Rs("Cannot add the same private member more than once"):e instanceof WeakSet?e.add(l):e.set(l,s);var wt=(l,e,s)=>(Wn(l,e,"access private method"),s);import{s as Mt,n as Be,o as En,r as Yn,c as ss,u as ns,g as is,a as ls,k as Qn}from"../chunks/scheduler.BvLojk_z.js";import{S as Pt,i as $t,m as Ae,j as ce,g as x,e as F,b as ye,c as V,d as q,f as Te,p as Ds,o as $,k as A,l as Ie,y as Oe,s as re,h as oe,z as yt,A as It,B as st,q as Ge,a as ue,n as je,t as ae,C as Kn,D as zt,u as Ft,v as Vt,w as Ut,x as Ht,E as Ms,H as Jn,F as ei}from"../chunks/index.fIxOdhEb.js";import{_ as ti}from"../chunks/preload-helper.C1FmrZbK.js";function Ve(l){return(l==null?void 0:l.length)!==void 0?l:Array.from(l)}function us(){return{async:!1,baseUrl:null,breaks:!1,extensions:null,gfm:!0,headerIds:!1,headerPrefix:"",highlight:null,hooks:null,langPrefix:"language-",mangle:!1,pedantic:!1,renderer:null,sanitize:!1,sanitizer:null,silent:!1,smartypants:!1,tokenizer:null,walkTokens:null,xhtml:!1}}let Xe=us();function vn(l){Xe=l}const wn=/[&<>"']/,si=new RegExp(wn.source,"g"),yn=/[<>"']|&(?!(#\d{1,7}|#[Xx][a-fA-F0-9]{1,6}|\w+);)/,ni=new RegExp(yn.source,"g"),ii={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},Ps=l=>ii[l];function _e(l,e){if(e){if(wn.test(l))return l.replace(si,Ps)}else if(yn.test(l))return l.replace(ni,Ps);return l}const li=/&(#(?:\d+)|(?:#x[0-9A-Fa-f]+)|(?:\w+));?/ig;function Tn(l){return l.replace(li,(e,s)=>(s=s.toLowerCase(),s==="colon"?":":s.charAt(0)==="#"?s.charAt(1)==="x"?String.fromCharCode(parseInt(s.substring(2),16)):String.fromCharCode(+s.substring(1)):""))}const ai=/(^|[^\[])\^/g;function te(l,e){l=typeof l=="string"?l:l.source,e=e||"";const s={replace:(t,i)=>(i=typeof i=="object"&&"source"in i?i.source:i,i=i.replace(ai,"$1"),l=l.replace(t,i),s),getRegex:()=>new RegExp(l,e)};return s}const ri=/[^\w:]/g,oi=/^$|^[a-z][a-z0-9+.-]*:|^[?#]/i;function $s(l,e,s){if(l){let t;try{t=decodeURIComponent(Tn(s)).replace(ri,"").toLowerCase()}catch{return null}if(t.indexOf("javascript:")===0||t.indexOf("vbscript:")===0||t.indexOf("data:")===0)return null}e&&!oi.test(s)&&(s=di(e,s));try{s=encodeURI(s).replace(/%25/g,"%")}catch{return null}return s}const Tt={},ci=/^[^:]+:\/*[^/]*$/,hi=/^([^:]+:)[\s\S]*$/,ui=/^([^:]+:\/*[^/]*)[\s\S]*$/;function di(l,e){Tt[" "+l]||(ci.test(l)?Tt[" "+l]=l+"/":Tt[" "+l]=xt(l,"/",!0)),l=Tt[" "+l];const s=l.indexOf(":")===-1;return e.substring(0,2)==="//"?s?e:l.replace(hi,"$1")+e:e.charAt(0)==="/"?s?e:l.replace(ui,"$1")+e:l+e}const Rt={exec:()=>null};function zs(l,e){const s=l.replace(/\|/g,(a,o,d)=>{let c=!1,h=o;for(;--h>=0&&d[h]==="\\";)c=!c;return c?"|":" |"}),t=s.split(/ \|/);let i=0;if(t[0].trim()||t.shift(),t.length>0&&!t[t.length-1].trim()&&t.pop(),e)if(t.length>e)t.splice(e);else for(;t.length<e;)t.push("");for(;i<t.length;i++)t[i]=t[i].trim().replace(/\\\|/g,"|");return t}function xt(l,e,s){const t=l.length;if(t===0)return"";let i=0;for(;i<t;){const a=l.charAt(t-i-1);if(a===e&&!s)i++;else if(a!==e&&s)i++;else break}return l.slice(0,t-i)}function pi(l,e){if(l.indexOf(e[1])===-1)return-1;let s=0;for(let t=0;t<l.length;t++)if(l[t]==="\\")t++;else if(l[t]===e[0])s++;else if(l[t]===e[1]&&(s--,s<0))return t;return-1}function fi(l,e){!l||l.silent||(e&&console.warn("marked(): callback is deprecated since version 5.0.0, should not be used and will be removed in the future. Read more here: https://marked.js.org/using_pro#async"),(l.sanitize||l.sanitizer)&&console.warn("marked(): sanitize and sanitizer parameters are deprecated since version 0.7.0, should not be used and will be removed in the future. Read more here: https://marked.js.org/#/USING_ADVANCED.md#options"),(l.highlight||l.langPrefix!=="language-")&&console.warn("marked(): highlight and langPrefix parameters are deprecated since version 5.0.0, should not be used and will be removed in the future. Instead use https://www.npmjs.com/package/marked-highlight."),l.mangle&&console.warn("marked(): mangle parameter is enabled by default, but is deprecated since version 5.0.0, and will be removed in the future. To clear this warning, install https://www.npmjs.com/package/marked-mangle, or disable by setting `{mangle: false}`."),l.baseUrl&&console.warn("marked(): baseUrl parameter is deprecated since version 5.0.0, should not be used and will be removed in the future. Instead use https://www.npmjs.com/package/marked-base-url."),l.smartypants&&console.warn("marked(): smartypants parameter is deprecated since version 5.0.0, should not be used and will be removed in the future. Instead use https://www.npmjs.com/package/marked-smartypants."),l.xhtml&&console.warn("marked(): xhtml parameter is deprecated since version 5.0.0, should not be used and will be removed in the future. Instead use https://www.npmjs.com/package/marked-xhtml."),(l.headerIds||l.headerPrefix)&&console.warn("marked(): headerIds and headerPrefix parameters enabled by default, but are deprecated since version 5.0.0, and will be removed in the future. To clear this warning, install  https://www.npmjs.com/package/marked-gfm-heading-id, or disable by setting `{headerIds: false}`."))}function Fs(l,e,s,t){const i=e.href,a=e.title?_e(e.title):null,o=l[1].replace(/\\([\[\]])/g,"$1");if(l[0].charAt(0)!=="!"){t.state.inLink=!0;const d={type:"link",raw:s,href:i,title:a,text:o,tokens:t.inlineTokens(o)};return t.state.inLink=!1,d}return{type:"image",raw:s,href:i,title:a,text:_e(o)}}function mi(l,e){const s=l.match(/^(\s+)(?:```)/);if(s===null)return e;const t=s[1];return e.split(`
`).map(i=>{const a=i.match(/^\s+/);if(a===null)return i;const[o]=a;return o.length>=t.length?i.slice(t.length):i}).join(`
`)}class Nt{constructor(e){J(this,"options");J(this,"rules");J(this,"lexer");this.options=e||Xe}space(e){const s=this.rules.block.newline.exec(e);if(s&&s[0].length>0)return{type:"space",raw:s[0]}}code(e){const s=this.rules.block.code.exec(e);if(s){const t=s[0].replace(/^ {1,4}/gm,"");return{type:"code",raw:s[0],codeBlockStyle:"indented",text:this.options.pedantic?t:xt(t,`
`)}}}fences(e){const s=this.rules.block.fences.exec(e);if(s){const t=s[0],i=mi(t,s[3]||"");return{type:"code",raw:t,lang:s[2]?s[2].trim().replace(this.rules.inline._escapes,"$1"):s[2],text:i}}}heading(e){const s=this.rules.block.heading.exec(e);if(s){let t=s[2].trim();if(/#$/.test(t)){const i=xt(t,"#");(this.options.pedantic||!i||/ $/.test(i))&&(t=i.trim())}return{type:"heading",raw:s[0],depth:s[1].length,text:t,tokens:this.lexer.inline(t)}}}hr(e){const s=this.rules.block.hr.exec(e);if(s)return{type:"hr",raw:s[0]}}blockquote(e){const s=this.rules.block.blockquote.exec(e);if(s){const t=s[0].replace(/^ *>[ \t]?/gm,""),i=this.lexer.state.top;this.lexer.state.top=!0;const a=this.lexer.blockTokens(t);return this.lexer.state.top=i,{type:"blockquote",raw:s[0],tokens:a,text:t}}}list(e){let s=this.rules.block.list.exec(e);if(s){let t=s[1].trim();const i=t.length>1,a={type:"list",raw:"",ordered:i,start:i?+t.slice(0,-1):"",loose:!1,items:[]};t=i?`\\d{1,9}\\${t.slice(-1)}`:`\\${t}`,this.options.pedantic&&(t=i?t:"[*+-]");const o=new RegExp(`^( {0,3}${t})((?:[	 ][^\\n]*)?(?:\\n|$))`);let d="",c="",h=!1;for(;e;){let g=!1;if(!(s=o.exec(e))||this.rules.block.hr.test(e))break;d=s[0],e=e.substring(d.length);let _=s[2].split(`
`,1)[0].replace(/^\t+/,r=>" ".repeat(3*r.length)),k=e.split(`
`,1)[0],w=0;this.options.pedantic?(w=2,c=_.trimLeft()):(w=s[2].search(/[^ ]/),w=w>4?1:w,c=_.slice(w),w+=s[1].length);let E=!1;if(!_&&/^ *$/.test(k)&&(d+=k+`
`,e=e.substring(k.length+1),g=!0),!g){const r=new RegExp(`^ {0,${Math.min(3,w-1)}}(?:[*+-]|\\d{1,9}[.)])((?:[ 	][^\\n]*)?(?:\\n|$))`),p=new RegExp(`^ {0,${Math.min(3,w-1)}}((?:- *){3,}|(?:_ *){3,}|(?:\\* *){3,})(?:\\n+|$)`),u=new RegExp(`^ {0,${Math.min(3,w-1)}}(?:\`\`\`|~~~)`),m=new RegExp(`^ {0,${Math.min(3,w-1)}}#`);for(;e;){const v=e.split(`
`,1)[0];if(k=v,this.options.pedantic&&(k=k.replace(/^ {1,4}(?=( {4})*[^ ])/g,"  ")),u.test(k)||m.test(k)||r.test(k)||p.test(e))break;if(k.search(/[^ ]/)>=w||!k.trim())c+=`
`+k.slice(w);else{if(E||_.search(/[^ ]/)>=4||u.test(_)||m.test(_)||p.test(_))break;c+=`
`+k}!E&&!k.trim()&&(E=!0),d+=v+`
`,e=e.substring(v.length+1),_=k.slice(w)}}a.loose||(h?a.loose=!0:/\n *\n *$/.test(d)&&(h=!0));let C=null,n;this.options.gfm&&(C=/^\[[ xX]\] /.exec(c),C&&(n=C[0]!=="[ ] ",c=c.replace(/^\[[ xX]\] +/,""))),a.items.push({type:"list_item",raw:d,task:!!C,checked:n,loose:!1,text:c,tokens:[]}),a.raw+=d}a.items[a.items.length-1].raw=d.trimRight(),a.items[a.items.length-1].text=c.trimRight(),a.raw=a.raw.trimRight();for(let g=0;g<a.items.length;g++)if(this.lexer.state.top=!1,a.items[g].tokens=this.lexer.blockTokens(a.items[g].text,[]),!a.loose){const _=a.items[g].tokens.filter(w=>w.type==="space"),k=_.length>0&&_.some(w=>/\n.*\n/.test(w.raw));a.loose=k}if(a.loose)for(let g=0;g<a.items.length;g++)a.items[g].loose=!0;return a}}html(e){const s=this.rules.block.html.exec(e);if(s){const t={type:"html",block:!0,raw:s[0],pre:!this.options.sanitizer&&(s[1]==="pre"||s[1]==="script"||s[1]==="style"),text:s[0]};if(this.options.sanitize){const i=this.options.sanitizer?this.options.sanitizer(s[0]):_e(s[0]),a=t;a.type="paragraph",a.text=i,a.tokens=this.lexer.inline(i)}return t}}def(e){const s=this.rules.block.def.exec(e);if(s){const t=s[1].toLowerCase().replace(/\s+/g," "),i=s[2]?s[2].replace(/^<(.*)>$/,"$1").replace(this.rules.inline._escapes,"$1"):"",a=s[3]?s[3].substring(1,s[3].length-1).replace(this.rules.inline._escapes,"$1"):s[3];return{type:"def",tag:t,raw:s[0],href:i,title:a}}}table(e){const s=this.rules.block.table.exec(e);if(s){const t={type:"table",raw:s[0],header:zs(s[1]).map(i=>({text:i,tokens:[]})),align:s[2].replace(/^ *|\| *$/g,"").split(/ *\| */),rows:s[3]&&s[3].trim()?s[3].replace(/\n[ \t]*$/,"").split(`
`):[]};if(t.header.length===t.align.length){let i=t.align.length,a,o,d,c;for(a=0;a<i;a++){const h=t.align[a];h&&(/^ *-+: *$/.test(h)?t.align[a]="right":/^ *:-+: *$/.test(h)?t.align[a]="center":/^ *:-+ *$/.test(h)?t.align[a]="left":t.align[a]=null)}for(i=t.rows.length,a=0;a<i;a++)t.rows[a]=zs(t.rows[a],t.header.length).map(h=>({text:h,tokens:[]}));for(i=t.header.length,o=0;o<i;o++)t.header[o].tokens=this.lexer.inline(t.header[o].text);for(i=t.rows.length,o=0;o<i;o++)for(c=t.rows[o],d=0;d<c.length;d++)c[d].tokens=this.lexer.inline(c[d].text);return t}}}lheading(e){const s=this.rules.block.lheading.exec(e);if(s)return{type:"heading",raw:s[0],depth:s[2].charAt(0)==="="?1:2,text:s[1],tokens:this.lexer.inline(s[1])}}paragraph(e){const s=this.rules.block.paragraph.exec(e);if(s){const t=s[1].charAt(s[1].length-1)===`
`?s[1].slice(0,-1):s[1];return{type:"paragraph",raw:s[0],text:t,tokens:this.lexer.inline(t)}}}text(e){const s=this.rules.block.text.exec(e);if(s)return{type:"text",raw:s[0],text:s[0],tokens:this.lexer.inline(s[0])}}escape(e){const s=this.rules.inline.escape.exec(e);if(s)return{type:"escape",raw:s[0],text:_e(s[1])}}tag(e){const s=this.rules.inline.tag.exec(e);if(s)return!this.lexer.state.inLink&&/^<a /i.test(s[0])?this.lexer.state.inLink=!0:this.lexer.state.inLink&&/^<\/a>/i.test(s[0])&&(this.lexer.state.inLink=!1),!this.lexer.state.inRawBlock&&/^<(pre|code|kbd|script)(\s|>)/i.test(s[0])?this.lexer.state.inRawBlock=!0:this.lexer.state.inRawBlock&&/^<\/(pre|code|kbd|script)(\s|>)/i.test(s[0])&&(this.lexer.state.inRawBlock=!1),{type:this.options.sanitize?"text":"html",raw:s[0],inLink:this.lexer.state.inLink,inRawBlock:this.lexer.state.inRawBlock,block:!1,text:this.options.sanitize?this.options.sanitizer?this.options.sanitizer(s[0]):_e(s[0]):s[0]}}link(e){const s=this.rules.inline.link.exec(e);if(s){const t=s[2].trim();if(!this.options.pedantic&&/^</.test(t)){if(!/>$/.test(t))return;const o=xt(t.slice(0,-1),"\\");if((t.length-o.length)%2===0)return}else{const o=pi(s[2],"()");if(o>-1){const c=(s[0].indexOf("!")===0?5:4)+s[1].length+o;s[2]=s[2].substring(0,o),s[0]=s[0].substring(0,c).trim(),s[3]=""}}let i=s[2],a="";if(this.options.pedantic){const o=/^([^'"]*[^\s])\s+(['"])(.*)\2/.exec(i);o&&(i=o[1],a=o[3])}else a=s[3]?s[3].slice(1,-1):"";return i=i.trim(),/^</.test(i)&&(this.options.pedantic&&!/>$/.test(t)?i=i.slice(1):i=i.slice(1,-1)),Fs(s,{href:i&&i.replace(this.rules.inline._escapes,"$1"),title:a&&a.replace(this.rules.inline._escapes,"$1")},s[0],this.lexer)}}reflink(e,s){let t;if((t=this.rules.inline.reflink.exec(e))||(t=this.rules.inline.nolink.exec(e))){let i=(t[2]||t[1]).replace(/\s+/g," ");if(i=s[i.toLowerCase()],!i){const a=t[0].charAt(0);return{type:"text",raw:a,text:a}}return Fs(t,i,t[0],this.lexer)}}emStrong(e,s,t=""){let i=this.rules.inline.emStrong.lDelim.exec(e);if(!i||i[3]&&t.match(/[\p{L}\p{N}]/u))return;if(!(i[1]||i[2]||"")||!t||this.rules.inline.punctuation.exec(t)){const o=[...i[0]].length-1;let d,c,h=o,g=0;const _=i[0][0]==="*"?this.rules.inline.emStrong.rDelimAst:this.rules.inline.emStrong.rDelimUnd;for(_.lastIndex=0,s=s.slice(-1*e.length+o);(i=_.exec(s))!=null;){if(d=i[1]||i[2]||i[3]||i[4]||i[5]||i[6],!d)continue;if(c=[...d].length,i[3]||i[4]){h+=c;continue}else if((i[5]||i[6])&&o%3&&!((o+c)%3)){g+=c;continue}if(h-=c,h>0)continue;c=Math.min(c,c+h+g);const k=[...e].slice(0,o+i.index+c+1).join("");if(Math.min(o,c)%2){const E=k.slice(1,-1);return{type:"em",raw:k,text:E,tokens:this.lexer.inlineTokens(E)}}const w=k.slice(2,-2);return{type:"strong",raw:k,text:w,tokens:this.lexer.inlineTokens(w)}}}}codespan(e){const s=this.rules.inline.code.exec(e);if(s){let t=s[2].replace(/\n/g," ");const i=/[^ ]/.test(t),a=/^ /.test(t)&&/ $/.test(t);return i&&a&&(t=t.substring(1,t.length-1)),t=_e(t,!0),{type:"codespan",raw:s[0],text:t}}}br(e){const s=this.rules.inline.br.exec(e);if(s)return{type:"br",raw:s[0]}}del(e){const s=this.rules.inline.del.exec(e);if(s)return{type:"del",raw:s[0],text:s[2],tokens:this.lexer.inlineTokens(s[2])}}autolink(e,s){const t=this.rules.inline.autolink.exec(e);if(t){let i,a;return t[2]==="@"?(i=_e(this.options.mangle?s(t[1]):t[1]),a="mailto:"+i):(i=_e(t[1]),a=i),{type:"link",raw:t[0],text:i,href:a,tokens:[{type:"text",raw:i,text:i}]}}}url(e,s){let t;if(t=this.rules.inline.url.exec(e)){let i,a;if(t[2]==="@")i=_e(this.options.mangle?s(t[0]):t[0]),a="mailto:"+i;else{let o;do o=t[0],t[0]=this.rules.inline._backpedal.exec(t[0])[0];while(o!==t[0]);i=_e(t[0]),t[1]==="www."?a="http://"+t[0]:a=t[0]}return{type:"link",raw:t[0],text:i,href:a,tokens:[{type:"text",raw:i,text:i}]}}}inlineText(e,s){const t=this.rules.inline.text.exec(e);if(t){let i;return this.lexer.state.inRawBlock?i=this.options.sanitize?this.options.sanitizer?this.options.sanitizer(t[0]):_e(t[0]):t[0]:i=_e(this.options.smartypants?s(t[0]):t[0]),{type:"text",raw:t[0],text:i}}}}const z={newline:/^(?: *(?:\n|$))+/,code:/^( {4}[^\n]+(?:\n(?: *(?:\n|$))*)?)+/,fences:/^ {0,3}(`{3,}(?=[^`\n]*(?:\n|$))|~{3,})([^\n]*)(?:\n|$)(?:|([\s\S]*?)(?:\n|$))(?: {0,3}\1[~`]* *(?=\n|$)|$)/,hr:/^ {0,3}((?:-[\t ]*){3,}|(?:_[ \t]*){3,}|(?:\*[ \t]*){3,})(?:\n+|$)/,heading:/^ {0,3}(#{1,6})(?=\s|$)(.*)(?:\n+|$)/,blockquote:/^( {0,3}> ?(paragraph|[^\n]*)(?:\n|$))+/,list:/^( {0,3}bull)([ \t][^\n]+?)?(?:\n|$)/,html:"^ {0,3}(?:<(script|pre|style|textarea)[\\s>][\\s\\S]*?(?:</\\1>[^\\n]*\\n+|$)|comment[^\\n]*(\\n+|$)|<\\?[\\s\\S]*?(?:\\?>\\n*|$)|<![A-Z][\\s\\S]*?(?:>\\n*|$)|<!\\[CDATA\\[[\\s\\S]*?(?:\\]\\]>\\n*|$)|</?(tag)(?: +|\\n|/?>)[\\s\\S]*?(?:(?:\\n *)+\\n|$)|<(?!script|pre|style|textarea)([a-z][\\w-]*)(?:attribute)*? */?>(?=[ \\t]*(?:\\n|$))[\\s\\S]*?(?:(?:\\n *)+\\n|$)|</(?!script|pre|style|textarea)[a-z][\\w-]*\\s*>(?=[ \\t]*(?:\\n|$))[\\s\\S]*?(?:(?:\\n *)+\\n|$))",def:/^ {0,3}\[(label)\]: *(?:\n *)?([^<\s][^\s]*|<.*?>)(?:(?: +(?:\n *)?| *\n *)(title))? *(?:\n+|$)/,table:Rt,lheading:/^((?:(?!^bull ).|\n(?!\n|bull ))+?)\n {0,3}(=+|-+) *(?:\n+|$)/,_paragraph:/^([^\n]+(?:\n(?!hr|heading|lheading|blockquote|fences|list|html|table| +\n)[^\n]+)*)/,text:/^[^\n]+/};z._label=/(?!\s*\])(?:\\.|[^\[\]\\])+/;z._title=/(?:"(?:\\"?|[^"\\])*"|'[^'\n]*(?:\n[^'\n]+)*\n?'|\([^()]*\))/;z.def=te(z.def).replace("label",z._label).replace("title",z._title).getRegex();z.bullet=/(?:[*+-]|\d{1,9}[.)])/;z.listItemStart=te(/^( *)(bull) */).replace("bull",z.bullet).getRegex();z.list=te(z.list).replace(/bull/g,z.bullet).replace("hr","\\n+(?=\\1?(?:(?:- *){3,}|(?:_ *){3,}|(?:\\* *){3,})(?:\\n+|$))").replace("def","\\n+(?="+z.def.source+")").getRegex();z._tag="address|article|aside|base|basefont|blockquote|body|caption|center|col|colgroup|dd|details|dialog|dir|div|dl|dt|fieldset|figcaption|figure|footer|form|frame|frameset|h[1-6]|head|header|hr|html|iframe|legend|li|link|main|menu|menuitem|meta|nav|noframes|ol|optgroup|option|p|param|section|source|summary|table|tbody|td|tfoot|th|thead|title|tr|track|ul";z._comment=/<!--(?!-?>)[\s\S]*?(?:-->|$)/;z.html=te(z.html,"i").replace("comment",z._comment).replace("tag",z._tag).replace("attribute",/ +[a-zA-Z:_][\w.:-]*(?: *= *"[^"\n]*"| *= *'[^'\n]*'| *= *[^\s"'=<>`]+)?/).getRegex();z.lheading=te(z.lheading).replace(/bull/g,z.bullet).getRegex();z.paragraph=te(z._paragraph).replace("hr",z.hr).replace("heading"," {0,3}#{1,6} ").replace("|lheading","").replace("|table","").replace("blockquote"," {0,3}>").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|textarea|!--)").replace("tag",z._tag).getRegex();z.blockquote=te(z.blockquote).replace("paragraph",z.paragraph).getRegex();z.normal={...z};z.gfm={...z.normal,table:"^ *([^\\n ].*\\|.*)\\n {0,3}(?:\\| *)?(:?-+:? *(?:\\| *:?-+:? *)*)(?:\\| *)?(?:\\n((?:(?! *\\n|hr|heading|blockquote|code|fences|list|html).*(?:\\n|$))*)\\n*|$)"};z.gfm.table=te(z.gfm.table).replace("hr",z.hr).replace("heading"," {0,3}#{1,6} ").replace("blockquote"," {0,3}>").replace("code"," {4}[^\\n]").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|textarea|!--)").replace("tag",z._tag).getRegex();z.gfm.paragraph=te(z._paragraph).replace("hr",z.hr).replace("heading"," {0,3}#{1,6} ").replace("|lheading","").replace("table",z.gfm.table).replace("blockquote"," {0,3}>").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|textarea|!--)").replace("tag",z._tag).getRegex();z.pedantic={...z.normal,html:te(`^ *(?:comment *(?:\\n|\\s*$)|<(tag)[\\s\\S]+?</\\1> *(?:\\n{2,}|\\s*$)|<tag(?:"[^"]*"|'[^']*'|\\s[^'"/>\\s]*)*?/?> *(?:\\n{2,}|\\s*$))`).replace("comment",z._comment).replace(/tag/g,"(?!(?:a|em|strong|small|s|cite|q|dfn|abbr|data|time|code|var|samp|kbd|sub|sup|i|b|u|mark|ruby|rt|rp|bdi|bdo|span|br|wbr|ins|del|img)\\b)\\w+(?!:|[^\\w\\s@]*@)\\b").getRegex(),def:/^ *\[([^\]]+)\]: *<?([^\s>]+)>?(?: +(["(][^\n]+[")]))? *(?:\n+|$)/,heading:/^(#{1,6})(.*)(?:\n+|$)/,fences:Rt,lheading:/^(.+?)\n {0,3}(=+|-+) *(?:\n+|$)/,paragraph:te(z.normal._paragraph).replace("hr",z.hr).replace("heading",` *#{1,6} *[^
]`).replace("lheading",z.lheading).replace("blockquote"," {0,3}>").replace("|fences","").replace("|list","").replace("|html","").getRegex()};const L={escape:/^\\([!"#$%&'()*+,\-./:;<=>?@\[\]\\^_`{|}~])/,autolink:/^<(scheme:[^\s\x00-\x1f<>]*|email)>/,url:Rt,tag:"^comment|^</[a-zA-Z][\\w:-]*\\s*>|^<[a-zA-Z][\\w-]*(?:attribute)*?\\s*/?>|^<\\?[\\s\\S]*?\\?>|^<![a-zA-Z]+\\s[\\s\\S]*?>|^<!\\[CDATA\\[[\\s\\S]*?\\]\\]>",link:/^!?\[(label)\]\(\s*(href)(?:\s+(title))?\s*\)/,reflink:/^!?\[(label)\]\[(ref)\]/,nolink:/^!?\[(ref)\](?:\[\])?/,reflinkSearch:"reflink|nolink(?!\\()",emStrong:{lDelim:/^(?:\*+(?:((?!\*)[punct])|[^\s*]))|^_+(?:((?!_)[punct])|([^\s_]))/,rDelimAst:/^[^_*]*?__[^_*]*?\*[^_*]*?(?=__)|[^*]+(?=[^*])|(?!\*)[punct](\*+)(?=[\s]|$)|[^punct\s](\*+)(?!\*)(?=[punct\s]|$)|(?!\*)[punct\s](\*+)(?=[^punct\s])|[\s](\*+)(?!\*)(?=[punct])|(?!\*)[punct](\*+)(?!\*)(?=[punct])|[^punct\s](\*+)(?=[^punct\s])/,rDelimUnd:/^[^_*]*?\*\*[^_*]*?_[^_*]*?(?=\*\*)|[^_]+(?=[^_])|(?!_)[punct](_+)(?=[\s]|$)|[^punct\s](_+)(?!_)(?=[punct\s]|$)|(?!_)[punct\s](_+)(?=[^punct\s])|[\s](_+)(?!_)(?=[punct])|(?!_)[punct](_+)(?!_)(?=[punct])/},code:/^(`+)([^`]|[^`][\s\S]*?[^`])\1(?!`)/,br:/^( {2,}|\\)\n(?!\s*$)/,del:Rt,text:/^(`+|[^`])(?:(?= {2,}\n)|[\s\S]*?(?:(?=[\\<!\[`*_]|\b_|$)|[^ ](?= {2,}\n)))/,punctuation:/^((?![*_])[\spunctuation])/};L._punctuation="\\p{P}$+<=>`^|~";L.punctuation=te(L.punctuation,"u").replace(/punctuation/g,L._punctuation).getRegex();L.blockSkip=/\[[^[\]]*?\]\([^\(\)]*?\)|`[^`]*?`|<[^<>]*?>/g;L.anyPunctuation=/\\[punct]/g;L._escapes=/\\([punct])/g;L._comment=te(z._comment).replace("(?:-->|$)","-->").getRegex();L.emStrong.lDelim=te(L.emStrong.lDelim,"u").replace(/punct/g,L._punctuation).getRegex();L.emStrong.rDelimAst=te(L.emStrong.rDelimAst,"gu").replace(/punct/g,L._punctuation).getRegex();L.emStrong.rDelimUnd=te(L.emStrong.rDelimUnd,"gu").replace(/punct/g,L._punctuation).getRegex();L.anyPunctuation=te(L.anyPunctuation,"gu").replace(/punct/g,L._punctuation).getRegex();L._escapes=te(L._escapes,"gu").replace(/punct/g,L._punctuation).getRegex();L._scheme=/[a-zA-Z][a-zA-Z0-9+.-]{1,31}/;L._email=/[a-zA-Z0-9.!#$%&'*+/=?^_`{|}~-]+(@)[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)+(?![-_])/;L.autolink=te(L.autolink).replace("scheme",L._scheme).replace("email",L._email).getRegex();L._attribute=/\s+[a-zA-Z:_][\w.:-]*(?:\s*=\s*"[^"]*"|\s*=\s*'[^']*'|\s*=\s*[^\s"'=<>`]+)?/;L.tag=te(L.tag).replace("comment",L._comment).replace("attribute",L._attribute).getRegex();L._label=/(?:\[(?:\\.|[^\[\]\\])*\]|\\.|`[^`]*`|[^\[\]\\`])*?/;L._href=/<(?:\\.|[^\n<>\\])+>|[^\s\x00-\x1f]*/;L._title=/"(?:\\"?|[^"\\])*"|'(?:\\'?|[^'\\])*'|\((?:\\\)?|[^)\\])*\)/;L.link=te(L.link).replace("label",L._label).replace("href",L._href).replace("title",L._title).getRegex();L.reflink=te(L.reflink).replace("label",L._label).replace("ref",z._label).getRegex();L.nolink=te(L.nolink).replace("ref",z._label).getRegex();L.reflinkSearch=te(L.reflinkSearch,"g").replace("reflink",L.reflink).replace("nolink",L.nolink).getRegex();L.normal={...L};L.pedantic={...L.normal,strong:{start:/^__|\*\*/,middle:/^__(?=\S)([\s\S]*?\S)__(?!_)|^\*\*(?=\S)([\s\S]*?\S)\*\*(?!\*)/,endAst:/\*\*(?!\*)/g,endUnd:/__(?!_)/g},em:{start:/^_|\*/,middle:/^()\*(?=\S)([\s\S]*?\S)\*(?!\*)|^_(?=\S)([\s\S]*?\S)_(?!_)/,endAst:/\*(?!\*)/g,endUnd:/_(?!_)/g},link:te(/^!?\[(label)\]\((.*?)\)/).replace("label",L._label).getRegex(),reflink:te(/^!?\[(label)\]\s*\[([^\]]*)\]/).replace("label",L._label).getRegex()};L.gfm={...L.normal,escape:te(L.escape).replace("])","~|])").getRegex(),_extended_email:/[A-Za-z0-9._+-]+(@)[a-zA-Z0-9-_]+(?:\.[a-zA-Z0-9-_]*[a-zA-Z0-9])+(?![-_])/,url:/^((?:ftp|https?):\/\/|www\.)(?:[a-zA-Z0-9\-]+\.?)+[^\s<]*|^email/,_backpedal:/(?:[^?!.,:;*_'"~()&]+|\([^)]*\)|&(?![a-zA-Z0-9]+;$)|[?!.,:;*_'"~)]+(?!$))+/,del:/^(~~?)(?=[^\s~])([\s\S]*?[^\s~])\1(?=[^~]|$)/,text:/^([`~]+|[^`~])(?:(?= {2,}\n)|(?=[a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-]+@)|[\s\S]*?(?:(?=[\\<!\[`*~_]|\b_|https?:\/\/|ftp:\/\/|www\.|$)|[^ ](?= {2,}\n)|[^a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-](?=[a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-]+@)))/};L.gfm.url=te(L.gfm.url,"i").replace("email",L.gfm._extended_email).getRegex();L.breaks={...L.gfm,br:te(L.br).replace("{2,}","*").getRegex(),text:te(L.gfm.text).replace("\\b_","\\b_| {2,}\\n").replace(/\{2,\}/g,"*").getRegex()};function gi(l){return l.replace(/---/g,"—").replace(/--/g,"–").replace(/(^|[-\u2014/(\[{"\s])'/g,"$1‘").replace(/'/g,"’").replace(/(^|[-\u2014/(\[{\u2018\s])"/g,"$1“").replace(/"/g,"”").replace(/\.{3}/g,"…")}function Vs(l){let e="";for(let s=0;s<l.length;s++){const t=Math.random()>.5?"x"+l.charCodeAt(s).toString(16):l.charCodeAt(s).toString();e+="&#"+t+";"}return e}class Me{constructor(e){J(this,"tokens");J(this,"options");J(this,"state");J(this,"tokenizer");J(this,"inlineQueue");this.tokens=[],this.tokens.links=Object.create(null),this.options=e||Xe,this.options.tokenizer=this.options.tokenizer||new Nt,this.tokenizer=this.options.tokenizer,this.tokenizer.options=this.options,this.tokenizer.lexer=this,this.inlineQueue=[],this.state={inLink:!1,inRawBlock:!1,top:!0};const s={block:z.normal,inline:L.normal};this.options.pedantic?(s.block=z.pedantic,s.inline=L.pedantic):this.options.gfm&&(s.block=z.gfm,this.options.breaks?s.inline=L.breaks:s.inline=L.gfm),this.tokenizer.rules=s}static get rules(){return{block:z,inline:L}}static lex(e,s){return new Me(s).lex(e)}static lexInline(e,s){return new Me(s).inlineTokens(e)}lex(e){e=e.replace(/\r\n|\r/g,`
`),this.blockTokens(e,this.tokens);let s;for(;s=this.inlineQueue.shift();)this.inlineTokens(s.src,s.tokens);return this.tokens}blockTokens(e,s=[]){this.options.pedantic?e=e.replace(/\t/g,"    ").replace(/^ +$/gm,""):e=e.replace(/^( *)(\t+)/gm,(d,c,h)=>c+"    ".repeat(h.length));let t,i,a,o;for(;e;)if(!(this.options.extensions&&this.options.extensions.block&&this.options.extensions.block.some(d=>(t=d.call({lexer:this},e,s))?(e=e.substring(t.raw.length),s.push(t),!0):!1))){if(t=this.tokenizer.space(e)){e=e.substring(t.raw.length),t.raw.length===1&&s.length>0?s[s.length-1].raw+=`
`:s.push(t);continue}if(t=this.tokenizer.code(e)){e=e.substring(t.raw.length),i=s[s.length-1],i&&(i.type==="paragraph"||i.type==="text")?(i.raw+=`
`+t.raw,i.text+=`
`+t.text,this.inlineQueue[this.inlineQueue.length-1].src=i.text):s.push(t);continue}if(t=this.tokenizer.fences(e)){e=e.substring(t.raw.length),s.push(t);continue}if(t=this.tokenizer.heading(e)){e=e.substring(t.raw.length),s.push(t);continue}if(t=this.tokenizer.hr(e)){e=e.substring(t.raw.length),s.push(t);continue}if(t=this.tokenizer.blockquote(e)){e=e.substring(t.raw.length),s.push(t);continue}if(t=this.tokenizer.list(e)){e=e.substring(t.raw.length),s.push(t);continue}if(t=this.tokenizer.html(e)){e=e.substring(t.raw.length),s.push(t);continue}if(t=this.tokenizer.def(e)){e=e.substring(t.raw.length),i=s[s.length-1],i&&(i.type==="paragraph"||i.type==="text")?(i.raw+=`
`+t.raw,i.text+=`
`+t.raw,this.inlineQueue[this.inlineQueue.length-1].src=i.text):this.tokens.links[t.tag]||(this.tokens.links[t.tag]={href:t.href,title:t.title});continue}if(t=this.tokenizer.table(e)){e=e.substring(t.raw.length),s.push(t);continue}if(t=this.tokenizer.lheading(e)){e=e.substring(t.raw.length),s.push(t);continue}if(a=e,this.options.extensions&&this.options.extensions.startBlock){let d=1/0;const c=e.slice(1);let h;this.options.extensions.startBlock.forEach(g=>{h=g.call({lexer:this},c),typeof h=="number"&&h>=0&&(d=Math.min(d,h))}),d<1/0&&d>=0&&(a=e.substring(0,d+1))}if(this.state.top&&(t=this.tokenizer.paragraph(a))){i=s[s.length-1],o&&i.type==="paragraph"?(i.raw+=`
`+t.raw,i.text+=`
`+t.text,this.inlineQueue.pop(),this.inlineQueue[this.inlineQueue.length-1].src=i.text):s.push(t),o=a.length!==e.length,e=e.substring(t.raw.length);continue}if(t=this.tokenizer.text(e)){e=e.substring(t.raw.length),i=s[s.length-1],i&&i.type==="text"?(i.raw+=`
`+t.raw,i.text+=`
`+t.text,this.inlineQueue.pop(),this.inlineQueue[this.inlineQueue.length-1].src=i.text):s.push(t);continue}if(e){const d="Infinite loop on byte: "+e.charCodeAt(0);if(this.options.silent){console.error(d);break}else throw new Error(d)}}return this.state.top=!0,s}inline(e,s=[]){return this.inlineQueue.push({src:e,tokens:s}),s}inlineTokens(e,s=[]){let t,i,a,o=e,d,c,h;if(this.tokens.links){const g=Object.keys(this.tokens.links);if(g.length>0)for(;(d=this.tokenizer.rules.inline.reflinkSearch.exec(o))!=null;)g.includes(d[0].slice(d[0].lastIndexOf("[")+1,-1))&&(o=o.slice(0,d.index)+"["+"a".repeat(d[0].length-2)+"]"+o.slice(this.tokenizer.rules.inline.reflinkSearch.lastIndex))}for(;(d=this.tokenizer.rules.inline.blockSkip.exec(o))!=null;)o=o.slice(0,d.index)+"["+"a".repeat(d[0].length-2)+"]"+o.slice(this.tokenizer.rules.inline.blockSkip.lastIndex);for(;(d=this.tokenizer.rules.inline.anyPunctuation.exec(o))!=null;)o=o.slice(0,d.index)+"++"+o.slice(this.tokenizer.rules.inline.anyPunctuation.lastIndex);for(;e;)if(c||(h=""),c=!1,!(this.options.extensions&&this.options.extensions.inline&&this.options.extensions.inline.some(g=>(t=g.call({lexer:this},e,s))?(e=e.substring(t.raw.length),s.push(t),!0):!1))){if(t=this.tokenizer.escape(e)){e=e.substring(t.raw.length),s.push(t);continue}if(t=this.tokenizer.tag(e)){e=e.substring(t.raw.length),i=s[s.length-1],i&&t.type==="text"&&i.type==="text"?(i.raw+=t.raw,i.text+=t.text):s.push(t);continue}if(t=this.tokenizer.link(e)){e=e.substring(t.raw.length),s.push(t);continue}if(t=this.tokenizer.reflink(e,this.tokens.links)){e=e.substring(t.raw.length),i=s[s.length-1],i&&t.type==="text"&&i.type==="text"?(i.raw+=t.raw,i.text+=t.text):s.push(t);continue}if(t=this.tokenizer.emStrong(e,o,h)){e=e.substring(t.raw.length),s.push(t);continue}if(t=this.tokenizer.codespan(e)){e=e.substring(t.raw.length),s.push(t);continue}if(t=this.tokenizer.br(e)){e=e.substring(t.raw.length),s.push(t);continue}if(t=this.tokenizer.del(e)){e=e.substring(t.raw.length),s.push(t);continue}if(t=this.tokenizer.autolink(e,Vs)){e=e.substring(t.raw.length),s.push(t);continue}if(!this.state.inLink&&(t=this.tokenizer.url(e,Vs))){e=e.substring(t.raw.length),s.push(t);continue}if(a=e,this.options.extensions&&this.options.extensions.startInline){let g=1/0;const _=e.slice(1);let k;this.options.extensions.startInline.forEach(w=>{k=w.call({lexer:this},_),typeof k=="number"&&k>=0&&(g=Math.min(g,k))}),g<1/0&&g>=0&&(a=e.substring(0,g+1))}if(t=this.tokenizer.inlineText(a,gi)){e=e.substring(t.raw.length),t.raw.slice(-1)!=="_"&&(h=t.raw.slice(-1)),c=!0,i=s[s.length-1],i&&i.type==="text"?(i.raw+=t.raw,i.text+=t.text):s.push(t);continue}if(e){const g="Infinite loop on byte: "+e.charCodeAt(0);if(this.options.silent){console.error(g);break}else throw new Error(g)}}return s}}class Dt{constructor(e){J(this,"options");this.options=e||Xe}code(e,s,t){var a;const i=(a=(s||"").match(/^\S*/))==null?void 0:a[0];if(this.options.highlight){const o=this.options.highlight(e,i);o!=null&&o!==e&&(t=!0,e=o)}return e=e.replace(/\n$/,"")+`
`,i?'<pre><code class="'+this.options.langPrefix+_e(i)+'">'+(t?e:_e(e,!0))+`</code></pre>
`:"<pre><code>"+(t?e:_e(e,!0))+`</code></pre>
`}blockquote(e){return`<blockquote>
${e}</blockquote>
`}html(e,s){return e}heading(e,s,t,i){if(this.options.headerIds){const a=this.options.headerPrefix+i.slug(t);return`<h${s} id="${a}">${e}</h${s}>
`}return`<h${s}>${e}</h${s}>
`}hr(){return this.options.xhtml?`<hr/>
`:`<hr>
`}list(e,s,t){const i=s?"ol":"ul",a=s&&t!==1?' start="'+t+'"':"";return"<"+i+a+`>
`+e+"</"+i+`>
`}listitem(e,s,t){return`<li>${e}</li>
`}checkbox(e){return"<input "+(e?'checked="" ':"")+'disabled="" type="checkbox"'+(this.options.xhtml?" /":"")+"> "}paragraph(e){return`<p>${e}</p>
`}table(e,s){return s&&(s=`<tbody>${s}</tbody>`),`<table>
<thead>
`+e+`</thead>
`+s+`</table>
`}tablerow(e){return`<tr>
${e}</tr>
`}tablecell(e,s){const t=s.header?"th":"td";return(s.align?`<${t} align="${s.align}">`:`<${t}>`)+e+`</${t}>
`}strong(e){return`<strong>${e}</strong>`}em(e){return`<em>${e}</em>`}codespan(e){return`<code>${e}</code>`}br(){return this.options.xhtml?"<br/>":"<br>"}del(e){return`<del>${e}</del>`}link(e,s,t){const i=$s(this.options.sanitize,this.options.baseUrl,e);if(i===null)return t;e=i;let a='<a href="'+e+'"';return s&&(a+=' title="'+s+'"'),a+=">"+t+"</a>",a}image(e,s,t){const i=$s(this.options.sanitize,this.options.baseUrl,e);if(i===null)return t;e=i;let a=`<img src="${e}" alt="${t}"`;return s&&(a+=` title="${s}"`),a+=this.options.xhtml?"/>":">",a}text(e){return e}}class ds{strong(e){return e}em(e){return e}codespan(e){return e}del(e){return e}html(e){return e}text(e){return e}link(e,s,t){return""+t}image(e,s,t){return""+t}br(){return""}}class ps{constructor(){J(this,"seen");this.seen={}}serialize(e){return e.toLowerCase().trim().replace(/<[!\/a-z].*?>/ig,"").replace(/[\u2000-\u206F\u2E00-\u2E7F\\'!"#$%&()*+,./:;<=>?@[\]^`{|}~]/g,"").replace(/\s/g,"-")}getNextSafeSlug(e,s){let t=e,i=0;if(this.seen.hasOwnProperty(t)){i=this.seen[e];do i++,t=e+"-"+i;while(this.seen.hasOwnProperty(t))}return s||(this.seen[e]=i,this.seen[t]=0),t}slug(e,s={}){const t=this.serialize(e);return this.getNextSafeSlug(t,s.dryrun)}}class Pe{constructor(e){J(this,"options");J(this,"renderer");J(this,"textRenderer");J(this,"slugger");this.options=e||Xe,this.options.renderer=this.options.renderer||new Dt,this.renderer=this.options.renderer,this.renderer.options=this.options,this.textRenderer=new ds,this.slugger=new ps}static parse(e,s){return new Pe(s).parse(e)}static parseInline(e,s){return new Pe(s).parseInline(e)}parse(e,s=!0){let t="";for(let i=0;i<e.length;i++){const a=e[i];if(this.options.extensions&&this.options.extensions.renderers&&this.options.extensions.renderers[a.type]){const o=a,d=this.options.extensions.renderers[o.type].call({parser:this},o);if(d!==!1||!["space","hr","heading","code","table","blockquote","list","html","paragraph","text"].includes(o.type)){t+=d||"";continue}}switch(a.type){case"space":continue;case"hr":{t+=this.renderer.hr();continue}case"heading":{const o=a;t+=this.renderer.heading(this.parseInline(o.tokens),o.depth,Tn(this.parseInline(o.tokens,this.textRenderer)),this.slugger);continue}case"code":{const o=a;t+=this.renderer.code(o.text,o.lang,!!o.escaped);continue}case"table":{const o=a;let d="",c="";for(let g=0;g<o.header.length;g++)c+=this.renderer.tablecell(this.parseInline(o.header[g].tokens),{header:!0,align:o.align[g]});d+=this.renderer.tablerow(c);let h="";for(let g=0;g<o.rows.length;g++){const _=o.rows[g];c="";for(let k=0;k<_.length;k++)c+=this.renderer.tablecell(this.parseInline(_[k].tokens),{header:!1,align:o.align[k]});h+=this.renderer.tablerow(c)}t+=this.renderer.table(d,h);continue}case"blockquote":{const o=a,d=this.parse(o.tokens);t+=this.renderer.blockquote(d);continue}case"list":{const o=a,d=o.ordered,c=o.start,h=o.loose;let g="";for(let _=0;_<o.items.length;_++){const k=o.items[_],w=k.checked,E=k.task;let C="";if(k.task){const n=this.renderer.checkbox(!!w);h?k.tokens.length>0&&k.tokens[0].type==="paragraph"?(k.tokens[0].text=n+" "+k.tokens[0].text,k.tokens[0].tokens&&k.tokens[0].tokens.length>0&&k.tokens[0].tokens[0].type==="text"&&(k.tokens[0].tokens[0].text=n+" "+k.tokens[0].tokens[0].text)):k.tokens.unshift({type:"text",text:n}):C+=n}C+=this.parse(k.tokens,h),g+=this.renderer.listitem(C,E,!!w)}t+=this.renderer.list(g,d,c);continue}case"html":{const o=a;t+=this.renderer.html(o.text,o.block);continue}case"paragraph":{const o=a;t+=this.renderer.paragraph(this.parseInline(o.tokens));continue}case"text":{let o=a,d=o.tokens?this.parseInline(o.tokens):o.text;for(;i+1<e.length&&e[i+1].type==="text";)o=e[++i],d+=`
`+(o.tokens?this.parseInline(o.tokens):o.text);t+=s?this.renderer.paragraph(d):d;continue}default:{const o='Token with "'+a.type+'" type was not found.';if(this.options.silent)return console.error(o),"";throw new Error(o)}}}return t}parseInline(e,s){s=s||this.renderer;let t="";for(let i=0;i<e.length;i++){const a=e[i];if(this.options.extensions&&this.options.extensions.renderers&&this.options.extensions.renderers[a.type]){const o=this.options.extensions.renderers[a.type].call({parser:this},a);if(o!==!1||!["escape","html","link","image","strong","em","codespan","br","del","text"].includes(a.type)){t+=o||"";continue}}switch(a.type){case"escape":{const o=a;t+=s.text(o.text);break}case"html":{const o=a;t+=s.html(o.text);break}case"link":{const o=a;t+=s.link(o.href,o.title,this.parseInline(o.tokens,s));break}case"image":{const o=a;t+=s.image(o.href,o.title,o.text);break}case"strong":{const o=a;t+=s.strong(this.parseInline(o.tokens,s));break}case"em":{const o=a;t+=s.em(this.parseInline(o.tokens,s));break}case"codespan":{const o=a;t+=s.codespan(o.text);break}case"br":{t+=s.br();break}case"del":{const o=a;t+=s.del(this.parseInline(o.tokens,s));break}case"text":{const o=a;t+=s.text(o.text);break}default:{const o='Token with "'+a.type+'" type was not found.';if(this.options.silent)return console.error(o),"";throw new Error(o)}}}return t}}class ft{constructor(e){J(this,"options");this.options=e||Xe}preprocess(e){return e}postprocess(e){return e}}J(ft,"passThroughHooks",new Set(["preprocess","postprocess"]));var qe,as,Sn;class _i{constructor(...e){Ns(this,qe);J(this,"defaults",us());J(this,"options",this.setOptions);J(this,"parse",wt(this,qe,as).call(this,Me.lex,Pe.parse));J(this,"parseInline",wt(this,qe,as).call(this,Me.lexInline,Pe.parseInline));J(this,"Parser",Pe);J(this,"parser",Pe.parse);J(this,"Renderer",Dt);J(this,"TextRenderer",ds);J(this,"Lexer",Me);J(this,"lexer",Me.lex);J(this,"Tokenizer",Nt);J(this,"Slugger",ps);J(this,"Hooks",ft);this.use(...e)}walkTokens(e,s){var i,a;let t=[];for(const o of e)switch(t=t.concat(s.call(this,o)),o.type){case"table":{const d=o;for(const c of d.header)t=t.concat(this.walkTokens(c.tokens,s));for(const c of d.rows)for(const h of c)t=t.concat(this.walkTokens(h.tokens,s));break}case"list":{const d=o;t=t.concat(this.walkTokens(d.items,s));break}default:{const d=o;(a=(i=this.defaults.extensions)==null?void 0:i.childTokens)!=null&&a[d.type]?this.defaults.extensions.childTokens[d.type].forEach(c=>{t=t.concat(this.walkTokens(d[c],s))}):d.tokens&&(t=t.concat(this.walkTokens(d.tokens,s)))}}return t}use(...e){const s=this.defaults.extensions||{renderers:{},childTokens:{}};return e.forEach(t=>{const i={...t};if(i.async=this.defaults.async||i.async||!1,t.extensions&&(t.extensions.forEach(a=>{if(!a.name)throw new Error("extension name required");if("renderer"in a){const o=s.renderers[a.name];o?s.renderers[a.name]=function(...d){let c=a.renderer.apply(this,d);return c===!1&&(c=o.apply(this,d)),c}:s.renderers[a.name]=a.renderer}if("tokenizer"in a){if(!a.level||a.level!=="block"&&a.level!=="inline")throw new Error("extension level must be 'block' or 'inline'");const o=s[a.level];o?o.unshift(a.tokenizer):s[a.level]=[a.tokenizer],a.start&&(a.level==="block"?s.startBlock?s.startBlock.push(a.start):s.startBlock=[a.start]:a.level==="inline"&&(s.startInline?s.startInline.push(a.start):s.startInline=[a.start]))}"childTokens"in a&&a.childTokens&&(s.childTokens[a.name]=a.childTokens)}),i.extensions=s),t.renderer){const a=this.defaults.renderer||new Dt(this.defaults);for(const o in t.renderer){const d=t.renderer[o],c=o,h=a[c];a[c]=(...g)=>{let _=d.apply(a,g);return _===!1&&(_=h.apply(a,g)),_||""}}i.renderer=a}if(t.tokenizer){const a=this.defaults.tokenizer||new Nt(this.defaults);for(const o in t.tokenizer){const d=t.tokenizer[o],c=o,h=a[c];a[c]=(...g)=>{let _=d.apply(a,g);return _===!1&&(_=h.apply(a,g)),_}}i.tokenizer=a}if(t.hooks){const a=this.defaults.hooks||new ft;for(const o in t.hooks){const d=t.hooks[o],c=o,h=a[c];ft.passThroughHooks.has(o)?a[c]=g=>{if(this.defaults.async)return Promise.resolve(d.call(a,g)).then(k=>h.call(a,k));const _=d.call(a,g);return h.call(a,_)}:a[c]=(...g)=>{let _=d.apply(a,g);return _===!1&&(_=h.apply(a,g)),_}}i.hooks=a}if(t.walkTokens){const a=this.defaults.walkTokens,o=t.walkTokens;i.walkTokens=function(d){let c=[];return c.push(o.call(this,d)),a&&(c=c.concat(a.call(this,d))),c}}this.defaults={...this.defaults,...i}}),this}setOptions(e){return this.defaults={...this.defaults,...e},this}}qe=new WeakSet,as=function(e,s){return(t,i,a)=>{typeof i=="function"&&(a=i,i=null);const o={...i},d={...this.defaults,...o};this.defaults.async===!0&&o.async===!1&&(d.silent||console.warn("marked(): The async option was set to true by an extension. The async: false option sent to parse will be ignored."),d.async=!0);const c=wt(this,qe,Sn).call(this,!!d.silent,!!d.async,a);if(typeof t>"u"||t===null)return c(new Error("marked(): input parameter is undefined or null"));if(typeof t!="string")return c(new Error("marked(): input parameter is of type "+Object.prototype.toString.call(t)+", string expected"));if(fi(d,a),d.hooks&&(d.hooks.options=d),a){const h=a,g=d.highlight;let _;try{d.hooks&&(t=d.hooks.preprocess(t)),_=e(t,d)}catch(E){return c(E)}const k=E=>{let C;if(!E)try{d.walkTokens&&this.walkTokens(_,d.walkTokens),C=s(_,d),d.hooks&&(C=d.hooks.postprocess(C))}catch(n){E=n}return d.highlight=g,E?c(E):h(null,C)};if(!g||g.length<3||(delete d.highlight,!_.length))return k();let w=0;this.walkTokens(_,E=>{E.type==="code"&&(w++,setTimeout(()=>{g(E.text,E.lang,(C,n)=>{if(C)return k(C);n!=null&&n!==E.text&&(E.text=n,E.escaped=!0),w--,w===0&&k()})},0))}),w===0&&k();return}if(d.async)return Promise.resolve(d.hooks?d.hooks.preprocess(t):t).then(h=>e(h,d)).then(h=>d.walkTokens?Promise.all(this.walkTokens(h,d.walkTokens)).then(()=>h):h).then(h=>s(h,d)).then(h=>d.hooks?d.hooks.postprocess(h):h).catch(c);try{d.hooks&&(t=d.hooks.preprocess(t));const h=e(t,d);d.walkTokens&&this.walkTokens(h,d.walkTokens);let g=s(h,d);return d.hooks&&(g=d.hooks.postprocess(g)),g}catch(h){return c(h)}}},Sn=function(e,s,t){return i=>{if(i.message+=`
Please report this to https://github.com/markedjs/marked.`,e){const a="<p>An error occurred:</p><pre>"+_e(i.message+"",!0)+"</pre>";if(s)return Promise.resolve(a);if(t){t(null,a);return}return a}if(s)return Promise.reject(i);if(t){t(i);return}throw i}};const Ze=new _i;function ee(l,e,s){return Ze.parse(l,e,s)}ee.options=ee.setOptions=function(l){return Ze.setOptions(l),ee.defaults=Ze.defaults,vn(ee.defaults),ee};ee.getDefaults=us;ee.defaults=Xe;ee.use=function(...l){return Ze.use(...l),ee.defaults=Ze.defaults,vn(ee.defaults),ee};ee.walkTokens=function(l,e){return Ze.walkTokens(l,e)};ee.parseInline=Ze.parseInline;ee.Parser=Pe;ee.parser=Pe.parse;ee.Renderer=Dt;ee.TextRenderer=ds;ee.Lexer=Me;ee.lexer=Me.lex;ee.Tokenizer=Nt;ee.Slugger=ps;ee.Hooks=ft;ee.parse=ee;ee.options;ee.setOptions;ee.use;ee.walkTokens;ee.parseInline;Pe.parse;Me.lex;/*! @license DOMPurify 3.2.3 | (c) Cure53 and other contributors | Released under the Apache license 2.0 and Mozilla Public License 2.0 | github.com/cure53/DOMPurify/blob/3.2.3/LICENSE */const{entries:On,setPrototypeOf:Us,isFrozen:bi,getPrototypeOf:ki,getOwnPropertyDescriptor:Ei}=Object;let{freeze:ve,seal:Le,create:An}=Object,{apply:rs,construct:os}=typeof Reflect<"u"&&Reflect;ve||(ve=function(e){return e});Le||(Le=function(e){return e});rs||(rs=function(e,s,t){return e.apply(s,t)});os||(os=function(e,s){return new e(...s)});const St=Se(Array.prototype.forEach),Hs=Se(Array.prototype.pop),rt=Se(Array.prototype.push),Ct=Se(String.prototype.toLowerCase),Yt=Se(String.prototype.toString),Bs=Se(String.prototype.match),ot=Se(String.prototype.replace),vi=Se(String.prototype.indexOf),wi=Se(String.prototype.trim),Ce=Se(Object.prototype.hasOwnProperty),Ee=Se(RegExp.prototype.test),ct=yi(TypeError);function Se(l){return function(e){for(var s=arguments.length,t=new Array(s>1?s-1:0),i=1;i<s;i++)t[i-1]=arguments[i];return rs(l,e,t)}}function yi(l){return function(){for(var e=arguments.length,s=new Array(e),t=0;t<e;t++)s[t]=arguments[t];return os(l,s)}}function W(l,e){let s=arguments.length>2&&arguments[2]!==void 0?arguments[2]:Ct;Us&&Us(l,null);let t=e.length;for(;t--;){let i=e[t];if(typeof i=="string"){const a=s(i);a!==i&&(bi(e)||(e[t]=a),i=a)}l[i]=!0}return l}function Ti(l){for(let e=0;e<l.length;e++)Ce(l,e)||(l[e]=null);return l}function He(l){const e=An(null);for(const[s,t]of On(l))Ce(l,s)&&(Array.isArray(t)?e[s]=Ti(t):t&&typeof t=="object"&&t.constructor===Object?e[s]=He(t):e[s]=t);return e}function ht(l,e){for(;l!==null;){const t=Ei(l,e);if(t){if(t.get)return Se(t.get);if(typeof t.value=="function")return Se(t.value)}l=ki(l)}function s(){return null}return s}const Gs=ve(["a","abbr","acronym","address","area","article","aside","audio","b","bdi","bdo","big","blink","blockquote","body","br","button","canvas","caption","center","cite","code","col","colgroup","content","data","datalist","dd","decorator","del","details","dfn","dialog","dir","div","dl","dt","element","em","fieldset","figcaption","figure","font","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","img","input","ins","kbd","label","legend","li","main","map","mark","marquee","menu","menuitem","meter","nav","nobr","ol","optgroup","option","output","p","picture","pre","progress","q","rp","rt","ruby","s","samp","section","select","shadow","small","source","spacer","span","strike","strong","style","sub","summary","sup","table","tbody","td","template","textarea","tfoot","th","thead","time","tr","track","tt","u","ul","var","video","wbr"]),Qt=ve(["svg","a","altglyph","altglyphdef","altglyphitem","animatecolor","animatemotion","animatetransform","circle","clippath","defs","desc","ellipse","filter","font","g","glyph","glyphref","hkern","image","line","lineargradient","marker","mask","metadata","mpath","path","pattern","polygon","polyline","radialgradient","rect","stop","style","switch","symbol","text","textpath","title","tref","tspan","view","vkern"]),Kt=ve(["feBlend","feColorMatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDistantLight","feDropShadow","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feImage","feMerge","feMergeNode","feMorphology","feOffset","fePointLight","feSpecularLighting","feSpotLight","feTile","feTurbulence"]),Si=ve(["animate","color-profile","cursor","discard","font-face","font-face-format","font-face-name","font-face-src","font-face-uri","foreignobject","hatch","hatchpath","mesh","meshgradient","meshpatch","meshrow","missing-glyph","script","set","solidcolor","unknown","use"]),Jt=ve(["math","menclose","merror","mfenced","mfrac","mglyph","mi","mlabeledtr","mmultiscripts","mn","mo","mover","mpadded","mphantom","mroot","mrow","ms","mspace","msqrt","mstyle","msub","msup","msubsup","mtable","mtd","mtext","mtr","munder","munderover","mprescripts"]),Oi=ve(["maction","maligngroup","malignmark","mlongdiv","mscarries","mscarry","msgroup","mstack","msline","msrow","semantics","annotation","annotation-xml","mprescripts","none"]),js=ve(["#text"]),Zs=ve(["accept","action","align","alt","autocapitalize","autocomplete","autopictureinpicture","autoplay","background","bgcolor","border","capture","cellpadding","cellspacing","checked","cite","class","clear","color","cols","colspan","controls","controlslist","coords","crossorigin","datetime","decoding","default","dir","disabled","disablepictureinpicture","disableremoteplayback","download","draggable","enctype","enterkeyhint","face","for","headers","height","hidden","high","href","hreflang","id","inputmode","integrity","ismap","kind","label","lang","list","loading","loop","low","max","maxlength","media","method","min","minlength","multiple","muted","name","nonce","noshade","novalidate","nowrap","open","optimum","pattern","placeholder","playsinline","popover","popovertarget","popovertargetaction","poster","preload","pubdate","radiogroup","readonly","rel","required","rev","reversed","role","rows","rowspan","spellcheck","scope","selected","shape","size","sizes","span","srclang","start","src","srcset","step","style","summary","tabindex","title","translate","type","usemap","valign","value","width","wrap","xmlns","slot"]),es=ve(["accent-height","accumulate","additive","alignment-baseline","amplitude","ascent","attributename","attributetype","azimuth","basefrequency","baseline-shift","begin","bias","by","class","clip","clippathunits","clip-path","clip-rule","color","color-interpolation","color-interpolation-filters","color-profile","color-rendering","cx","cy","d","dx","dy","diffuseconstant","direction","display","divisor","dur","edgemode","elevation","end","exponent","fill","fill-opacity","fill-rule","filter","filterunits","flood-color","flood-opacity","font-family","font-size","font-size-adjust","font-stretch","font-style","font-variant","font-weight","fx","fy","g1","g2","glyph-name","glyphref","gradientunits","gradienttransform","height","href","id","image-rendering","in","in2","intercept","k","k1","k2","k3","k4","kerning","keypoints","keysplines","keytimes","lang","lengthadjust","letter-spacing","kernelmatrix","kernelunitlength","lighting-color","local","marker-end","marker-mid","marker-start","markerheight","markerunits","markerwidth","maskcontentunits","maskunits","max","mask","media","method","mode","min","name","numoctaves","offset","operator","opacity","order","orient","orientation","origin","overflow","paint-order","path","pathlength","patterncontentunits","patterntransform","patternunits","points","preservealpha","preserveaspectratio","primitiveunits","r","rx","ry","radius","refx","refy","repeatcount","repeatdur","restart","result","rotate","scale","seed","shape-rendering","slope","specularconstant","specularexponent","spreadmethod","startoffset","stddeviation","stitchtiles","stop-color","stop-opacity","stroke-dasharray","stroke-dashoffset","stroke-linecap","stroke-linejoin","stroke-miterlimit","stroke-opacity","stroke","stroke-width","style","surfacescale","systemlanguage","tabindex","tablevalues","targetx","targety","transform","transform-origin","text-anchor","text-decoration","text-rendering","textlength","type","u1","u2","unicode","values","viewbox","visibility","version","vert-adv-y","vert-origin-x","vert-origin-y","width","word-spacing","wrap","writing-mode","xchannelselector","ychannelselector","x","x1","x2","xmlns","y","y1","y2","z","zoomandpan"]),qs=ve(["accent","accentunder","align","bevelled","close","columnsalign","columnlines","columnspan","denomalign","depth","dir","display","displaystyle","encoding","fence","frame","height","href","id","largeop","length","linethickness","lspace","lquote","mathbackground","mathcolor","mathsize","mathvariant","maxsize","minsize","movablelimits","notation","numalign","open","rowalign","rowlines","rowspacing","rowspan","rspace","rquote","scriptlevel","scriptminsize","scriptsizemultiplier","selection","separator","separators","stretchy","subscriptshift","supscriptshift","symmetric","voffset","width","xmlns"]),Ot=ve(["xlink:href","xml:id","xlink:title","xml:space","xmlns:xlink"]),Ai=Le(/\{\{[\w\W]*|[\w\W]*\}\}/gm),Li=Le(/<%[\w\W]*|[\w\W]*%>/gm),xi=Le(/\$\{[\w\W]*}/gm),Ci=Le(/^data-[\-\w.\u00B7-\uFFFF]+$/),Ii=Le(/^aria-[\-\w]+$/),Ln=Le(/^(?:(?:(?:f|ht)tps?|mailto|tel|callto|sms|cid|xmpp):|[^a-z]|[a-z+.\-]+(?:[^a-z+.\-:]|$))/i),Ri=Le(/^(?:\w+script|data):/i),Ni=Le(/[\u0000-\u0020\u00A0\u1680\u180E\u2000-\u2029\u205F\u3000]/g),xn=Le(/^html$/i),Di=Le(/^[a-z][.\w]*(-[.\w]+)+$/i);var Xs=Object.freeze({__proto__:null,ARIA_ATTR:Ii,ATTR_WHITESPACE:Ni,CUSTOM_ELEMENT:Di,DATA_ATTR:Ci,DOCTYPE_NAME:xn,ERB_EXPR:Li,IS_ALLOWED_URI:Ln,IS_SCRIPT_OR_DATA:Ri,MUSTACHE_EXPR:Ai,TMPLIT_EXPR:xi});const ut={element:1,attribute:2,text:3,cdataSection:4,entityReference:5,entityNode:6,progressingInstruction:7,comment:8,document:9,documentType:10,documentFragment:11,notation:12},Mi=function(){return typeof window>"u"?null:window},Pi=function(e,s){if(typeof e!="object"||typeof e.createPolicy!="function")return null;let t=null;const i="data-tt-policy-suffix";s&&s.hasAttribute(i)&&(t=s.getAttribute(i));const a="dompurify"+(t?"#"+t:"");try{return e.createPolicy(a,{createHTML(o){return o},createScriptURL(o){return o}})}catch{return console.warn("TrustedTypes policy "+a+" could not be created."),null}},Ws=function(){return{afterSanitizeAttributes:[],afterSanitizeElements:[],afterSanitizeShadowDOM:[],beforeSanitizeAttributes:[],beforeSanitizeElements:[],beforeSanitizeShadowDOM:[],uponSanitizeAttribute:[],uponSanitizeElement:[],uponSanitizeShadowNode:[]}};function Cn(){let l=arguments.length>0&&arguments[0]!==void 0?arguments[0]:Mi();const e=U=>Cn(U);if(e.version="3.2.3",e.removed=[],!l||!l.document||l.document.nodeType!==ut.document)return e.isSupported=!1,e;let{document:s}=l;const t=s,i=t.currentScript,{DocumentFragment:a,HTMLTemplateElement:o,Node:d,Element:c,NodeFilter:h,NamedNodeMap:g=l.NamedNodeMap||l.MozNamedAttrMap,HTMLFormElement:_,DOMParser:k,trustedTypes:w}=l,E=c.prototype,C=ht(E,"cloneNode"),n=ht(E,"remove"),r=ht(E,"nextSibling"),p=ht(E,"childNodes"),u=ht(E,"parentNode");if(typeof o=="function"){const U=s.createElement("template");U.content&&U.content.ownerDocument&&(s=U.content.ownerDocument)}let m,v="";const{implementation:b,createNodeIterator:y,createDocumentFragment:O,getElementsByTagName:D}=s,{importNode:M}=t;let G=Ws();e.isSupported=typeof On=="function"&&typeof u=="function"&&b&&b.createHTMLDocument!==void 0;const{MUSTACHE_EXPR:Y,ERB_EXPR:j,TMPLIT_EXPR:Z,DATA_ATTR:le,ARIA_ATTR:se,IS_SCRIPT_OR_DATA:de,ATTR_WHITESPACE:ne,CUSTOM_ELEMENT:I}=Xs;let{IS_ALLOWED_URI:N}=Xs,H=null;const T=W({},[...Gs,...Qt,...Kt,...Jt,...js]);let R=null;const X=W({},[...Zs,...es,...qs,...Ot]);let ie=Object.seal(An(null,{tagNameCheck:{writable:!0,configurable:!1,enumerable:!0,value:null},attributeNameCheck:{writable:!0,configurable:!1,enumerable:!0,value:null},allowCustomizedBuiltInElements:{writable:!0,configurable:!1,enumerable:!0,value:!1}})),B=null,Q=null,K=!0,xe=!0,nt=!1,fe=!0,$e=!1,We=!0,be=!1,Ue=!1,Bt=!1,Ye=!1,mt=!1,gt=!1,fs=!0,ms=!1;const Fn="user-content-";let Gt=!0,it=!1,Qe={},Ke=null;const gs=W({},["annotation-xml","audio","colgroup","desc","foreignobject","head","iframe","math","mi","mn","mo","ms","mtext","noembed","noframes","noscript","plaintext","script","style","svg","template","thead","title","video","xmp"]);let _s=null;const bs=W({},["audio","video","img","source","image","track"]);let jt=null;const ks=W({},["alt","class","for","id","label","name","pattern","placeholder","role","summary","title","value","style","xmlns"]),_t="http://www.w3.org/1998/Math/MathML",bt="http://www.w3.org/2000/svg",ze="http://www.w3.org/1999/xhtml";let Je=ze,Zt=!1,qt=null;const Vn=W({},[_t,bt,ze],Yt);let kt=W({},["mi","mo","mn","ms","mtext"]),Et=W({},["annotation-xml"]);const Un=W({},["title","style","font","a","script"]);let lt=null;const Hn=["application/xhtml+xml","text/html"],Bn="text/html";let pe=null,et=null;const Gn=s.createElement("form"),Es=function(f){return f instanceof RegExp||f instanceof Function},Xt=function(){let f=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};if(!(et&&et===f)){if((!f||typeof f!="object")&&(f={}),f=He(f),lt=Hn.indexOf(f.PARSER_MEDIA_TYPE)===-1?Bn:f.PARSER_MEDIA_TYPE,pe=lt==="application/xhtml+xml"?Yt:Ct,H=Ce(f,"ALLOWED_TAGS")?W({},f.ALLOWED_TAGS,pe):T,R=Ce(f,"ALLOWED_ATTR")?W({},f.ALLOWED_ATTR,pe):X,qt=Ce(f,"ALLOWED_NAMESPACES")?W({},f.ALLOWED_NAMESPACES,Yt):Vn,jt=Ce(f,"ADD_URI_SAFE_ATTR")?W(He(ks),f.ADD_URI_SAFE_ATTR,pe):ks,_s=Ce(f,"ADD_DATA_URI_TAGS")?W(He(bs),f.ADD_DATA_URI_TAGS,pe):bs,Ke=Ce(f,"FORBID_CONTENTS")?W({},f.FORBID_CONTENTS,pe):gs,B=Ce(f,"FORBID_TAGS")?W({},f.FORBID_TAGS,pe):{},Q=Ce(f,"FORBID_ATTR")?W({},f.FORBID_ATTR,pe):{},Qe=Ce(f,"USE_PROFILES")?f.USE_PROFILES:!1,K=f.ALLOW_ARIA_ATTR!==!1,xe=f.ALLOW_DATA_ATTR!==!1,nt=f.ALLOW_UNKNOWN_PROTOCOLS||!1,fe=f.ALLOW_SELF_CLOSE_IN_ATTR!==!1,$e=f.SAFE_FOR_TEMPLATES||!1,We=f.SAFE_FOR_XML!==!1,be=f.WHOLE_DOCUMENT||!1,Ye=f.RETURN_DOM||!1,mt=f.RETURN_DOM_FRAGMENT||!1,gt=f.RETURN_TRUSTED_TYPE||!1,Bt=f.FORCE_BODY||!1,fs=f.SANITIZE_DOM!==!1,ms=f.SANITIZE_NAMED_PROPS||!1,Gt=f.KEEP_CONTENT!==!1,it=f.IN_PLACE||!1,N=f.ALLOWED_URI_REGEXP||Ln,Je=f.NAMESPACE||ze,kt=f.MATHML_TEXT_INTEGRATION_POINTS||kt,Et=f.HTML_INTEGRATION_POINTS||Et,ie=f.CUSTOM_ELEMENT_HANDLING||{},f.CUSTOM_ELEMENT_HANDLING&&Es(f.CUSTOM_ELEMENT_HANDLING.tagNameCheck)&&(ie.tagNameCheck=f.CUSTOM_ELEMENT_HANDLING.tagNameCheck),f.CUSTOM_ELEMENT_HANDLING&&Es(f.CUSTOM_ELEMENT_HANDLING.attributeNameCheck)&&(ie.attributeNameCheck=f.CUSTOM_ELEMENT_HANDLING.attributeNameCheck),f.CUSTOM_ELEMENT_HANDLING&&typeof f.CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements=="boolean"&&(ie.allowCustomizedBuiltInElements=f.CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements),$e&&(xe=!1),mt&&(Ye=!0),Qe&&(H=W({},js),R=[],Qe.html===!0&&(W(H,Gs),W(R,Zs)),Qe.svg===!0&&(W(H,Qt),W(R,es),W(R,Ot)),Qe.svgFilters===!0&&(W(H,Kt),W(R,es),W(R,Ot)),Qe.mathMl===!0&&(W(H,Jt),W(R,qs),W(R,Ot))),f.ADD_TAGS&&(H===T&&(H=He(H)),W(H,f.ADD_TAGS,pe)),f.ADD_ATTR&&(R===X&&(R=He(R)),W(R,f.ADD_ATTR,pe)),f.ADD_URI_SAFE_ATTR&&W(jt,f.ADD_URI_SAFE_ATTR,pe),f.FORBID_CONTENTS&&(Ke===gs&&(Ke=He(Ke)),W(Ke,f.FORBID_CONTENTS,pe)),Gt&&(H["#text"]=!0),be&&W(H,["html","head","body"]),H.table&&(W(H,["tbody"]),delete B.tbody),f.TRUSTED_TYPES_POLICY){if(typeof f.TRUSTED_TYPES_POLICY.createHTML!="function")throw ct('TRUSTED_TYPES_POLICY configuration option must provide a "createHTML" hook.');if(typeof f.TRUSTED_TYPES_POLICY.createScriptURL!="function")throw ct('TRUSTED_TYPES_POLICY configuration option must provide a "createScriptURL" hook.');m=f.TRUSTED_TYPES_POLICY,v=m.createHTML("")}else m===void 0&&(m=Pi(w,i)),m!==null&&typeof v=="string"&&(v=m.createHTML(""));ve&&ve(f),et=f}},vs=W({},[...Qt,...Kt,...Si]),ws=W({},[...Jt,...Oi]),jn=function(f){let S=u(f);(!S||!S.tagName)&&(S={namespaceURI:Je,tagName:"template"});const P=Ct(f.tagName),he=Ct(S.tagName);return qt[f.namespaceURI]?f.namespaceURI===bt?S.namespaceURI===ze?P==="svg":S.namespaceURI===_t?P==="svg"&&(he==="annotation-xml"||kt[he]):!!vs[P]:f.namespaceURI===_t?S.namespaceURI===ze?P==="math":S.namespaceURI===bt?P==="math"&&Et[he]:!!ws[P]:f.namespaceURI===ze?S.namespaceURI===bt&&!Et[he]||S.namespaceURI===_t&&!kt[he]?!1:!ws[P]&&(Un[P]||!vs[P]):!!(lt==="application/xhtml+xml"&&qt[f.namespaceURI]):!1},Re=function(f){rt(e.removed,{element:f});try{u(f).removeChild(f)}catch{n(f)}},vt=function(f,S){try{rt(e.removed,{attribute:S.getAttributeNode(f),from:S})}catch{rt(e.removed,{attribute:null,from:S})}if(S.removeAttribute(f),f==="is")if(Ye||mt)try{Re(S)}catch{}else try{S.setAttribute(f,"")}catch{}},ys=function(f){let S=null,P=null;if(Bt)f="<remove></remove>"+f;else{const me=Bs(f,/^[\r\n\t ]+/);P=me&&me[0]}lt==="application/xhtml+xml"&&Je===ze&&(f='<html xmlns="http://www.w3.org/1999/xhtml"><head></head><body>'+f+"</body></html>");const he=m?m.createHTML(f):f;if(Je===ze)try{S=new k().parseFromString(he,lt)}catch{}if(!S||!S.documentElement){S=b.createDocument(Je,"template",null);try{S.documentElement.innerHTML=Zt?v:he}catch{}}const ge=S.body||S.documentElement;return f&&P&&ge.insertBefore(s.createTextNode(P),ge.childNodes[0]||null),Je===ze?D.call(S,be?"html":"body")[0]:be?S.documentElement:ge},Ts=function(f){return y.call(f.ownerDocument||f,f,h.SHOW_ELEMENT|h.SHOW_COMMENT|h.SHOW_TEXT|h.SHOW_PROCESSING_INSTRUCTION|h.SHOW_CDATA_SECTION,null)},Wt=function(f){return f instanceof _&&(typeof f.nodeName!="string"||typeof f.textContent!="string"||typeof f.removeChild!="function"||!(f.attributes instanceof g)||typeof f.removeAttribute!="function"||typeof f.setAttribute!="function"||typeof f.namespaceURI!="string"||typeof f.insertBefore!="function"||typeof f.hasChildNodes!="function")},Ss=function(f){return typeof d=="function"&&f instanceof d};function Fe(U,f,S){St(U,P=>{P.call(e,f,S,et)})}const Os=function(f){let S=null;if(Fe(G.beforeSanitizeElements,f,null),Wt(f))return Re(f),!0;const P=pe(f.nodeName);if(Fe(G.uponSanitizeElement,f,{tagName:P,allowedTags:H}),f.hasChildNodes()&&!Ss(f.firstElementChild)&&Ee(/<[/\w]/g,f.innerHTML)&&Ee(/<[/\w]/g,f.textContent)||f.nodeType===ut.progressingInstruction||We&&f.nodeType===ut.comment&&Ee(/<[/\w]/g,f.data))return Re(f),!0;if(!H[P]||B[P]){if(!B[P]&&Ls(P)&&(ie.tagNameCheck instanceof RegExp&&Ee(ie.tagNameCheck,P)||ie.tagNameCheck instanceof Function&&ie.tagNameCheck(P)))return!1;if(Gt&&!Ke[P]){const he=u(f)||f.parentNode,ge=p(f)||f.childNodes;if(ge&&he){const me=ge.length;for(let we=me-1;we>=0;--we){const Ne=C(ge[we],!0);Ne.__removalCount=(f.__removalCount||0)+1,he.insertBefore(Ne,r(f))}}}return Re(f),!0}return f instanceof c&&!jn(f)||(P==="noscript"||P==="noembed"||P==="noframes")&&Ee(/<\/no(script|embed|frames)/i,f.innerHTML)?(Re(f),!0):($e&&f.nodeType===ut.text&&(S=f.textContent,St([Y,j,Z],he=>{S=ot(S,he," ")}),f.textContent!==S&&(rt(e.removed,{element:f.cloneNode()}),f.textContent=S)),Fe(G.afterSanitizeElements,f,null),!1)},As=function(f,S,P){if(fs&&(S==="id"||S==="name")&&(P in s||P in Gn))return!1;if(!(xe&&!Q[S]&&Ee(le,S))){if(!(K&&Ee(se,S))){if(!R[S]||Q[S]){if(!(Ls(f)&&(ie.tagNameCheck instanceof RegExp&&Ee(ie.tagNameCheck,f)||ie.tagNameCheck instanceof Function&&ie.tagNameCheck(f))&&(ie.attributeNameCheck instanceof RegExp&&Ee(ie.attributeNameCheck,S)||ie.attributeNameCheck instanceof Function&&ie.attributeNameCheck(S))||S==="is"&&ie.allowCustomizedBuiltInElements&&(ie.tagNameCheck instanceof RegExp&&Ee(ie.tagNameCheck,P)||ie.tagNameCheck instanceof Function&&ie.tagNameCheck(P))))return!1}else if(!jt[S]){if(!Ee(N,ot(P,ne,""))){if(!((S==="src"||S==="xlink:href"||S==="href")&&f!=="script"&&vi(P,"data:")===0&&_s[f])){if(!(nt&&!Ee(de,ot(P,ne,"")))){if(P)return!1}}}}}}return!0},Ls=function(f){return f!=="annotation-xml"&&Bs(f,I)},xs=function(f){Fe(G.beforeSanitizeAttributes,f,null);const{attributes:S}=f;if(!S||Wt(f))return;const P={attrName:"",attrValue:"",keepAttr:!0,allowedAttributes:R,forceKeepAttr:void 0};let he=S.length;for(;he--;){const ge=S[he],{name:me,namespaceURI:we,value:Ne}=ge,at=pe(me);let ke=me==="value"?Ne:wi(Ne);if(P.attrName=at,P.attrValue=ke,P.keepAttr=!0,P.forceKeepAttr=void 0,Fe(G.uponSanitizeAttribute,f,P),ke=P.attrValue,ms&&(at==="id"||at==="name")&&(vt(me,f),ke=Fn+ke),We&&Ee(/((--!?|])>)|<\/(style|title)/i,ke)){vt(me,f);continue}if(P.forceKeepAttr||(vt(me,f),!P.keepAttr))continue;if(!fe&&Ee(/\/>/i,ke)){vt(me,f);continue}$e&&St([Y,j,Z],Is=>{ke=ot(ke,Is," ")});const Cs=pe(f.nodeName);if(As(Cs,at,ke)){if(m&&typeof w=="object"&&typeof w.getAttributeType=="function"&&!we)switch(w.getAttributeType(Cs,at)){case"TrustedHTML":{ke=m.createHTML(ke);break}case"TrustedScriptURL":{ke=m.createScriptURL(ke);break}}try{we?f.setAttributeNS(we,me,ke):f.setAttribute(me,ke),Wt(f)?Re(f):Hs(e.removed)}catch{}}}Fe(G.afterSanitizeAttributes,f,null)},Zn=function U(f){let S=null;const P=Ts(f);for(Fe(G.beforeSanitizeShadowDOM,f,null);S=P.nextNode();)Fe(G.uponSanitizeShadowNode,S,null),Os(S),xs(S),S.content instanceof a&&U(S.content);Fe(G.afterSanitizeShadowDOM,f,null)};return e.sanitize=function(U){let f=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},S=null,P=null,he=null,ge=null;if(Zt=!U,Zt&&(U="<!-->"),typeof U!="string"&&!Ss(U))if(typeof U.toString=="function"){if(U=U.toString(),typeof U!="string")throw ct("dirty is not a string, aborting")}else throw ct("toString is not a function");if(!e.isSupported)return U;if(Ue||Xt(f),e.removed=[],typeof U=="string"&&(it=!1),it){if(U.nodeName){const Ne=pe(U.nodeName);if(!H[Ne]||B[Ne])throw ct("root node is forbidden and cannot be sanitized in-place")}}else if(U instanceof d)S=ys("<!---->"),P=S.ownerDocument.importNode(U,!0),P.nodeType===ut.element&&P.nodeName==="BODY"||P.nodeName==="HTML"?S=P:S.appendChild(P);else{if(!Ye&&!$e&&!be&&U.indexOf("<")===-1)return m&&gt?m.createHTML(U):U;if(S=ys(U),!S)return Ye?null:gt?v:""}S&&Bt&&Re(S.firstChild);const me=Ts(it?U:S);for(;he=me.nextNode();)Os(he),xs(he),he.content instanceof a&&Zn(he.content);if(it)return U;if(Ye){if(mt)for(ge=O.call(S.ownerDocument);S.firstChild;)ge.appendChild(S.firstChild);else ge=S;return(R.shadowroot||R.shadowrootmode)&&(ge=M.call(t,ge,!0)),ge}let we=be?S.outerHTML:S.innerHTML;return be&&H["!doctype"]&&S.ownerDocument&&S.ownerDocument.doctype&&S.ownerDocument.doctype.name&&Ee(xn,S.ownerDocument.doctype.name)&&(we="<!DOCTYPE "+S.ownerDocument.doctype.name+`>
`+we),$e&&St([Y,j,Z],Ne=>{we=ot(we,Ne," ")}),m&&gt?m.createHTML(we):we},e.setConfig=function(){let U=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};Xt(U),Ue=!0},e.clearConfig=function(){et=null,Ue=!1},e.isValidAttribute=function(U,f,S){et||Xt({});const P=pe(U),he=pe(f);return As(P,he,S)},e.addHook=function(U,f){typeof f=="function"&&rt(G[U],f)},e.removeHook=function(U){return Hs(G[U])},e.removeHooks=function(U){G[U]=[]},e.removeAllHooks=function(){G=Ws()},e}var $i=Cn();const zi=[{pkg_name:"fractal_tasks_core",version:"1.3.3",task_list:[{version:"1.3.3",name:"Convert Cellvoyager to OME-Zarr",category:"Conversion",modality:"HCS",tags:["Yokogawa","Cellvoyager"],input_types:{},output_types:{},docs_link:"https://fractal-analytics-platform.github.io/fractal-tasks-core",docs_info:`## cellvoyager_to_ome_zarr_init
Create a OME-NGFF zarr folder, without reading/writing image data.

Find plates (for each folder in input_paths):

- glob image files,
- parse metadata from image filename to identify plates,
- identify populated channels.

Create a zarr folder (for each plate):

- parse mlf metadata,
- identify wells and field of view (FOV),
- create FOV ZARR,
- verify that channels are uniform (i.e., same channels).
## cellvoyager_to_ome_zarr_compute
Convert Yokogawa output (png, tif) to zarr file.

This task is run after an init task (typically
\`cellvoyager_to_ome_zarr_init\` or
\`cellvoyager_to_ome_zarr_init_multiplex\`), and it populates the empty
OME-Zarr files that were prepared.

Note that the current task always overwrites existing data. To avoid this
behavior, set the \`overwrite\` argument of the init task to \`False\`.
`,type:"compound"},{version:"1.3.3",name:"Convert Cellvoyager Multiplexing to OME-Zarr",category:"Conversion",modality:"HCS",tags:["Yokogawa","Cellvoyager"],input_types:{},output_types:{},docs_link:"https://fractal-analytics-platform.github.io/fractal-tasks-core",docs_info:`## cellvoyager_to_ome_zarr_init_multiplex
Create OME-NGFF structure and metadata to host a multiplexing dataset.

This task takes a set of image folders (i.e. different multiplexing
acquisitions) and build the internal structure and metadata of a OME-NGFF
zarr group, without actually loading/writing the image data.

Each element in input_paths should be treated as a different acquisition.
## cellvoyager_to_ome_zarr_compute
Convert Yokogawa output (png, tif) to zarr file.

This task is run after an init task (typically
\`cellvoyager_to_ome_zarr_init\` or
\`cellvoyager_to_ome_zarr_init_multiplex\`), and it populates the empty
OME-Zarr files that were prepared.

Note that the current task always overwrites existing data. To avoid this
behavior, set the \`overwrite\` argument of the init task to \`False\`.
`,type:"compound"},{version:"1.3.3",name:"Project Image (HCS Plate)",category:"Image Processing",modality:"HCS",tags:["Preprocessing"],input_types:{is_3D:!0},output_types:{is_3D:!1},docs_link:"https://fractal-analytics-platform.github.io/fractal-tasks-core",docs_info:`## copy_ome_zarr_hcs_plate
Duplicate the OME-Zarr HCS structure for a set of zarr_urls.

This task only processes the zarr images in the zarr_urls, not all the
images in the plate. It copies all the  plate & well structure, but none
of the image metadata or the actual image data:

- For each plate, create a new OME-Zarr HCS plate with the attributes for
    all the images in zarr_urls
- For each well (in each plate), create a new zarr subgroup with the
   same attributes as the original one.

Note: this task makes use of methods from the \`Attributes\` class, see
https://zarr.readthedocs.io/en/stable/api/attrs.html.
## projection
Perform intensity projection along Z axis with a chosen method.

Note: this task stores the output in a new zarr file.
`,type:"compound"},{version:"1.3.3",name:"Illumination Correction",category:"Image Processing",modality:null,tags:["Preprocessing"],input_types:{illumination_corrected:!1},output_types:{illumination_corrected:!0},docs_link:"https://fractal-analytics-platform.github.io/fractal-tasks-core",docs_info:`## illumination_correction
Applies illumination correction to the images in the OME-Zarr.

Assumes that the illumination correction profiles were generated before
separately and that the same background subtraction was used during
calculation of the illumination correction (otherwise, it will not work
well & the correction may only be partial).
`,type:"parallel"},{version:"1.3.3",name:"Cellpose Segmentation",category:"Segmentation",modality:null,tags:["Deep Learning","Convolutional Neural Network","Instance Segmentation"],input_types:{},output_types:{},docs_link:"https://fractal-analytics-platform.github.io/fractal-tasks-core",docs_info:`## cellpose_segmentation
Run cellpose segmentation on the ROIs of a single OME-Zarr image.
`,type:"parallel"},{version:"1.3.3",name:"Calculate Registration (image-based)",category:"Registration",modality:"HCS",tags:["Multiplexing"],input_types:{},output_types:{},docs_link:"https://fractal-analytics-platform.github.io/fractal-tasks-core",docs_info:`## image_based_registration_hcs_init
Initialized calculate registration task

This task prepares a parallelization list of all zarr_urls that need to be
used to calculate the registration between acquisitions (all zarr_urls
except the reference acquisition vs. the reference acquisition).
This task only works for HCS OME-Zarrs for 2 reasons: Only HCS OME-Zarrs
currently have defined acquisition metadata to determine reference
acquisitions. And we have only implemented the grouping of images for
HCS OME-Zarrs by well (with the assumption that every well just has 1
image per acqusition).
## calculate_registration_image_based
Calculate registration based on images

This task consists of 3 parts:

1. Loading the images of a given ROI (=> loop over ROIs)
2. Calculating the transformation for that ROI
3. Storing the calculated transformation in the ROI table
`,type:"compound"},{version:"1.3.3",name:"Find Registration Consensus",category:"Registration",modality:"HCS",tags:["Multiplexing"],input_types:{},output_types:{},docs_link:"https://fractal-analytics-platform.github.io/fractal-tasks-core",docs_info:`## init_group_by_well_for_multiplexing
Finds images for all acquisitions per well.

Returns the parallelization_list to run \`find_registration_consensus\`.
## find_registration_consensus
Applies pre-calculated registration to ROI tables.

Apply pre-calculated registration such that resulting ROIs contain
the consensus align region between all acquisitions.

Parallelization level: well
`,type:"compound"},{version:"1.3.3",name:"Apply Registration to Image",category:"Registration",modality:"HCS",tags:["Multiplexing"],input_types:{registered:!1},output_types:{registered:!0},docs_link:"https://fractal-analytics-platform.github.io/fractal-tasks-core",docs_info:`## apply_registration_to_image
Apply registration to images by using a registered ROI table

This task consists of 4 parts:

1. Mask all regions in images that are not available in the
registered ROI table and store each acquisition aligned to the
reference_acquisition (by looping over ROIs).
2. Do the same for all label images.
3. Copy all tables from the non-aligned image to the aligned image
(currently only works well if the only tables are well & FOV ROI tables
(registered and original). Not implemented for measurement tables and
other ROI tables).
4. Clean up: Delete the old, non-aligned image and rename the new,
aligned image to take over its place.
`,type:"parallel"},{version:"1.3.3",name:"Import OME-Zarr",category:null,modality:null,tags:[],input_types:{},output_types:{},docs_link:"https://fractal-analytics-platform.github.io/fractal-tasks-core",docs_info:`## import_ome_zarr
Import a single OME-Zarr into Fractal.

The single OME-Zarr can be a full OME-Zarr HCS plate or an individual
OME-Zarr image. The image needs to be in the zarr_dir as specified by the
dataset. The current version of this task:

1. Creates the appropriate components-related metadata, needed for
   processing an existing OME-Zarr through Fractal.
2. Optionally adds new ROI tables to the existing OME-Zarr.
`,type:"non_parallel"},{version:"1.3.3",name:"Napari Workflows Wrapper",category:"Measurement",modality:null,tags:[],input_types:{},output_types:{},docs_link:"https://fractal-analytics-platform.github.io/fractal-tasks-core",docs_info:`## napari_workflows_wrapper
Run a napari-workflow on the ROIs of a single OME-NGFF image.

This task takes images and labels and runs a napari-workflow on them that
can produce a label and tables as output.

Examples of allowed entries for \`input_specs\` and \`output_specs\`:

\`\`\`
input_specs = {
    "in_1": {"type": "image", "channel": {"wavelength_id": "A01_C02"}},
    "in_2": {"type": "image", "channel": {"label": "DAPI"}},
    "in_3": {"type": "label", "label_name": "label_DAPI"},
}

output_specs = {
    "out_1": {"type": "label", "label_name": "label_DAPI_new"},
    "out_2": {"type": "dataframe", "table_name": "measurements"},
}
\`\`\`
`,type:"parallel"}]},{pkg_name:"fractal_faim_ipa",version:"0.4.3",task_list:[{version:"0.4.3",name:"FAIM IPA OME-Zarr Converter",category:"Conversion",modality:"HCS",tags:["Molecular Devices","Image Xpress","MD"],input_types:{},output_types:{},docs_link:null,docs_info:`## convert_ome_zarr
Create OME-Zarr plate from MD Image Xpress files.

This is a non-parallel task => it parses the metadata, creates the plates
and then converts all the wells in the same process
`,type:"non_parallel"}]},{pkg_name:"fractal_lif_converters",version:"0.3.3",task_list:[{version:"0.3.3",name:"Convert Lif Plate to OME-Zarr",category:"Conversion",modality:"HCS",tags:["Leica","Plate converter"],input_types:{},output_types:{},docs_link:null,docs_info:`## convert_lif_plate_init_task
Initialize the conversion of LIF files to an OME-Zarr - Plate.
## convert_lif_compute_task
Export a single scene or plate acquisition from a LIF file to OME-Zarr.
`,type:"compound"},{version:"0.3.3",name:"Convert Lif Scene to OME-Zarr",category:"Conversion",modality:null,tags:["Leica","Single Image Converter"],input_types:{},output_types:{},docs_link:null,docs_info:`## convert_lif_scene_init_task
Initialize the conversion of LIF files to OME-Zarr - NgffImages.
## convert_lif_compute_task
Export a single scene or plate acquisition from a LIF file to OME-Zarr.
`,type:"compound"}]},{pkg_name:"operetta_compose",version:"0.2.4",task_list:[{version:"0.2.4",name:"Harmony to OME-Zarr",category:"Conversion",modality:"HCS",tags:["Opera","Operetta","Perkin Elmer"],input_types:{},output_types:{},docs_link:"https://leukemia-kispi.github.io/operetta-compose/",docs_info:`## harmony_to_ome_zarr
Convert TIFFs which were exported from Harmony (Operetta/Opera, Perkin-Elmer) to OME-ZARR
`,type:"non_parallel"},{version:"0.2.4",name:"Stardist segmentation",category:"Segmentation",modality:null,tags:[],input_types:{},output_types:{},docs_link:"https://leukemia-kispi.github.io/operetta-compose/",docs_info:`## stardist_segmentation
Segment cells with Stardist
`,type:"parallel"},{version:"0.2.4",name:"Regionprops measurement",category:"Measurement",modality:null,tags:["regionprops","intensity","morphology"],input_types:{},output_types:{},docs_link:"https://leukemia-kispi.github.io/operetta-compose/",docs_info:`## regionprops_measurement
Take measurements using regionprobs and write the features to the OME-ZARR
`,type:"parallel"},{version:"0.2.4",name:"Feature classification",category:null,modality:null,tags:["napari feature classifier","object classification"],input_types:{},output_types:{},docs_link:"https://leukemia-kispi.github.io/operetta-compose/",docs_info:`## feature_classification
Classify cells using the [napari-feature-classifier](https://github.com/fractal-napari-plugins-collection/napari-feature-classifier) and write them to the OME-ZARR
`,type:"parallel"},{version:"0.2.4",name:"Condition registration",category:null,modality:"HCS",tags:["Metadata","Treatment conditions"],input_types:{},output_types:{},docs_link:"https://leukemia-kispi.github.io/operetta-compose/",docs_info:"## condition_registration\nRegister the experimental (drug layout) in the OME-ZARR.\nThe table should contain at least the columns `row` and `col` identifying the well.\nIt can have an arbitrary number of additional metadata columns (e.g. drug, concentration, medium, sample).\nDrug combinations can be specified by two entries pointing to the same `row` / `col`\n",type:"parallel"}]},{pkg_name:"fractal_helper_tasks",version:"0.1.2",task_list:[{version:"0.1.2",name:"Drop T Dimension",category:null,modality:null,tags:["Singelton time dimension"],input_types:{},output_types:{has_t:!1},docs_link:null,docs_info:`## drop_t_dimension
Drops singleton t dimension.
`,type:"non_parallel"},{version:"0.1.2",name:"Convert 2D segmentation to 3D",category:null,modality:null,tags:["Mixed modality","2D to 3D workflows"],input_types:{is_3D:!1},output_types:{},docs_link:null,docs_info:`## convert_2D_segmentation_to_3D
Convert 2D segmentation to 3D segmentation.

This task loads the 2D segmentation, replicates it along the Z slice and
stores it back into the 3D OME-Zarr image.

This is a temporary workaround task, as long as we store 2D data in
a separate OME-Zarr file from the 3D data. If the 2D & 3D OME-Zarr images
have different suffixes in their name, use \`image_suffix_2D_to_remove\` &
\`image_suffix_3D_to_add\`. If their base names are different, this task
does not support processing them at the moment.

It makes the assumption that the 3D OME-Zarrs are stored in the same place
as the 2D OME-Zarrs (same based folder).
`,type:"parallel"}]}];var Fi=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function In(l){return l&&l.__esModule&&Object.prototype.hasOwnProperty.call(l,"default")?l.default:l}var ts={};const Vi=typeof process=="object"&&ts&&ts.NODE_DEBUG&&/\bsemver\b/i.test(ts.NODE_DEBUG)?(...l)=>console.error("SEMVER",...l):()=>{};var Rn=Vi;const Ui="2.0.0",Nn=256,Hi=Number.MAX_SAFE_INTEGER||9007199254740991,Bi=16,Gi=Nn-6,ji=["major","premajor","minor","preminor","patch","prepatch","prerelease"];var Dn={MAX_LENGTH:Nn,MAX_SAFE_COMPONENT_LENGTH:Bi,MAX_SAFE_BUILD_LENGTH:Gi,MAX_SAFE_INTEGER:Hi,RELEASE_TYPES:ji,SEMVER_SPEC_VERSION:Ui,FLAG_INCLUDE_PRERELEASE:1,FLAG_LOOSE:2},cs={exports:{}};(function(l,e){const{MAX_SAFE_COMPONENT_LENGTH:s,MAX_SAFE_BUILD_LENGTH:t,MAX_LENGTH:i}=Dn,a=Rn;e=l.exports={};const o=e.re=[],d=e.safeRe=[],c=e.src=[],h=e.t={};let g=0;const _="[a-zA-Z0-9-]",k=[["\\s",1],["\\d",i],[_,t]],w=C=>{for(const[n,r]of k)C=C.split(`${n}*`).join(`${n}{0,${r}}`).split(`${n}+`).join(`${n}{1,${r}}`);return C},E=(C,n,r)=>{const p=w(n),u=g++;a(C,u,n),h[C]=u,c[u]=n,o[u]=new RegExp(n,r?"g":void 0),d[u]=new RegExp(p,r?"g":void 0)};E("NUMERICIDENTIFIER","0|[1-9]\\d*"),E("NUMERICIDENTIFIERLOOSE","\\d+"),E("NONNUMERICIDENTIFIER",`\\d*[a-zA-Z-]${_}*`),E("MAINVERSION",`(${c[h.NUMERICIDENTIFIER]})\\.(${c[h.NUMERICIDENTIFIER]})\\.(${c[h.NUMERICIDENTIFIER]})`),E("MAINVERSIONLOOSE",`(${c[h.NUMERICIDENTIFIERLOOSE]})\\.(${c[h.NUMERICIDENTIFIERLOOSE]})\\.(${c[h.NUMERICIDENTIFIERLOOSE]})`),E("PRERELEASEIDENTIFIER",`(?:${c[h.NUMERICIDENTIFIER]}|${c[h.NONNUMERICIDENTIFIER]})`),E("PRERELEASEIDENTIFIERLOOSE",`(?:${c[h.NUMERICIDENTIFIERLOOSE]}|${c[h.NONNUMERICIDENTIFIER]})`),E("PRERELEASE",`(?:-(${c[h.PRERELEASEIDENTIFIER]}(?:\\.${c[h.PRERELEASEIDENTIFIER]})*))`),E("PRERELEASELOOSE",`(?:-?(${c[h.PRERELEASEIDENTIFIERLOOSE]}(?:\\.${c[h.PRERELEASEIDENTIFIERLOOSE]})*))`),E("BUILDIDENTIFIER",`${_}+`),E("BUILD",`(?:\\+(${c[h.BUILDIDENTIFIER]}(?:\\.${c[h.BUILDIDENTIFIER]})*))`),E("FULLPLAIN",`v?${c[h.MAINVERSION]}${c[h.PRERELEASE]}?${c[h.BUILD]}?`),E("FULL",`^${c[h.FULLPLAIN]}$`),E("LOOSEPLAIN",`[v=\\s]*${c[h.MAINVERSIONLOOSE]}${c[h.PRERELEASELOOSE]}?${c[h.BUILD]}?`),E("LOOSE",`^${c[h.LOOSEPLAIN]}$`),E("GTLT","((?:<|>)?=?)"),E("XRANGEIDENTIFIERLOOSE",`${c[h.NUMERICIDENTIFIERLOOSE]}|x|X|\\*`),E("XRANGEIDENTIFIER",`${c[h.NUMERICIDENTIFIER]}|x|X|\\*`),E("XRANGEPLAIN",`[v=\\s]*(${c[h.XRANGEIDENTIFIER]})(?:\\.(${c[h.XRANGEIDENTIFIER]})(?:\\.(${c[h.XRANGEIDENTIFIER]})(?:${c[h.PRERELEASE]})?${c[h.BUILD]}?)?)?`),E("XRANGEPLAINLOOSE",`[v=\\s]*(${c[h.XRANGEIDENTIFIERLOOSE]})(?:\\.(${c[h.XRANGEIDENTIFIERLOOSE]})(?:\\.(${c[h.XRANGEIDENTIFIERLOOSE]})(?:${c[h.PRERELEASELOOSE]})?${c[h.BUILD]}?)?)?`),E("XRANGE",`^${c[h.GTLT]}\\s*${c[h.XRANGEPLAIN]}$`),E("XRANGELOOSE",`^${c[h.GTLT]}\\s*${c[h.XRANGEPLAINLOOSE]}$`),E("COERCEPLAIN",`(^|[^\\d])(\\d{1,${s}})(?:\\.(\\d{1,${s}}))?(?:\\.(\\d{1,${s}}))?`),E("COERCE",`${c[h.COERCEPLAIN]}(?:$|[^\\d])`),E("COERCEFULL",c[h.COERCEPLAIN]+`(?:${c[h.PRERELEASE]})?(?:${c[h.BUILD]})?(?:$|[^\\d])`),E("COERCERTL",c[h.COERCE],!0),E("COERCERTLFULL",c[h.COERCEFULL],!0),E("LONETILDE","(?:~>?)"),E("TILDETRIM",`(\\s*)${c[h.LONETILDE]}\\s+`,!0),e.tildeTrimReplace="$1~",E("TILDE",`^${c[h.LONETILDE]}${c[h.XRANGEPLAIN]}$`),E("TILDELOOSE",`^${c[h.LONETILDE]}${c[h.XRANGEPLAINLOOSE]}$`),E("LONECARET","(?:\\^)"),E("CARETTRIM",`(\\s*)${c[h.LONECARET]}\\s+`,!0),e.caretTrimReplace="$1^",E("CARET",`^${c[h.LONECARET]}${c[h.XRANGEPLAIN]}$`),E("CARETLOOSE",`^${c[h.LONECARET]}${c[h.XRANGEPLAINLOOSE]}$`),E("COMPARATORLOOSE",`^${c[h.GTLT]}\\s*(${c[h.LOOSEPLAIN]})$|^$`),E("COMPARATOR",`^${c[h.GTLT]}\\s*(${c[h.FULLPLAIN]})$|^$`),E("COMPARATORTRIM",`(\\s*)${c[h.GTLT]}\\s*(${c[h.LOOSEPLAIN]}|${c[h.XRANGEPLAIN]})`,!0),e.comparatorTrimReplace="$1$2$3",E("HYPHENRANGE",`^\\s*(${c[h.XRANGEPLAIN]})\\s+-\\s+(${c[h.XRANGEPLAIN]})\\s*$`),E("HYPHENRANGELOOSE",`^\\s*(${c[h.XRANGEPLAINLOOSE]})\\s+-\\s+(${c[h.XRANGEPLAINLOOSE]})\\s*$`),E("STAR","(<|>)?=?\\s*\\*"),E("GTE0","^\\s*>=\\s*0\\.0\\.0\\s*$"),E("GTE0PRE","^\\s*>=\\s*0\\.0\\.0-0\\s*$")})(cs,cs.exports);var Zi=cs.exports;const qi=Object.freeze({loose:!0}),Xi=Object.freeze({}),Wi=l=>l?typeof l!="object"?qi:l:Xi;var Yi=Wi;const Ys=/^[0-9]+$/,Mn=(l,e)=>{const s=Ys.test(l),t=Ys.test(e);return s&&t&&(l=+l,e=+e),l===e?0:s&&!t?-1:t&&!s?1:l<e?-1:1},Qi=(l,e)=>Mn(e,l);var Ki={compareIdentifiers:Mn,rcompareIdentifiers:Qi};const At=Rn,{MAX_LENGTH:Qs,MAX_SAFE_INTEGER:Lt}=Dn,{safeRe:Ks,t:Js}=Zi,Ji=Yi,{compareIdentifiers:tt}=Ki;let el=class De{constructor(e,s){if(s=Ji(s),e instanceof De){if(e.loose===!!s.loose&&e.includePrerelease===!!s.includePrerelease)return e;e=e.version}else if(typeof e!="string")throw new TypeError(`Invalid version. Must be a string. Got type "${typeof e}".`);if(e.length>Qs)throw new TypeError(`version is longer than ${Qs} characters`);At("SemVer",e,s),this.options=s,this.loose=!!s.loose,this.includePrerelease=!!s.includePrerelease;const t=e.trim().match(s.loose?Ks[Js.LOOSE]:Ks[Js.FULL]);if(!t)throw new TypeError(`Invalid Version: ${e}`);if(this.raw=e,this.major=+t[1],this.minor=+t[2],this.patch=+t[3],this.major>Lt||this.major<0)throw new TypeError("Invalid major version");if(this.minor>Lt||this.minor<0)throw new TypeError("Invalid minor version");if(this.patch>Lt||this.patch<0)throw new TypeError("Invalid patch version");t[4]?this.prerelease=t[4].split(".").map(i=>{if(/^[0-9]+$/.test(i)){const a=+i;if(a>=0&&a<Lt)return a}return i}):this.prerelease=[],this.build=t[5]?t[5].split("."):[],this.format()}format(){return this.version=`${this.major}.${this.minor}.${this.patch}`,this.prerelease.length&&(this.version+=`-${this.prerelease.join(".")}`),this.version}toString(){return this.version}compare(e){if(At("SemVer.compare",this.version,this.options,e),!(e instanceof De)){if(typeof e=="string"&&e===this.version)return 0;e=new De(e,this.options)}return e.version===this.version?0:this.compareMain(e)||this.comparePre(e)}compareMain(e){return e instanceof De||(e=new De(e,this.options)),tt(this.major,e.major)||tt(this.minor,e.minor)||tt(this.patch,e.patch)}comparePre(e){if(e instanceof De||(e=new De(e,this.options)),this.prerelease.length&&!e.prerelease.length)return-1;if(!this.prerelease.length&&e.prerelease.length)return 1;if(!this.prerelease.length&&!e.prerelease.length)return 0;let s=0;do{const t=this.prerelease[s],i=e.prerelease[s];if(At("prerelease compare",s,t,i),t===void 0&&i===void 0)return 0;if(i===void 0)return 1;if(t===void 0)return-1;if(t===i)continue;return tt(t,i)}while(++s)}compareBuild(e){e instanceof De||(e=new De(e,this.options));let s=0;do{const t=this.build[s],i=e.build[s];if(At("build compare",s,t,i),t===void 0&&i===void 0)return 0;if(i===void 0)return 1;if(t===void 0)return-1;if(t===i)continue;return tt(t,i)}while(++s)}inc(e,s,t){switch(e){case"premajor":this.prerelease.length=0,this.patch=0,this.minor=0,this.major++,this.inc("pre",s,t);break;case"preminor":this.prerelease.length=0,this.patch=0,this.minor++,this.inc("pre",s,t);break;case"prepatch":this.prerelease.length=0,this.inc("patch",s,t),this.inc("pre",s,t);break;case"prerelease":this.prerelease.length===0&&this.inc("patch",s,t),this.inc("pre",s,t);break;case"major":(this.minor!==0||this.patch!==0||this.prerelease.length===0)&&this.major++,this.minor=0,this.patch=0,this.prerelease=[];break;case"minor":(this.patch!==0||this.prerelease.length===0)&&this.minor++,this.patch=0,this.prerelease=[];break;case"patch":this.prerelease.length===0&&this.patch++,this.prerelease=[];break;case"pre":{const i=Number(t)?1:0;if(!s&&t===!1)throw new Error("invalid increment argument: identifier is empty");if(this.prerelease.length===0)this.prerelease=[i];else{let a=this.prerelease.length;for(;--a>=0;)typeof this.prerelease[a]=="number"&&(this.prerelease[a]++,a=-2);if(a===-1){if(s===this.prerelease.join(".")&&t===!1)throw new Error("invalid increment argument: identifier already exists");this.prerelease.push(i)}}if(s){let a=[s,i];t===!1&&(a=[s]),tt(this.prerelease[0],s)===0?isNaN(this.prerelease[1])&&(this.prerelease=a):this.prerelease=a}break}default:throw new Error(`invalid increment argument: ${e}`)}return this.raw=this.format(),this.build.length&&(this.raw+=`+${this.build.join(".")}`),this}};var tl=el;const en=tl,sl=(l,e,s)=>new en(l,s).compare(new en(e,s));var nl=sl;const il=nl,ll=(l,e)=>il(l,e,!0);var al=ll;const rl=In(al);function ol(l,e){const s=[];for(const t of l)for(const i of t.task_list){const a=t[e];let o=s.find(h=>h.groupTitle===a);const d=hl(t,i),c=t.version||"";if(o){let h=o.tasks.find(g=>Object.values(g.taskVersions).find(_=>_.task_name===i.name));h?h.taskVersions[c]=d:(h={selectedVersion:c,taskVersions:{[c]:d}},o.tasks.push(h))}else o={groupTitle:t[e],tasks:[{selectedVersion:c,taskVersions:{[c]:d}}]},s.push(o)}return cl(s),s}function cl(l){for(const e of l){for(const s of e.tasks){const t=Object.keys(s.taskVersions).filter(i=>i!=="");t.length>0&&(hs(t),s.selectedVersion=t[0])}e.tasks.sort((s,t)=>s.taskVersions[s.selectedVersion].task_id<t.taskVersions[t.selectedVersion].task_id?-1:1)}l.sort((e,s)=>e.groupTitle.localeCompare(s.groupTitle,void 0,{sensitivity:"base"}))}function hs(l){try{l.sort((e,s)=>e?s?rl(e,s):1:-1).reverse()}catch(e){console.warn("Semver error:",e)}return l}function hl(l,e){return{pkg_name:l.pkg_name,task_id:e.id,task_name:e.name,version:l.version||"",category:e.category,modality:e.modality,authors:e.authors,tags:e.tags,input_types:e.input_types,docs_info:e.docs_info||""}}var Pn={exports:{}};(function(l,e){(function(s,t){l.exports=t()})(Fi,function(){class s{constructor(n){n||(n={}),this.main=n.main||"ss-main",this.placeholder=n.placeholder||"ss-placeholder",this.values=n.values||"ss-values",this.single=n.single||"ss-single",this.max=n.max||"ss-max",this.value=n.value||"ss-value",this.valueText=n.valueText||"ss-value-text",this.valueDelete=n.valueDelete||"ss-value-delete",this.valueOut=n.valueOut||"ss-value-out",this.deselect=n.deselect||"ss-deselect",this.deselectPath=n.deselectPath||"M10,10 L90,90 M10,90 L90,10",this.arrow=n.arrow||"ss-arrow",this.arrowClose=n.arrowClose||"M10,30 L50,70 L90,30",this.arrowOpen=n.arrowOpen||"M10,70 L50,30 L90,70",this.content=n.content||"ss-content",this.openAbove=n.openAbove||"ss-open-above",this.openBelow=n.openBelow||"ss-open-below",this.search=n.search||"ss-search",this.searchHighlighter=n.searchHighlighter||"ss-search-highlight",this.searching=n.searching||"ss-searching",this.addable=n.addable||"ss-addable",this.addablePath=n.addablePath||"M50,10 L50,90 M10,50 L90,50",this.list=n.list||"ss-list",this.optgroup=n.optgroup||"ss-optgroup",this.optgroupLabel=n.optgroupLabel||"ss-optgroup-label",this.optgroupLabelText=n.optgroupLabelText||"ss-optgroup-label-text",this.optgroupActions=n.optgroupActions||"ss-optgroup-actions",this.optgroupSelectAll=n.optgroupSelectAll||"ss-selectall",this.optgroupSelectAllBox=n.optgroupSelectAllBox||"M60,10 L10,10 L10,90 L90,90 L90,50",this.optgroupSelectAllCheck=n.optgroupSelectAllCheck||"M30,45 L50,70 L90,10",this.optgroupClosable=n.optgroupClosable||"ss-closable",this.option=n.option||"ss-option",this.optionDelete=n.optionDelete||"M10,10 L90,90 M10,90 L90,10",this.highlighted=n.highlighted||"ss-highlighted",this.open=n.open||"ss-open",this.close=n.close||"ss-close",this.selected=n.selected||"ss-selected",this.error=n.error||"ss-error",this.disabled=n.disabled||"ss-disabled",this.hide=n.hide||"ss-hide"}}function t(){return Math.random().toString(36).substring(2,10)}function i(C,n){function r(u,m){return m&&u&&u.classList&&u.classList.contains(m)||m&&u&&u.dataset&&u.dataset.id&&u.dataset.id===n?u:null}function p(u,m){return!u||u===document?null:r(u,m)?u:p(u.parentNode,m)}return r(C,n)||p(C,n)}function a(C,n=50,r=!1){let p;return function(...u){const m=self,v=()=>{p=null,r||C.apply(m,u)},b=r&&!p;clearTimeout(p),p=setTimeout(v,n),b&&C.apply(m,u)}}function o(C,n){return JSON.stringify(C)===JSON.stringify(n)}function d(C){const n=C.replace(/[A-Z\u00C0-\u00D6\u00D8-\u00DE]/g,r=>"-"+r.toLowerCase());return C[0]===C[0].toUpperCase()?n.substring(1):n}class c{constructor(n){if(this.id=!n.id||n.id===""?t():n.id,this.label=n.label||"",this.selectAll=n.selectAll===void 0?!1:n.selectAll,this.selectAllText=n.selectAllText||"Select All",this.closable=n.closable||"off",this.options=[],n.options)for(const r of n.options)this.options.push(new h(r))}}class h{constructor(n){this.id=!n.id||n.id===""?t():n.id,this.value=n.value===void 0?n.text:n.value,this.text=n.text||"",this.html=n.html||"",this.selected=n.selected!==void 0?n.selected:!1,this.display=n.display!==void 0?n.display:!0,this.disabled=n.disabled!==void 0?n.disabled:!1,this.mandatory=n.mandatory!==void 0?n.mandatory:!1,this.placeholder=n.placeholder!==void 0?n.placeholder:!1,this.class=n.class||"",this.style=n.style||"",this.data=n.data||{}}}class g{constructor(n,r){this.selectType="single",this.data=[],this.selectedOrder=[],this.selectType=n,this.setData(r)}validateDataArray(n){if(!Array.isArray(n))return new Error("Data must be an array");for(let r of n)if(r instanceof c||"label"in r){if(!("label"in r))return new Error("Optgroup must have a label");if("options"in r&&r.options)for(let p of r.options){const u=this.validateOption(p);if(u)return u}}else if(r instanceof h||"text"in r){const p=this.validateOption(r);if(p)return p}else return new Error("Data object must be a valid optgroup or option");return null}validateOption(n){return"text"in n?null:new Error("Option must have a text")}partialToFullData(n){let r=[];return n.forEach(p=>{if(p instanceof c||"label"in p){let u=[];"options"in p&&p.options&&p.options.forEach(m=>{u.push(new h(m))}),u.length>0&&r.push(new c(p))}(p instanceof h||"text"in p)&&r.push(new h(p))}),r}setData(n){this.data=this.partialToFullData(n),this.selectType==="single"&&this.setSelectedBy("id",this.getSelected())}getData(){return this.filter(null,!0)}getDataOptions(){return this.filter(null,!1)}addOption(n,r=!1){if(r){let p=[new h(n)];this.setData(p.concat(this.getData()))}else this.setData(this.getData().concat(new h(n)))}setSelectedBy(n,r){let p=null,u=!1;const m=[];for(let b of this.data){if(b instanceof c)for(let y of b.options)p||(p=y),y.selected=u?!1:r.includes(y[n]),y.selected&&(m.push(y),this.selectType==="single"&&(u=!0));b instanceof h&&(p||(p=b),b.selected=u?!1:r.includes(b[n]),b.selected&&(m.push(b),this.selectType==="single"&&(u=!0)))}this.selectType==="single"&&p&&!u&&(p.selected=!0,m.push(p));const v=r.map(b=>{var y;return((y=m.find(O=>O[n]===b))===null||y===void 0?void 0:y.id)||""});this.selectedOrder=v}getSelected(){return this.getSelectedOptions().map(n=>n.id)}getSelectedValues(){return this.getSelectedOptions().map(n=>n.value)}getSelectedOptions(){return this.filter(n=>n.selected,!1)}getOptgroupByID(n){for(let r of this.data)if(r instanceof c&&r.id===n)return r;return null}getOptionByID(n){let r=this.filter(p=>p.id===n,!1);return r.length?r[0]:null}getSelectType(){return this.selectType}getFirstOption(){let n=null;for(let r of this.data)if(r instanceof c?n=r.options[0]:r instanceof h&&(n=r),n)break;return n}search(n,r){return n=n.trim(),n===""?this.getData():this.filter(p=>r(p,n),!0)}filter(n,r){const p=[];return this.data.forEach(u=>{if(u instanceof c){let m=[];if(u.options.forEach(v=>{(!n||n(v))&&(r?m.push(new h(v)):p.push(new h(v)))}),m.length>0){let v=new c(u);v.options=m,p.push(v)}}u instanceof h&&(!n||n(u))&&p.push(new h(u))}),p}selectedOrderOptions(n){const r=[];return this.selectedOrder.forEach(p=>{const u=n.find(m=>m.id===p);u&&r.push(u)}),n.forEach(p=>{let u=!1;r.forEach(m=>{if(p.id===m.id){u=!0;return}}),u||r.push(p)}),r}}class _{constructor(n,r,p,u){this.store=p,this.settings=n,this.classes=r,this.callbacks=u,this.main=this.mainDiv(),this.content=this.contentDiv(),this.updateClassStyles(),this.updateAriaAttributes(),this.settings.contentLocation&&this.settings.contentLocation.appendChild(this.content.main)}enable(){this.main.main.classList.remove(this.classes.disabled),this.content.search.input.disabled=!1}disable(){this.main.main.classList.add(this.classes.disabled),this.content.search.input.disabled=!0}open(){this.main.arrow.path.setAttribute("d",this.classes.arrowOpen),this.main.main.classList.add(this.settings.openPosition==="up"?this.classes.openAbove:this.classes.openBelow),this.main.main.setAttribute("aria-expanded","true"),this.moveContent();const n=this.store.getSelectedOptions();if(n.length){const r=n[n.length-1].id,p=this.content.list.querySelector('[data-id="'+r+'"]');p&&this.ensureElementInView(this.content.list,p)}}close(){this.main.main.classList.remove(this.classes.openAbove),this.main.main.classList.remove(this.classes.openBelow),this.main.main.setAttribute("aria-expanded","false"),this.content.main.classList.remove(this.classes.openAbove),this.content.main.classList.remove(this.classes.openBelow),this.main.arrow.path.setAttribute("d",this.classes.arrowClose)}updateClassStyles(){if(this.main.main.className="",this.main.main.removeAttribute("style"),this.content.main.className="",this.content.main.removeAttribute("style"),this.main.main.classList.add(this.classes.main),this.content.main.classList.add(this.classes.content),this.settings.style!==""&&(this.main.main.style.cssText=this.settings.style,this.content.main.style.cssText=this.settings.style),this.settings.class.length)for(const n of this.settings.class)n.trim()!==""&&(this.main.main.classList.add(n.trim()),this.content.main.classList.add(n.trim()));(this.settings.contentPosition==="relative"||this.settings.contentPosition==="fixed")&&this.content.main.classList.add("ss-"+this.settings.contentPosition)}updateAriaAttributes(){this.main.main.role="combobox",this.main.main.setAttribute("aria-haspopup","listbox"),this.main.main.setAttribute("aria-controls",this.content.main.id),this.main.main.setAttribute("aria-expanded","false"),this.content.main.setAttribute("role","listbox")}mainDiv(){var n;const r=document.createElement("div");r.dataset.id=this.settings.id,r.setAttribute("aria-label",this.settings.ariaLabel),r.tabIndex=0,r.onkeydown=D=>{switch(D.key){case"ArrowUp":case"ArrowDown":return this.callbacks.open(),D.key==="ArrowDown"?this.highlight("down"):this.highlight("up"),!1;case"Tab":return this.callbacks.close(),!0;case"Enter":case" ":this.callbacks.open();const M=this.content.list.querySelector("."+this.classes.highlighted);return M&&M.click(),!1;case"Escape":return this.callbacks.close(),!1}return D.key.length===1&&this.callbacks.open(),!0},r.onclick=D=>{this.settings.disabled||(this.settings.isOpen?this.callbacks.close():this.callbacks.open())};const p=document.createElement("div");p.classList.add(this.classes.values),r.appendChild(p);const u=document.createElement("div");u.classList.add(this.classes.deselect);const m=(n=this.store)===null||n===void 0?void 0:n.getSelectedOptions();!this.settings.allowDeselect||this.settings.isMultiple&&m&&m.length<=0?u.classList.add(this.classes.hide):u.classList.remove(this.classes.hide),u.onclick=D=>{if(D.stopPropagation(),this.settings.disabled)return;let M=!0;const G=this.store.getSelectedOptions(),Y=[];if(this.callbacks.beforeChange&&(M=this.callbacks.beforeChange(Y,G)===!0),M){if(this.settings.isMultiple)this.callbacks.setSelected([],!1),this.updateDeselectAll();else{const j=this.store.getFirstOption(),Z=j?j.id:"";this.callbacks.setSelected(Z,!1)}this.settings.closeOnSelect&&this.callbacks.close(),this.callbacks.afterChange&&this.callbacks.afterChange(this.store.getSelectedOptions())}};const v=document.createElementNS("http://www.w3.org/2000/svg","svg");v.setAttribute("viewBox","0 0 100 100");const b=document.createElementNS("http://www.w3.org/2000/svg","path");b.setAttribute("d",this.classes.deselectPath),v.appendChild(b),u.appendChild(v),r.appendChild(u);const y=document.createElementNS("http://www.w3.org/2000/svg","svg");y.classList.add(this.classes.arrow),y.setAttribute("viewBox","0 0 100 100");const O=document.createElementNS("http://www.w3.org/2000/svg","path");return O.setAttribute("d",this.classes.arrowClose),this.settings.alwaysOpen&&y.classList.add(this.classes.hide),y.appendChild(O),r.appendChild(y),{main:r,values:p,deselect:{main:u,svg:v,path:b},arrow:{main:y,path:O}}}mainFocus(n){n!=="click"&&this.main.main.focus({preventScroll:!0})}placeholder(){const n=this.store.filter(u=>u.placeholder,!1);let r=this.settings.placeholderText;n.length&&(n[0].html!==""?r=n[0].html:n[0].text!==""&&(r=n[0].text));const p=document.createElement("div");return p.classList.add(this.classes.placeholder),p.innerHTML=r,p}renderValues(){if(!this.settings.isMultiple){this.renderSingleValue();return}this.renderMultipleValues(),this.updateDeselectAll()}renderSingleValue(){const n=this.store.filter(p=>p.selected&&!p.placeholder,!1),r=n.length>0?n[0]:null;if(!r)this.main.values.innerHTML=this.placeholder().outerHTML;else{const p=document.createElement("div");p.classList.add(this.classes.single),r.html?p.innerHTML=r.html:p.innerText=r.text,this.main.values.innerHTML=p.outerHTML}!this.settings.allowDeselect||!n.length?this.main.deselect.main.classList.add(this.classes.hide):this.main.deselect.main.classList.remove(this.classes.hide)}renderMultipleValues(){let n=this.main.values.childNodes,r=this.store.filter(u=>u.selected&&u.display,!1);if(r.length===0){this.main.values.innerHTML=this.placeholder().outerHTML;return}else{const u=this.main.values.querySelector("."+this.classes.placeholder);u&&u.remove()}if(r.length>this.settings.maxValuesShown){const u=document.createElement("div");u.classList.add(this.classes.max),u.textContent=this.settings.maxValuesMessage.replace("{number}",r.length.toString()),this.main.values.innerHTML=u.outerHTML;return}else{const u=this.main.values.querySelector("."+this.classes.max);u&&u.remove()}this.settings.keepOrder&&(r=this.store.selectedOrderOptions(r));let p=[];for(let u=0;u<n.length;u++){const m=n[u],v=m.getAttribute("data-id");v&&(r.filter(y=>y.id===v,!1).length||p.push(m))}for(const u of p)u.classList.add(this.classes.valueOut),setTimeout(()=>{this.main.values.hasChildNodes()&&this.main.values.contains(u)&&this.main.values.removeChild(u)},100);n=this.main.values.childNodes;for(let u=0;u<r.length;u++){let m=!0;for(let v=0;v<n.length;v++)r[u].id===String(n[v].dataset.id)&&(m=!1);m&&(this.settings.keepOrder?this.main.values.appendChild(this.multipleValue(r[u])):n.length===0?this.main.values.appendChild(this.multipleValue(r[u])):u===0?this.main.values.insertBefore(this.multipleValue(r[u]),n[u]):n[u-1].insertAdjacentElement("afterend",this.multipleValue(r[u])))}}multipleValue(n){const r=document.createElement("div");r.classList.add(this.classes.value),r.dataset.id=n.id;const p=document.createElement("div");if(p.classList.add(this.classes.valueText),p.textContent=n.text,r.appendChild(p),!n.mandatory){const u=document.createElement("div");u.classList.add(this.classes.valueDelete),u.onclick=b=>{if(b.preventDefault(),b.stopPropagation(),this.settings.disabled)return;let y=!0;const O=this.store.getSelectedOptions(),D=O.filter(M=>M.selected&&M.id!==n.id,!0);if(!(this.settings.minSelected&&D.length<this.settings.minSelected)&&(this.callbacks.beforeChange&&(y=this.callbacks.beforeChange(D,O)===!0),y)){let M=[];for(const G of D){if(G instanceof c)for(const Y of G.options)M.push(Y.id);G instanceof h&&M.push(G.id)}this.callbacks.setSelected(M,!1),this.settings.closeOnSelect&&this.callbacks.close(),this.callbacks.afterChange&&this.callbacks.afterChange(D),this.updateDeselectAll()}};const m=document.createElementNS("http://www.w3.org/2000/svg","svg");m.setAttribute("viewBox","0 0 100 100");const v=document.createElementNS("http://www.w3.org/2000/svg","path");v.setAttribute("d",this.classes.optionDelete),m.appendChild(v),u.appendChild(m),r.appendChild(u)}return r}contentDiv(){const n=document.createElement("div");n.dataset.id=this.settings.id;const r=this.searchDiv();n.appendChild(r.main);const p=this.listDiv();return n.appendChild(p),{main:n,search:r,list:p}}moveContent(){if(this.settings.contentPosition==="relative"){this.moveContentBelow();return}if(this.settings.openPosition==="down"){this.moveContentBelow();return}else if(this.settings.openPosition==="up"){this.moveContentAbove();return}this.putContent()==="up"?this.moveContentAbove():this.moveContentBelow()}searchDiv(){const n=document.createElement("div"),r=document.createElement("input"),p=document.createElement("div");n.classList.add(this.classes.search);const u={main:n,input:r};if(this.settings.showSearch||(n.classList.add(this.classes.hide),r.readOnly=!0),r.type="search",r.placeholder=this.settings.searchPlaceholder,r.tabIndex=-1,r.setAttribute("aria-label",this.settings.searchPlaceholder),r.setAttribute("autocapitalize","off"),r.setAttribute("autocomplete","off"),r.setAttribute("autocorrect","off"),r.oninput=a(m=>{this.callbacks.search(m.target.value)},100),r.onkeydown=m=>{switch(m.key){case"ArrowUp":case"ArrowDown":return m.key==="ArrowDown"?this.highlight("down"):this.highlight("up"),!1;case"Tab":return this.callbacks.close(),!0;case"Escape":return this.callbacks.close(),!1;case" ":const v=this.content.list.querySelector("."+this.classes.highlighted);return v?(v.click(),!1):!0;case"Enter":if(this.callbacks.addable)return p.click(),!1;{const b=this.content.list.querySelector("."+this.classes.highlighted);if(b)return b.click(),!1}return!0}return!0},n.appendChild(r),this.callbacks.addable){p.classList.add(this.classes.addable);const m=document.createElementNS("http://www.w3.org/2000/svg","svg");m.setAttribute("viewBox","0 0 100 100");const v=document.createElementNS("http://www.w3.org/2000/svg","path");v.setAttribute("d",this.classes.addablePath),m.appendChild(v),p.appendChild(m),p.onclick=b=>{if(b.preventDefault(),b.stopPropagation(),!this.callbacks.addable)return;const y=this.content.search.input.value.trim();if(y===""){this.content.search.input.focus();return}const O=M=>{let G=new h(M);if(this.callbacks.addOption(G),this.settings.isMultiple){let Y=this.store.getSelected();Y.push(G.id),this.callbacks.setSelected(Y,!0)}else this.callbacks.setSelected([G.id],!0);this.callbacks.search(""),this.settings.closeOnSelect&&setTimeout(()=>{this.callbacks.close()},100)},D=this.callbacks.addable(y);D===!1||D===void 0||D===null||(D instanceof Promise?D.then(M=>{typeof M=="string"?O({text:M,value:M}):D instanceof Error?this.renderError(D.message):O(M)}):typeof D=="string"?O({text:D,value:D}):D instanceof Error?this.renderError(D.message):O(D))},n.appendChild(p),u.addable={main:p,svg:m,path:v}}return u}searchFocus(){this.content.search.input.focus()}getOptions(n=!1,r=!1,p=!1){let u="."+this.classes.option;return n&&(u+=":not(."+this.classes.placeholder+")"),r&&(u+=":not(."+this.classes.disabled+")"),p&&(u+=":not(."+this.classes.hide+")"),Array.from(this.content.list.querySelectorAll(u))}highlight(n){const r=this.getOptions(!0,!0,!0);if(r.length===0)return;if(r.length===1&&!r[0].classList.contains(this.classes.highlighted)){r[0].classList.add(this.classes.highlighted);return}let p=!1;for(const u of r)u.classList.contains(this.classes.highlighted)&&(p=!0);if(!p){for(const u of r)if(u.classList.contains(this.classes.selected)){u.classList.add(this.classes.highlighted);break}}for(let u=0;u<r.length;u++)if(r[u].classList.contains(this.classes.highlighted)){const m=r[u];m.classList.remove(this.classes.highlighted);const v=m.parentElement;if(v&&v.classList.contains(this.classes.open)){const O=v.querySelector("."+this.classes.optgroupLabel);O&&O.click()}let b=r[n==="down"?u+1<r.length?u+1:0:u-1>=0?u-1:r.length-1];b.classList.add(this.classes.highlighted),this.ensureElementInView(this.content.list,b);const y=b.parentElement;if(y&&y.classList.contains(this.classes.close)){const O=y.querySelector("."+this.classes.optgroupLabel);O&&O.click()}return}r[n==="down"?0:r.length-1].classList.add(this.classes.highlighted),this.ensureElementInView(this.content.list,r[n==="down"?0:r.length-1])}listDiv(){const n=document.createElement("div");return n.classList.add(this.classes.list),n}renderError(n){this.content.list.innerHTML="";const r=document.createElement("div");r.classList.add(this.classes.error),r.textContent=n,this.content.list.appendChild(r)}renderSearching(){this.content.list.innerHTML="";const n=document.createElement("div");n.classList.add(this.classes.searching),n.textContent=this.settings.searchingText,this.content.list.appendChild(n)}renderOptions(n){if(this.content.list.innerHTML="",n.length===0){const r=document.createElement("div");r.classList.add(this.classes.search),this.callbacks.addable?r.innerHTML=this.settings.addableText.replace("{value}",this.content.search.input.value):r.innerHTML=this.settings.searchText,this.content.list.appendChild(r);return}this.settings.allowDeselect&&!this.settings.isMultiple&&(this.store.filter(p=>p.placeholder,!1).length||this.store.addOption(new h({text:"",value:"",selected:!1,placeholder:!0}),!0));for(const r of n){if(r instanceof c){const p=document.createElement("div");p.classList.add(this.classes.optgroup);const u=document.createElement("div");u.classList.add(this.classes.optgroupLabel),p.appendChild(u);const m=document.createElement("div");m.classList.add(this.classes.optgroupLabelText),m.textContent=r.label,u.appendChild(m);const v=document.createElement("div");if(v.classList.add(this.classes.optgroupActions),u.appendChild(v),this.settings.isMultiple&&r.selectAll){const b=document.createElement("div");b.classList.add(this.classes.optgroupSelectAll);let y=!0;for(const Y of r.options)if(!Y.selected){y=!1;break}y&&b.classList.add(this.classes.selected);const O=document.createElement("span");O.textContent=r.selectAllText,b.appendChild(O);const D=document.createElementNS("http://www.w3.org/2000/svg","svg");D.setAttribute("viewBox","0 0 100 100"),b.appendChild(D);const M=document.createElementNS("http://www.w3.org/2000/svg","path");M.setAttribute("d",this.classes.optgroupSelectAllBox),D.appendChild(M);const G=document.createElementNS("http://www.w3.org/2000/svg","path");G.setAttribute("d",this.classes.optgroupSelectAllCheck),D.appendChild(G),b.addEventListener("click",Y=>{Y.preventDefault(),Y.stopPropagation();const j=this.store.getSelected();if(y){const Z=j.filter(le=>{for(const se of r.options)if(le===se.id)return!1;return!0});this.callbacks.setSelected(Z,!0);return}else{const Z=j.concat(r.options.map(le=>le.id));for(const le of r.options)this.store.getOptionByID(le.id)||this.callbacks.addOption(le);this.callbacks.setSelected(Z,!0);return}}),v.appendChild(b)}if(r.closable!=="off"){const b=document.createElement("div");b.classList.add(this.classes.optgroupClosable);const y=document.createElementNS("http://www.w3.org/2000/svg","svg");y.setAttribute("viewBox","0 0 100 100"),y.classList.add(this.classes.arrow),b.appendChild(y);const O=document.createElementNS("http://www.w3.org/2000/svg","path");y.appendChild(O),r.options.some(D=>D.selected)||this.content.search.input.value.trim()!==""?(b.classList.add(this.classes.open),O.setAttribute("d",this.classes.arrowOpen)):r.closable==="open"?(p.classList.add(this.classes.open),O.setAttribute("d",this.classes.arrowOpen)):r.closable==="close"&&(p.classList.add(this.classes.close),O.setAttribute("d",this.classes.arrowClose)),u.addEventListener("click",D=>{D.preventDefault(),D.stopPropagation(),p.classList.contains(this.classes.close)?(p.classList.remove(this.classes.close),p.classList.add(this.classes.open),O.setAttribute("d",this.classes.arrowOpen)):(p.classList.remove(this.classes.open),p.classList.add(this.classes.close),O.setAttribute("d",this.classes.arrowClose))}),v.appendChild(b)}p.appendChild(u);for(const b of r.options)p.appendChild(this.option(b));this.content.list.appendChild(p)}r instanceof h&&this.content.list.appendChild(this.option(r))}}option(n){if(n.placeholder){const p=document.createElement("div");return p.classList.add(this.classes.option),p.classList.add(this.classes.hide),p}const r=document.createElement("div");return r.dataset.id=n.id,r.classList.add(this.classes.option),r.setAttribute("role","option"),n.class&&n.class.split(" ").forEach(p=>{r.classList.add(p)}),n.style&&(r.style.cssText=n.style),this.settings.searchHighlight&&this.content.search.input.value.trim()!==""?r.innerHTML=this.highlightText(n.html!==""?n.html:n.text,this.content.search.input.value,this.classes.searchHighlighter):n.html!==""?r.innerHTML=n.html:r.textContent=n.text,this.settings.showOptionTooltips&&r.textContent&&r.setAttribute("title",r.textContent),n.display||r.classList.add(this.classes.hide),n.disabled&&r.classList.add(this.classes.disabled),n.selected&&this.settings.hideSelected&&r.classList.add(this.classes.hide),n.selected?(r.classList.add(this.classes.selected),r.setAttribute("aria-selected","true"),this.main.main.setAttribute("aria-activedescendant",r.id)):(r.classList.remove(this.classes.selected),r.setAttribute("aria-selected","false")),r.addEventListener("click",p=>{p.preventDefault(),p.stopPropagation();const u=this.store.getSelected(),m=p.currentTarget,v=String(m.dataset.id);if(n.disabled||n.selected&&!this.settings.allowDeselect||this.settings.isMultiple&&this.settings.maxSelected<=u.length&&!n.selected||this.settings.isMultiple&&this.settings.minSelected>=u.length&&n.selected)return;let b=!1;const y=this.store.getSelectedOptions();let O=[];this.settings.isMultiple&&(n.selected?O=y.filter(D=>D.id!==v):O=y.concat(n)),this.settings.isMultiple||(n.selected?O=[]:O=[n]),this.callbacks.beforeChange||(b=!0),this.callbacks.beforeChange&&(this.callbacks.beforeChange(O,y)===!1?b=!1:b=!0),b&&(this.store.getOptionByID(v)||this.callbacks.addOption(n),this.callbacks.setSelected(O.map(D=>D.id),!1),this.settings.closeOnSelect&&this.callbacks.close(),this.callbacks.afterChange&&this.callbacks.afterChange(O))}),r}destroy(){this.main.main.remove(),this.content.main.remove()}highlightText(n,r,p){let u=n;const m=new RegExp("(?![^<]*>)("+r.trim()+")(?![^<]*>[^<>]*</)","i");if(!n.match(m))return n;const v=n.match(m).index,b=v+n.match(m)[0].toString().length,y=n.substring(v,b);return u=u.replace(m,`<mark class="${p}">${y}</mark>`),u}moveContentAbove(){const n=this.main.main.offsetHeight,r=this.content.main.offsetHeight;this.main.main.classList.remove(this.classes.openBelow),this.main.main.classList.add(this.classes.openAbove),this.content.main.classList.remove(this.classes.openBelow),this.content.main.classList.add(this.classes.openAbove);const p=this.main.main.getBoundingClientRect();this.content.main.style.margin="-"+(n+r-1)+"px 0px 0px 0px",this.content.main.style.top=p.top+p.height+(this.settings.contentPosition==="fixed"?0:window.scrollY)+"px",this.content.main.style.left=p.left+(this.settings.contentPosition==="fixed"?0:window.scrollX)+"px",this.content.main.style.width=p.width+"px"}moveContentBelow(){this.main.main.classList.remove(this.classes.openAbove),this.main.main.classList.add(this.classes.openBelow),this.content.main.classList.remove(this.classes.openAbove),this.content.main.classList.add(this.classes.openBelow);const n=this.main.main.getBoundingClientRect();this.content.main.style.margin="-1px 0px 0px 0px",this.settings.contentPosition!=="relative"&&(this.content.main.style.top=n.top+n.height+(this.settings.contentPosition==="fixed"?0:window.scrollY)+"px",this.content.main.style.left=n.left+(this.settings.contentPosition==="fixed"?0:window.scrollX)+"px",this.content.main.style.width=n.width+"px")}ensureElementInView(n,r){const p=n.scrollTop+n.offsetTop,u=p+n.clientHeight,m=r.offsetTop,v=m+r.clientHeight;m<p?n.scrollTop-=p-m:v>u&&(n.scrollTop+=v-u)}putContent(){const n=this.main.main.offsetHeight,r=this.main.main.getBoundingClientRect(),p=this.content.main.offsetHeight;return window.innerHeight-(r.top+n)<=p&&r.top>p?"up":"down"}updateDeselectAll(){if(!this.store||!this.settings)return;const n=this.store.getSelectedOptions(),r=n&&n.length>0,p=this.settings.isMultiple,u=this.settings.allowDeselect,m=this.main.deselect.main,v=this.classes.hide;u&&!(p&&!r)?m.classList.remove(v):m.classList.add(v)}}class k{constructor(n){this.listen=!1,this.observer=null,this.select=n,this.valueChange=this.valueChange.bind(this),this.select.addEventListener("change",this.valueChange,{passive:!0}),this.observer=new MutationObserver(this.observeCall.bind(this)),this.changeListen(!0)}enable(){this.select.disabled=!1}disable(){this.select.disabled=!0}hideUI(){this.select.tabIndex=-1,this.select.style.display="none",this.select.setAttribute("aria-hidden","true")}showUI(){this.select.removeAttribute("tabindex"),this.select.style.display="",this.select.removeAttribute("aria-hidden")}changeListen(n){this.listen=n,n&&this.observer&&this.observer.observe(this.select,{subtree:!0,childList:!0,attributes:!0}),n||this.observer&&this.observer.disconnect()}valueChange(n){return this.listen&&this.onValueChange&&this.onValueChange(this.getSelectedOptions()),!0}observeCall(n){if(!this.listen)return;let r=!1,p=!1,u=!1;for(const m of n){if(m.target===this.select&&(m.attributeName==="disabled"&&(p=!0),m.attributeName==="class"&&(r=!0),m.type==="childList")){for(const v of m.addedNodes)if(v.nodeName==="OPTION"&&v.value===this.select.value){this.select.dispatchEvent(new Event("change"));break}u=!0}(m.target.nodeName==="OPTGROUP"||m.target.nodeName==="OPTION")&&(u=!0)}r&&this.onClassChange&&this.onClassChange(this.select.className.split(" ")),p&&this.onDisabledChange&&(this.changeListen(!1),this.onDisabledChange(this.select.disabled),this.changeListen(!0)),u&&this.onOptionsChange&&(this.changeListen(!1),this.onOptionsChange(this.getData()),this.changeListen(!0))}getData(){let n=[];const r=this.select.childNodes;for(const p of r)p.nodeName==="OPTGROUP"&&n.push(this.getDataFromOptgroup(p)),p.nodeName==="OPTION"&&n.push(this.getDataFromOption(p));return n}getDataFromOptgroup(n){let r={id:n.id,label:n.label,selectAll:n.dataset?n.dataset.selectall==="true":!1,selectAllText:n.dataset?n.dataset.selectalltext:"Select all",closable:n.dataset?n.dataset.closable:"off",options:[]};const p=n.childNodes;for(const u of p)u.nodeName==="OPTION"&&r.options.push(this.getDataFromOption(u));return r}getDataFromOption(n){return{id:n.id,value:n.value,text:n.text,html:n.dataset&&n.dataset.html?n.dataset.html:"",selected:n.selected,display:n.style.display!=="none",disabled:n.disabled,mandatory:n.dataset?n.dataset.mandatory==="true":!1,placeholder:n.dataset.placeholder==="true",class:n.className,style:n.style.cssText,data:n.dataset}}getSelectedOptions(){let n=[];const r=this.select.childNodes;for(const p of r){if(p.nodeName==="OPTGROUP"){const u=p.childNodes;for(const m of u)if(m.nodeName==="OPTION"){const v=m;v.selected&&n.push(this.getDataFromOption(v))}}if(p.nodeName==="OPTION"){const u=p;u.selected&&n.push(this.getDataFromOption(u))}}return n}getSelectedValues(){return this.getSelectedOptions().map(n=>n.value)}setSelected(n){this.changeListen(!1);const r=this.select.childNodes;for(const p of r){if(p.nodeName==="OPTGROUP"){const m=p.childNodes;for(const v of m)if(v.nodeName==="OPTION"){const b=v;b.selected=n.includes(b.id)}}if(p.nodeName==="OPTION"){const u=p;u.selected=n.includes(u.id)}}this.changeListen(!0)}setSelectedByValue(n){this.changeListen(!1);const r=this.select.childNodes;for(const p of r){if(p.nodeName==="OPTGROUP"){const m=p.childNodes;for(const v of m)if(v.nodeName==="OPTION"){const b=v;b.selected=n.includes(b.value)}}if(p.nodeName==="OPTION"){const u=p;u.selected=n.includes(u.value)}}this.changeListen(!0)}updateSelect(n,r,p){this.changeListen(!1),n&&(this.select.dataset.id=n),r&&(this.select.style.cssText=r),p&&(this.select.className="",p.forEach(u=>{u.trim()!==""&&this.select.classList.add(u.trim())})),this.changeListen(!0)}updateOptions(n){this.changeListen(!1),this.select.innerHTML="";for(const r of n)r instanceof c&&this.select.appendChild(this.createOptgroup(r)),r instanceof h&&this.select.appendChild(this.createOption(r));this.select.dispatchEvent(new Event("change",{bubbles:!0})),this.changeListen(!0)}createOptgroup(n){const r=document.createElement("optgroup");if(r.id=n.id,r.label=n.label,n.selectAll&&(r.dataset.selectAll="true"),n.closable!=="off"&&(r.dataset.closable=n.closable),n.options)for(const p of n.options)r.appendChild(this.createOption(p));return r}createOption(n){const r=document.createElement("option");return r.id=n.id,r.value=n.value,r.textContent=n.text,n.html!==""&&r.setAttribute("data-html",n.html),n.selected&&(r.selected=n.selected),n.disabled&&(r.disabled=!0),n.display||(r.style.display="none"),n.placeholder&&r.setAttribute("data-placeholder","true"),n.mandatory&&r.setAttribute("data-mandatory","true"),n.class&&n.class.split(" ").forEach(p=>{r.classList.add(p)}),n.data&&typeof n.data=="object"&&Object.keys(n.data).forEach(p=>{r.setAttribute("data-"+d(p),n.data[p])}),r}destroy(){this.changeListen(!1),this.select.removeEventListener("change",this.valueChange),this.observer&&(this.observer.disconnect(),this.observer=null),delete this.select.dataset.id,this.showUI()}}class w{constructor(n){this.id="",this.style="",this.class=[],this.isMultiple=!1,this.isOpen=!1,this.isFullOpen=!1,this.intervalMove=null,n||(n={}),this.id="ss-"+t(),this.style=n.style||"",this.class=n.class||[],this.disabled=n.disabled!==void 0?n.disabled:!1,this.alwaysOpen=n.alwaysOpen!==void 0?n.alwaysOpen:!1,this.showSearch=n.showSearch!==void 0?n.showSearch:!0,this.focusSearch=n.focusSearch!==void 0?n.focusSearch:!0,this.ariaLabel=n.ariaLabel||"Combobox",this.searchPlaceholder=n.searchPlaceholder||"Search",this.searchText=n.searchText||"No Results",this.searchingText=n.searchingText||"Searching...",this.searchHighlight=n.searchHighlight!==void 0?n.searchHighlight:!1,this.closeOnSelect=n.closeOnSelect!==void 0?n.closeOnSelect:!0,this.contentLocation=n.contentLocation||document.body,this.contentPosition=n.contentPosition||"absolute",this.openPosition=n.openPosition||"auto",this.placeholderText=n.placeholderText!==void 0?n.placeholderText:"Select Value",this.allowDeselect=n.allowDeselect!==void 0?n.allowDeselect:!1,this.hideSelected=n.hideSelected!==void 0?n.hideSelected:!1,this.keepOrder=n.keepOrder!==void 0?n.keepOrder:!1,this.showOptionTooltips=n.showOptionTooltips!==void 0?n.showOptionTooltips:!1,this.minSelected=n.minSelected||0,this.maxSelected=n.maxSelected||1e3,this.timeoutDelay=n.timeoutDelay||200,this.maxValuesShown=n.maxValuesShown||20,this.maxValuesMessage=n.maxValuesMessage||"{number} selected",this.addableText=n.addableText||'Press "Enter" to add {value}'}}class E{constructor(n){var r;if(this.events={search:void 0,searchFilter:(b,y)=>b.text.toLowerCase().indexOf(y.toLowerCase())!==-1,addable:void 0,beforeChange:void 0,afterChange:void 0,beforeOpen:void 0,afterOpen:void 0,beforeClose:void 0,afterClose:void 0},this.windowResize=a(()=>{!this.settings.isOpen&&!this.settings.isFullOpen||this.render.moveContent()}),this.windowScroll=a(()=>{!this.settings.isOpen&&!this.settings.isFullOpen||this.render.moveContent()}),this.documentClick=b=>{this.settings.isOpen&&b.target&&!i(b.target,this.settings.id)&&this.close(b.type)},this.windowVisibilityChange=()=>{document.hidden&&this.close()},this.selectEl=typeof n.select=="string"?document.querySelector(n.select):n.select,!this.selectEl){n.events&&n.events.error&&n.events.error(new Error("Could not find select element"));return}if(this.selectEl.tagName!=="SELECT"){n.events&&n.events.error&&n.events.error(new Error("Element isnt of type select"));return}this.selectEl.dataset.ssid&&this.destroy(),this.settings=new w(n.settings),this.cssClasses=new s(n.cssClasses);const p=["afterChange","beforeOpen","afterOpen","beforeClose","afterClose"];for(const b in n.events)n.events.hasOwnProperty(b)&&(p.indexOf(b)!==-1?this.events[b]=a(n.events[b],100):this.events[b]=n.events[b]);this.settings.disabled=!((r=n.settings)===null||r===void 0)&&r.disabled?n.settings.disabled:this.selectEl.disabled,this.settings.isMultiple=this.selectEl.multiple,this.settings.style=this.selectEl.style.cssText,this.settings.class=this.selectEl.className.split(" "),this.select=new k(this.selectEl),this.select.updateSelect(this.settings.id,this.settings.style,this.settings.class),this.select.hideUI(),this.select.onValueChange=b=>{this.setSelected(b.map(y=>y.id))},this.select.onClassChange=b=>{this.settings.class=b,this.render.updateClassStyles()},this.select.onDisabledChange=b=>{b?this.disable():this.enable()},this.select.onOptionsChange=b=>{this.setData(b)},this.store=new g(this.settings.isMultiple?"multiple":"single",n.data?n.data:this.select.getData()),n.data&&this.select.updateOptions(this.store.getData());const u={open:this.open.bind(this),close:this.close.bind(this),addable:this.events.addable?this.events.addable:void 0,setSelected:this.setSelected.bind(this),addOption:this.addOption.bind(this),search:this.search.bind(this),beforeChange:this.events.beforeChange,afterChange:this.events.afterChange};this.render=new _(this.settings,this.cssClasses,this.store,u),this.render.renderValues(),this.render.renderOptions(this.store.getData());const m=this.selectEl.getAttribute("aria-label"),v=this.selectEl.getAttribute("aria-labelledby");m?this.render.main.main.setAttribute("aria-label",m):v&&this.render.main.main.setAttribute("aria-labelledby",v),this.selectEl.parentNode&&this.selectEl.parentNode.insertBefore(this.render.main.main,this.selectEl.nextSibling),window.addEventListener("resize",this.windowResize,!1),this.settings.openPosition==="auto"&&window.addEventListener("scroll",this.windowScroll,!1),document.addEventListener("visibilitychange",this.windowVisibilityChange),this.settings.disabled&&this.disable(),this.settings.alwaysOpen&&this.open(),this.selectEl.slim=this}enable(){this.settings.disabled=!1,this.select.enable(),this.render.enable()}disable(){this.settings.disabled=!0,this.select.disable(),this.render.disable()}getData(){return this.store.getData()}setData(n){const r=this.store.getSelected(),p=this.store.validateDataArray(n);if(p){this.events.error&&this.events.error(p);return}this.store.setData(n);const u=this.store.getData();this.select.updateOptions(u),this.render.renderValues(),this.render.renderOptions(u),this.events.afterChange&&!o(r,this.store.getSelected())&&this.events.afterChange(this.store.getSelectedOptions())}getSelected(){let n=this.store.getSelectedOptions();return this.settings.keepOrder&&(n=this.store.selectedOrderOptions(n)),n.map(r=>r.value)}setSelected(n,r=!0){const p=this.store.getSelected(),u=this.store.getDataOptions();n=Array.isArray(n)?n:[n];const m=[];for(const b of n){if(u.find(y=>y.id==b)){m.push(b);continue}for(const y of u.filter(O=>O.value==b))m.push(y.id)}this.store.setSelectedBy("id",m);const v=this.store.getData();this.select.updateOptions(v),this.render.renderValues(),this.render.content.search.input.value!==""?this.search(this.render.content.search.input.value):this.render.renderOptions(v),r&&this.events.afterChange&&!o(p,this.store.getSelected())&&this.events.afterChange(this.store.getSelectedOptions())}addOption(n){const r=this.store.getSelected();this.store.getDataOptions().some(u=>{var m;return u.value===((m=n.value)!==null&&m!==void 0?m:n.text)})||this.store.addOption(n);const p=this.store.getData();this.select.updateOptions(p),this.render.renderValues(),this.render.renderOptions(p),this.events.afterChange&&!o(r,this.store.getSelected())&&this.events.afterChange(this.store.getSelectedOptions())}open(){this.settings.disabled||this.settings.isOpen||(this.events.beforeOpen&&this.events.beforeOpen(),this.render.open(),this.settings.showSearch&&this.settings.focusSearch&&this.render.searchFocus(),this.settings.isOpen=!0,setTimeout(()=>{this.events.afterOpen&&this.events.afterOpen(),this.settings.isOpen&&(this.settings.isFullOpen=!0),document.addEventListener("click",this.documentClick)},this.settings.timeoutDelay),this.settings.contentPosition==="absolute"&&(this.settings.intervalMove&&clearInterval(this.settings.intervalMove),this.settings.intervalMove=setInterval(this.render.moveContent.bind(this.render),500)))}close(n=null){!this.settings.isOpen||this.settings.alwaysOpen||(this.events.beforeClose&&this.events.beforeClose(),this.render.close(),this.render.content.search.input.value!==""&&this.search(""),this.render.mainFocus(n),this.settings.isOpen=!1,this.settings.isFullOpen=!1,setTimeout(()=>{this.events.afterClose&&this.events.afterClose(),document.removeEventListener("click",this.documentClick)},this.settings.timeoutDelay),this.settings.intervalMove&&clearInterval(this.settings.intervalMove))}search(n){if(this.render.content.search.input.value!==n&&(this.render.content.search.input.value=n),!this.events.search){this.render.renderOptions(n===""?this.store.getData():this.store.search(n,this.events.searchFilter));return}this.render.renderSearching();const r=this.events.search(n,this.store.getSelectedOptions());if(r instanceof Promise){r.then(p=>{this.render.renderOptions(this.store.partialToFullData(p))}).catch(p=>{this.render.renderError(typeof p=="string"?p:p.message)});return}else Array.isArray(r)?this.render.renderOptions(this.store.partialToFullData(r)):this.render.renderError("Search event must return a promise or an array of data")}destroy(){document.removeEventListener("click",this.documentClick),window.removeEventListener("resize",this.windowResize,!1),this.settings.openPosition==="auto"&&window.removeEventListener("scroll",this.windowScroll,!1),document.removeEventListener("visibilitychange",this.windowVisibilityChange),this.store.setData([]),this.render.destroy(),this.select.destroy()}}return E})})(Pn);var ul=Pn.exports;const dl=In(ul);function tn(l){let e,s;return{c(){e=F("span"),s=ye(l[0]),this.h()},l(t){e=V(t,"SPAN",{style:!0,class:!0});var i=q(e);s=Te(i,l[0]),i.forEach(x),this.h()},h(){Ds(e,"background-color",l[2](l[0])),$(e,"class","badge rounded-pill coloured-badge text-dark")},m(t,i){ce(t,e,i),A(e,s)},p(t,i){i&1&&Ie(s,t[0]),i&1&&Ds(e,"background-color",t[2](t[0]))},d(t){t&&x(e)}}}function pl(l){let e,s=l[0]&&l[1]&&tn(l);return{c(){s&&s.c(),e=Ae()},l(t){s&&s.l(t),e=Ae()},m(t,i){s&&s.m(t,i),ce(t,e,i)},p(t,[i]){t[0]&&t[1]?s?s.p(t,i):(s=tn(t),s.c(),s.m(e.parentNode,e)):s&&(s.d(1),s=null)},i:Be,o:Be,d(t){t&&x(e),s&&s.d(t)}}}function fl(l,e,s){let{value:t}=e,i;function a(d){return new i({lightness:.8,saturation:.95}).hex(d)}let o=!1;return En(async()=>{i=(await ti(async()=>{const{default:d}=await import("../chunks/esm.B-bOhdOb.js");return{default:d}},[],import.meta.url)).default,s(1,o=!0)}),l.$$set=d=>{"value"in d&&s(0,t=d.value)},[t,o,a]}class $n extends Pt{constructor(e){super(),$t(this,e,fl,pl,Mt,{value:0})}}function ml(l){let e,s='<i class="bi bi-x"></i>';return{c(){e=F("span"),e.innerHTML=s,this.h()},l(t){e=V(t,"SPAN",{class:!0,"aria-checked":!0,"data-svelte-h":!0}),Oe(e)!=="svelte-1og8rg0"&&(e.innerHTML=s),this.h()},h(){$(e,"class","text-danger boolean-icon svelte-1f3x2lj"),$(e,"aria-checked","false")},m(t,i){ce(t,e,i)},d(t){t&&x(e)}}}function gl(l){let e,s='<i class="bi bi-check"></i>';return{c(){e=F("span"),e.innerHTML=s,this.h()},l(t){e=V(t,"SPAN",{class:!0,"aria-checked":!0,"data-svelte-h":!0}),Oe(e)!=="svelte-w4qkap"&&(e.innerHTML=s),this.h()},h(){$(e,"class","text-success boolean-icon svelte-1f3x2lj"),$(e,"aria-checked","true")},m(t,i){ce(t,e,i)},d(t){t&&x(e)}}}function _l(l){let e;function s(a,o){if(a[0]===!0)return gl;if(a[0]===!1)return ml}let t=s(l),i=t&&t(l);return{c(){i&&i.c(),e=Ae()},l(a){i&&i.l(a),e=Ae()},m(a,o){i&&i.m(a,o),ce(a,e,o)},p(a,[o]){t!==(t=s(a))&&(i&&i.d(1),i=t&&t(a),i&&(i.c(),i.m(e.parentNode,e)))},i:Be,o:Be,d(a){a&&x(e),i&&i.d(a)}}}function bl(l,e,s){let{value:t}=e;return l.$$set=i=>{"value"in i&&s(0,t=i.value)},[t]}class kl extends Pt{constructor(e){super(),$t(this,e,bl,_l,Mt,{value:0})}}function sn(l,e,s){const t=l.slice();return t[35]=e[s],t}function nn(l,e,s){const t=l.slice();return t[38]=e[s],t[39]=e,t[40]=s,t}const El=l=>({task:l[0]&2}),ln=l=>({task:l[38].taskVersions[l[38].selectedVersion]}),vl=l=>({task:l[0]&2}),an=l=>({task:l[38].taskVersions[l[38].selectedVersion]});function rn(l,e,s){const t=l.slice();return t[41]=e[s],t}function on(l,e,s){const t=l.slice();return t[44]=e[s][0],t[45]=e[s][1],t}const wl=l=>({}),cn=l=>({});function yl(l){let e,s,t,i,a,o,d=l[7][zn]+"",c,h,g,_="Category",k,w,E="Modality",C,n,r="Input Types",p,u,m="Metadata",v,b,y="Version",O,D,M,G,Y,j,Z,le,se,de,ne=l[5]===1?"task":"tasks",I,N;const H=l[16]["extra-columns-header"],T=ss(H,l,l[15],cn);let R=Ve(l[1]),X=[];for(let B=0;B<R.length;B+=1)X[B]=gn(sn(l,R,B));const ie=B=>ue(X[B],1,1,()=>{X[B]=null});return{c(){e=F("div"),s=F("div"),t=F("table"),i=F("thead"),a=F("tr"),o=F("th"),c=ye(d),h=re(),g=F("th"),g.textContent=_,k=re(),w=F("th"),w.textContent=E,C=re(),n=F("th"),n.textContent=r,p=re(),u=F("th"),u.textContent=m,v=re(),b=F("th"),b.textContent=y,O=re(),T&&T.c(),D=re(),M=F("tbody");for(let B=0;B<X.length;B+=1)X[B].c();G=re(),Y=F("p"),j=ye("Showing "),Z=ye(l[6]),le=ye(" of "),se=ye(l[5]),de=re(),I=ye(ne),this.h()},l(B){e=V(B,"DIV",{class:!0});var Q=q(e);s=V(Q,"DIV",{class:!0});var K=q(s);t=V(K,"TABLE",{class:!0,id:!0});var xe=q(t);i=V(xe,"THEAD",{});var nt=q(i);a=V(nt,"TR",{});var fe=q(a);o=V(fe,"TH",{class:!0});var $e=q(o);c=Te($e,d),$e.forEach(x),h=oe(fe),g=V(fe,"TH",{class:!0,"data-svelte-h":!0}),Oe(g)!=="svelte-10ppr1q"&&(g.textContent=_),k=oe(fe),w=V(fe,"TH",{class:!0,"data-svelte-h":!0}),Oe(w)!=="svelte-slk3w9"&&(w.textContent=E),C=oe(fe),n=V(fe,"TH",{class:!0,"data-svelte-h":!0}),Oe(n)!=="svelte-udakd"&&(n.textContent=r),p=oe(fe),u=V(fe,"TH",{class:!0,"data-svelte-h":!0}),Oe(u)!=="svelte-v7n8cf"&&(u.textContent=m),v=oe(fe),b=V(fe,"TH",{colspan:!0,class:!0,"data-svelte-h":!0}),Oe(b)!=="svelte-hpno2d"&&(b.textContent=y),O=oe(fe),T&&T.l(fe),fe.forEach(x),nt.forEach(x),D=oe(xe),M=V(xe,"TBODY",{});var We=q(M);for(let Ue=0;Ue<X.length;Ue+=1)X[Ue].l(We);We.forEach(x),xe.forEach(x),K.forEach(x),Q.forEach(x),G=oe(B),Y=V(B,"P",{class:!0});var be=q(Y);j=Te(be,"Showing "),Z=Te(be,l[6]),le=Te(be," of "),se=Te(be,l[5]),de=oe(be),I=Te(be,ne),be.forEach(x),this.h()},h(){$(o,"class","svelte-v3mpfp"),$(g,"class","svelte-v3mpfp"),$(w,"class","svelte-v3mpfp"),$(n,"class","svelte-v3mpfp"),$(u,"class","svelte-v3mpfp"),$(b,"colspan","2"),$(b,"class","svelte-v3mpfp"),$(t,"class","table table-borderless svelte-v3mpfp"),$(t,"id","filtered-tasks-table"),$(s,"class","card-body p-0"),$(e,"class","card"),$(Y,"class","mt-3 text-center mb-0")},m(B,Q){ce(B,e,Q),A(e,s),A(s,t),A(t,i),A(i,a),A(a,o),A(o,c),A(a,h),A(a,g),A(a,k),A(a,w),A(a,C),A(a,n),A(a,p),A(a,u),A(a,v),A(a,b),A(a,O),T&&T.m(a,null),A(t,D),A(t,M);for(let K=0;K<X.length;K+=1)X[K]&&X[K].m(M,null);ce(B,G,Q),ce(B,Y,Q),A(Y,j),A(Y,Z),A(Y,le),A(Y,se),A(Y,de),A(Y,I),N=!0},p(B,Q){if(T&&T.p&&(!N||Q[0]&32768)&&ns(T,H,B,B[15],N?ls(H,B[15],Q,wl):is(B[15]),cn),Q[0]&32794){R=Ve(B[1]);let K;for(K=0;K<R.length;K+=1){const xe=sn(B,R,K);X[K]?(X[K].p(xe,Q),ae(X[K],1)):(X[K]=gn(xe),X[K].c(),ae(X[K],1),X[K].m(M,null))}for(Ge(),K=R.length;K<X.length;K+=1)ie(K);je()}(!N||Q[0]&64)&&Ie(Z,B[6]),(!N||Q[0]&32)&&Ie(se,B[5]),(!N||Q[0]&32)&&ne!==(ne=B[5]===1?"task":"tasks")&&Ie(I,ne)},i(B){if(!N){ae(T,B);for(let Q=0;Q<R.length;Q+=1)ae(X[Q]);N=!0}},o(B){ue(T,B),X=X.filter(Boolean);for(let Q=0;Q<X.length;Q+=1)ue(X[Q]);N=!1},d(B){B&&(x(e),x(G),x(Y)),T&&T.d(B),zt(X,B)}}}function Tl(l){let e,s=`There are no available tasks. You can add new tasks on the
		<a href="/v2/tasks/management">Tasks management</a> page.`;return{c(){e=F("p"),e.innerHTML=s},l(t){e=V(t,"P",{"data-svelte-h":!0}),Oe(e)!=="svelte-1jz05g4"&&(e.innerHTML=s)},m(t,i){ce(t,e,i)},p:Be,i:Be,o:Be,d(t){t&&x(e)}}}function hn(l){let e,s,t=l[38].taskVersions[l[38].selectedVersion].task_name+"",i,a,o,d,c,h,g,_,k,w=bn(l[38].taskVersions[l[38].selectedVersion])+"",E,C,n,r,p,u,m,v,b,y=l[38].taskVersions[l[38].selectedVersion].category&&un(l),O=l[38].taskVersions[l[38].selectedVersion].modality&&dn(l),D=Ve(Object.entries(l[38].taskVersions[l[38].selectedVersion].input_types)),M=[];for(let I=0;I<D.length;I+=1)M[I]=pn(on(l,D,I));const G=I=>ue(M[I],1,1,()=>{M[I]=null});function Y(I,N){return N[0]&2&&(r=null),r==null&&(r=Object.keys(I[38].taskVersions).length>1),r?Ol:Sl}let j=Y(l,[-1,-1]),Z=j(l);const le=l[16]["docs-info"],se=ss(le,l,l[15],an),de=l[16]["extra-columns"],ne=ss(de,l,l[15],ln);return{c(){e=F("tr"),s=F("td"),i=ye(t),a=re(),o=F("td"),y&&y.c(),d=re(),c=F("td"),O&&O.c(),h=re(),g=F("td");for(let I=0;I<M.length;I+=1)M[I].c();_=re(),k=F("td"),E=ye(w),C=re(),n=F("td"),Z.c(),p=re(),u=F("td"),se&&se.c(),m=re(),ne&&ne.c(),v=re(),this.h()},l(I){e=V(I,"TR",{});var N=q(e);s=V(N,"TD",{class:!0});var H=q(s);i=Te(H,t),H.forEach(x),a=oe(N),o=V(N,"TD",{class:!0});var T=q(o);y&&y.l(T),T.forEach(x),d=oe(N),c=V(N,"TD",{class:!0});var R=q(c);O&&O.l(R),R.forEach(x),h=oe(N),g=V(N,"TD",{class:!0});var X=q(g);for(let K=0;K<M.length;K+=1)M[K].l(X);X.forEach(x),_=oe(N),k=V(N,"TD",{class:!0});var ie=q(k);E=Te(ie,w),ie.forEach(x),C=oe(N),n=V(N,"TD",{class:!0});var B=q(n);Z.l(B),B.forEach(x),p=oe(N),u=V(N,"TD",{class:!0});var Q=q(u);se&&se.l(Q),Q.forEach(x),m=oe(N),ne&&ne.l(N),v=oe(N),N.forEach(x),this.h()},h(){$(s,"class","task-name-col svelte-v3mpfp"),$(o,"class","svelte-v3mpfp"),$(c,"class","svelte-v3mpfp"),$(g,"class","metadata-col svelte-v3mpfp"),$(k,"class","metadata-col svelte-v3mpfp"),$(n,"class","version-col svelte-v3mpfp"),$(u,"class","docs-info-col svelte-v3mpfp")},m(I,N){ce(I,e,N),A(e,s),A(s,i),A(e,a),A(e,o),y&&y.m(o,null),A(e,d),A(e,c),O&&O.m(c,null),A(e,h),A(e,g);for(let H=0;H<M.length;H+=1)M[H]&&M[H].m(g,null);A(e,_),A(e,k),A(k,E),A(e,C),A(e,n),Z.m(n,null),A(e,p),A(e,u),se&&se.m(u,null),A(e,m),ne&&ne.m(e,null),A(e,v),b=!0},p(I,N){if((!b||N[0]&2)&&t!==(t=I[38].taskVersions[I[38].selectedVersion].task_name+"")&&Ie(i,t),I[38].taskVersions[I[38].selectedVersion].category?y?(y.p(I,N),N[0]&2&&ae(y,1)):(y=un(I),y.c(),ae(y,1),y.m(o,null)):y&&(Ge(),ue(y,1,1,()=>{y=null}),je()),I[38].taskVersions[I[38].selectedVersion].modality?O?(O.p(I,N),N[0]&2&&ae(O,1)):(O=dn(I),O.c(),ae(O,1),O.m(c,null)):O&&(Ge(),ue(O,1,1,()=>{O=null}),je()),N[0]&2){D=Ve(Object.entries(I[38].taskVersions[I[38].selectedVersion].input_types));let H;for(H=0;H<D.length;H+=1){const T=on(I,D,H);M[H]?(M[H].p(T,N),ae(M[H],1)):(M[H]=pn(T),M[H].c(),ae(M[H],1),M[H].m(g,null))}for(Ge(),H=D.length;H<M.length;H+=1)G(H);je()}(!b||N[0]&2)&&w!==(w=bn(I[38].taskVersions[I[38].selectedVersion])+"")&&Ie(E,w),j===(j=Y(I,N))&&Z?Z.p(I,N):(Z.d(1),Z=j(I),Z&&(Z.c(),Z.m(n,null))),se&&se.p&&(!b||N[0]&32770)&&ns(se,le,I,I[15],b?ls(le,I[15],N,vl):is(I[15]),an),ne&&ne.p&&(!b||N[0]&32770)&&ns(ne,de,I,I[15],b?ls(de,I[15],N,El):is(I[15]),ln)},i(I){if(!b){ae(y),ae(O);for(let N=0;N<D.length;N+=1)ae(M[N]);ae(se,I),ae(ne,I),b=!0}},o(I){ue(y),ue(O),M=M.filter(Boolean);for(let N=0;N<M.length;N+=1)ue(M[N]);ue(se,I),ue(ne,I),b=!1},d(I){I&&x(e),y&&y.d(),O&&O.d(),zt(M,I),Z.d(),se&&se.d(I),ne&&ne.d(I)}}}function un(l){let e,s,t,i,a;s=new $n({props:{value:l[38].taskVersions[l[38].selectedVersion].category}});function o(){return l[18](l[38])}return{c(){e=F("button"),Ft(s.$$.fragment),this.h()},l(d){e=V(d,"BUTTON",{class:!0});var c=q(e);Vt(s.$$.fragment,c),c.forEach(x),this.h()},h(){$(e,"class","btn btn-link p-0")},m(d,c){ce(d,e,c),Ut(s,e,null),t=!0,i||(a=st(e,"click",o),i=!0)},p(d,c){l=d;const h={};c[0]&2&&(h.value=l[38].taskVersions[l[38].selectedVersion].category),s.$set(h)},i(d){t||(ae(s.$$.fragment,d),t=!0)},o(d){ue(s.$$.fragment,d),t=!1},d(d){d&&x(e),Ht(s),i=!1,a()}}}function dn(l){let e,s,t,i,a;s=new $n({props:{value:l[38].taskVersions[l[38].selectedVersion].modality}});function o(){return l[19](l[38])}return{c(){e=F("button"),Ft(s.$$.fragment),this.h()},l(d){e=V(d,"BUTTON",{class:!0});var c=q(e);Vt(s.$$.fragment,c),c.forEach(x),this.h()},h(){$(e,"class","btn btn-link p-0")},m(d,c){ce(d,e,c),Ut(s,e,null),t=!0,i||(a=st(e,"click",o),i=!0)},p(d,c){l=d;const h={};c[0]&2&&(h.value=l[38].taskVersions[l[38].selectedVersion].modality),s.$set(h)},i(d){t||(ae(s.$$.fragment,d),t=!0)},o(d){ue(s.$$.fragment,d),t=!1},d(d){d&&x(e),Ht(s),i=!1,a()}}}function pn(l){let e,s,t=l[44]+"",i,a,o,d,c,h;return d=new kl({props:{value:l[45]}}),{c(){e=F("div"),s=F("div"),i=ye(t),a=re(),o=F("div"),Ft(d.$$.fragment),c=re(),this.h()},l(g){e=V(g,"DIV",{class:!0});var _=q(e);s=V(_,"DIV",{class:!0});var k=q(s);i=Te(k,t),k.forEach(x),a=oe(_),o=V(_,"DIV",{});var w=q(o);Vt(d.$$.fragment,w),w.forEach(x),c=oe(_),_.forEach(x),this.h()},h(){$(s,"class","input-type-text me-1 svelte-v3mpfp"),$(e,"class","d-flex flex-row")},m(g,_){ce(g,e,_),A(e,s),A(s,i),A(e,a),A(e,o),Ut(d,o,null),A(e,c),h=!0},p(g,_){(!h||_[0]&2)&&t!==(t=g[44]+"")&&Ie(i,t);const k={};_[0]&2&&(k.value=g[45]),d.$set(k)},i(g){h||(ae(d.$$.fragment,g),h=!0)},o(g){ue(d.$$.fragment,g),h=!1},d(g){g&&x(e),Ht(d)}}}function Sl(l){let e=l[38].taskVersions[l[38].selectedVersion].version+"",s;return{c(){s=ye(e)},l(t){s=Te(t,e)},m(t,i){ce(t,s,i)},p(t,i){i[0]&2&&e!==(e=t[38].taskVersions[t[38].selectedVersion].version+"")&&Ie(s,e)},d(t){t&&x(s)}}}function Ol(l){let e,s,t,i,a=Ve(hs(Object.keys(l[38].taskVersions))),o=[];for(let c=0;c<a.length;c+=1)o[c]=fn(rn(l,a,c));function d(){l[20].call(e,l[39],l[40])}return{c(){e=F("select");for(let c=0;c<o.length;c+=1)o[c].c();this.h()},l(c){e=V(c,"SELECT",{class:!0,"aria-label":!0});var h=q(e);for(let g=0;g<o.length;g+=1)o[g].l(h);h.forEach(x),this.h()},h(){$(e,"class","form-select"),$(e,"aria-label",s="Version for task "+l[38].taskVersions[l[38].selectedVersion].task_name),l[38].selectedVersion===void 0&&Qn(d)},m(c,h){ce(c,e,h);for(let g=0;g<o.length;g+=1)o[g]&&o[g].m(e,null);Ms(e,l[38].selectedVersion,!0),t||(i=st(e,"change",d),t=!0)},p(c,h){if(l=c,h[0]&2){a=Ve(hs(Object.keys(l[38].taskVersions)));let g;for(g=0;g<a.length;g+=1){const _=rn(l,a,g);o[g]?o[g].p(_,h):(o[g]=fn(_),o[g].c(),o[g].m(e,null))}for(;g<o.length;g+=1)o[g].d(1);o.length=a.length}h[0]&2&&s!==(s="Version for task "+l[38].taskVersions[l[38].selectedVersion].task_name)&&$(e,"aria-label",s),h[0]&2&&Ms(e,l[38].selectedVersion)},d(c){c&&x(e),zt(o,c),t=!1,i()}}}function fn(l){let e,s=(l[41]||"None")+"",t,i;return{c(){e=F("option"),t=ye(s),this.h()},l(a){e=V(a,"OPTION",{});var o=q(e);t=Te(o,s),o.forEach(x),this.h()},h(){e.__value=i=l[41],It(e,e.__value)},m(a,o){ce(a,e,o),A(e,t)},p(a,o){o[0]&2&&s!==(s=(a[41]||"None")+"")&&Ie(t,s),o[0]&2&&i!==(i=a[41])&&(e.__value=i,It(e,e.__value))},d(a){a&&x(e)}}}function mn(l){let e,s,t=l[38].taskVersions[l[38].selectedVersion]&&hn(l);return{c(){t&&t.c(),e=Ae()},l(i){t&&t.l(i),e=Ae()},m(i,a){t&&t.m(i,a),ce(i,e,a),s=!0},p(i,a){i[38].taskVersions[i[38].selectedVersion]?t?(t.p(i,a),a[0]&2&&ae(t,1)):(t=hn(i),t.c(),ae(t,1),t.m(e.parentNode,e)):t&&(Ge(),ue(t,1,1,()=>{t=null}),je())},i(i){s||(ae(t),s=!0)},o(i){ue(t),s=!1},d(i){i&&x(e),t&&t.d(i)}}}function gn(l){let e,s,t=l[35].groupTitle+"",i,a,o,d,c=Ve(l[35].tasks),h=[];for(let _=0;_<c.length;_+=1)h[_]=mn(nn(l,c,_));const g=_=>ue(h[_],1,1,()=>{h[_]=null});return{c(){e=F("tr"),s=F("th"),i=ye(t),a=re();for(let _=0;_<h.length;_+=1)h[_].c();o=Ae(),this.h()},l(_){e=V(_,"TR",{class:!0});var k=q(e);s=V(k,"TH",{colspan:!0,class:!0});var w=q(s);i=Te(w,t),w.forEach(x),k.forEach(x),a=oe(_);for(let E=0;E<h.length;E+=1)h[E].l(_);o=Ae(),this.h()},h(){$(s,"colspan","3"),$(s,"class","svelte-v3mpfp"),$(e,"class","border-top")},m(_,k){ce(_,e,k),A(e,s),A(s,i),ce(_,a,k);for(let w=0;w<h.length;w+=1)h[w]&&h[w].m(_,k);ce(_,o,k),d=!0},p(_,k){if((!d||k[0]&2)&&t!==(t=_[35].groupTitle+"")&&Ie(i,t),k[0]&32794){c=Ve(_[35].tasks);let w;for(w=0;w<c.length;w+=1){const E=nn(_,c,w);h[w]?(h[w].p(E,k),ae(h[w],1)):(h[w]=mn(E),h[w].c(),ae(h[w],1),h[w].m(o.parentNode,o))}for(Ge(),w=c.length;w<h.length;w+=1)g(w);je()}},i(_){if(!d){for(let k=0;k<c.length;k+=1)ae(h[k]);d=!0}},o(_){h=h.filter(Boolean);for(let k=0;k<h.length;k+=1)ue(h[k]);d=!1},d(_){_&&(x(e),x(a),x(o)),zt(h,_)}}}function Al(l){let e,s,t,i,a="Filter tasks",o,d,c,h,g,_,k,w,E,C="Reset",n,r,p='<div class="col"><select id="package-filter" class="invisible"></select></div> <div class="col"><select id="category-filter" class="invisible"></select></div> <div class="col"><select id="modality-filter" class="invisible"></select></div> <div class="col"><select id="input-type-filter" class="invisible"></select></div> <div class="col"><select id="tag-filter" class="invisible"></select></div>',u,m,v,b,y,O,D;const M=[Tl,yl],G=[];function Y(j,Z){return j[0].length===0?0:1}return m=Y(l),v=G[m]=M[m](l),{c(){e=F("div"),s=F("div"),t=F("div"),i=F("div"),i.textContent=a,o=re(),d=F("div"),c=F("div"),h=F("div"),g=F("div"),_=F("input"),k=re(),w=F("div"),E=F("button"),E.textContent=C,n=re(),r=F("div"),r.innerHTML=p,u=re(),v.c(),b=Ae(),this.h()},l(j){e=V(j,"DIV",{class:!0});var Z=q(e);s=V(Z,"DIV",{class:!0});var le=q(s);t=V(le,"DIV",{class:!0});var se=q(t);i=V(se,"DIV",{class:!0,"data-svelte-h":!0}),Oe(i)!=="svelte-gyxyme"&&(i.textContent=a),o=oe(se),d=V(se,"DIV",{class:!0});var de=q(d);c=V(de,"DIV",{class:!0});var ne=q(c);h=V(ne,"DIV",{class:!0});var I=q(h);g=V(I,"DIV",{class:!0});var N=q(g);_=V(N,"INPUT",{type:!0,class:!0,placeholder:!0}),N.forEach(x),I.forEach(x),k=oe(ne),w=V(ne,"DIV",{});var H=q(w);E=V(H,"BUTTON",{class:!0,"data-svelte-h":!0}),Oe(E)!=="svelte-1iagwg6"&&(E.textContent=C),H.forEach(x),ne.forEach(x),de.forEach(x),se.forEach(x),n=oe(le),r=V(le,"DIV",{class:!0,"data-svelte-h":!0}),Oe(r)!=="svelte-1gf425z"&&(r.innerHTML=p),le.forEach(x),Z.forEach(x),u=oe(j),v.l(j),b=Ae(),this.h()},h(){$(i,"class","col-3 col-lg-6"),$(_,"type","text"),$(_,"class","form-control ms-auto"),$(_,"placeholder","Search..."),$(g,"class","input-group input-group-sm"),$(h,"class","flex-fill"),$(E,"class","btn btn-outline-secondary btn-sm ms-3"),$(c,"class","d-flex"),$(d,"class","col-9 col-lg-6"),$(t,"class","row mb-2"),$(r,"class","row"),$(s,"class","card-body"),$(e,"class","card mb-2"),yt(e,"invisible",l[0].length===0),yt(e,"collapse",l[0].length===0)},m(j,Z){ce(j,e,Z),A(e,s),A(s,t),A(t,i),A(t,o),A(t,d),A(d,c),A(c,h),A(h,g),A(g,_),It(_,l[2]),A(c,k),A(c,w),A(w,E),A(s,n),A(s,r),ce(j,u,Z),G[m].m(j,Z),ce(j,b,Z),y=!0,O||(D=[st(_,"input",l[17]),st(E,"click",l[8])],O=!0)},p(j,Z){Z[0]&4&&_.value!==j[2]&&It(_,j[2]),(!y||Z[0]&1)&&yt(e,"invisible",j[0].length===0),(!y||Z[0]&1)&&yt(e,"collapse",j[0].length===0);let le=m;m=Y(j),m===le?G[m].p(j,Z):(Ge(),ue(G[le],1,1,()=>{G[le]=null}),je(),v=G[m],v?v.p(j,Z):(v=G[m]=M[m](j),v.c()),ae(v,1),v.m(b.parentNode,b))},i(j){y||(ae(v),y=!0)},o(j){ue(v),y=!1},d(j){j&&(x(e),x(u),x(b)),G[m].d(j),O=!1,Yn(D)}}}let zn="pkg_name";function dt(l,e,s){l==null||l.setData([{text:s,placeholder:!0},...e])}function _n(l,e){return[...new Set(l.flatMap(s=>s.task_list).map(e).filter(s=>s!==null))]}function pt(l){return l.map(e=>({text:e,value:e}))}function bn(l){const e=[];return e.push(...l.tags),l.authors&&e.push(l.authors),e.join(", ")}function Ll(l,e,s){let t,i,{$$slots:a={},$$scope:o}=e,{taskGroups:d}=e,c=[],h=[],g="",_,k="",w,E="",C,n="",r,p="",u,m="",v={pkg_name:"Task"};function b(){d&&(se(d),s(0,c=ol(d,zn)),y())}function y(){s(1,h=c.map(T=>{const R=T.tasks.filter(X=>O(X.taskVersions[X.selectedVersion]));return{...T,tasks:R}}).filter(T=>T.tasks.length>0))}function O(T){return D(T)&&M(T)&&G(T)&&j(T)&&Y(T)&&Z(T)}function D(T){if(!g)return!0;const R=g.toLowerCase();return T.task_name.toLowerCase().includes(R)||T.pkg_name.toLowerCase().includes(R)||T.category&&T.category.toLowerCase().includes(R)||T.modality&&T.modality.toLowerCase().includes(R)||T.authors&&T.authors.toLowerCase().includes(R)||Object.keys(T.input_types).find(X=>X.toLowerCase().includes(R))!==void 0||T.tags.find(X=>X.toLowerCase().includes(R))!==void 0}function M(T){return k?T.category!==null&&T.category===k:!0}function G(T){return E?T.modality!==null&&T.modality===E:!0}function Y(T){return n?T.pkg_name===n:!0}function j(T){return p?T.tags.find(R=>R===p)!==void 0:!0}function Z(T){return m?Object.keys(T.input_types).find(R=>R===m)!==void 0:!0}function le(){s(2,g=""),s(10,k=""),_==null||_.setSelected(""),w==null||w.setSelected(""),C==null||C.setSelected(""),r==null||r.setSelected(""),u==null||u.setSelected("")}function se(T){dt(_,pt(_n(T,R=>R.category)),"Category"),dt(w,pt(_n(T,R=>R.modality)),"Modality"),dt(C,pt([...new Set(T.map(R=>R.pkg_name))]),"Package"),dt(r,pt([...new Set(T.flatMap(R=>R.task_list).flatMap(R=>R.tags).filter(R=>R!==null))]),"Tag"),dt(u,pt([...new Set(T.flatMap(R=>R.task_list).flatMap(R=>Object.keys(R.input_types)))]),"Input type")}En(()=>{s(3,_=de("category-filter","Select category","Category",T=>{s(10,k=T)})),s(4,w=de("modality-filter","Select modality","Modality",T=>{s(11,E=T)})),C=de("package-filter","Select package","Package",T=>{s(12,n=T)}),r=de("tag-filter","Select tag","Tag",T=>{s(13,p=T)}),u=de("input-type-filter","Select input type","Input type",T=>{s(14,m=T)}),b()});function de(T,R,X,ie){const B=document.getElementById(T);return B==null||B.classList.remove("invisible"),new dl({select:`#${T}`,settings:{showSearch:!0,allowDeselect:!0,ariaLabel:R},events:{afterChange:Q=>{Q.length===0||Q[0].value===X?ie(""):ie(Q[0].value)}}})}function ne(){g=this.value,s(2,g)}const I=T=>_==null?void 0:_.setSelected(T.taskVersions[T.selectedVersion].category),N=T=>w==null?void 0:w.setSelected(T.taskVersions[T.selectedVersion].modality);function H(T,R){T[R].selectedVersion=Kn(this),s(1,h),s(2,g),s(10,k),s(11,E),s(12,n),s(13,p),s(14,m),s(0,c)}return l.$$set=T=>{"taskGroups"in T&&s(9,d=T.taskGroups),"$$scope"in T&&s(15,o=T.$$scope)},l.$$.update=()=>{l.$$.dirty[0]&512&&d&&b(),l.$$.dirty[0]&31749&&(g||k||E||n||p||m?y():s(1,h=c)),l.$$.dirty[0]&2&&s(6,t=h.reduce((T,R)=>T+R.tasks.length,0)),l.$$.dirty[0]&1&&s(5,i=c.reduce((T,R)=>T+R.tasks.length,0))},[c,h,g,_,w,i,t,v,le,d,k,E,n,p,m,o,a,ne,I,N,H]}class xl extends Pt{constructor(e){super(),$t(this,e,Ll,Al,Mt,{taskGroups:9},null,[-1,-1])}}function kn(l){let e,s='<i class="bi bi-info-circle"></i>',t,i;function a(){return l[3](l[4])}return{c(){e=F("button"),e.innerHTML=s,this.h()},l(o){e=V(o,"BUTTON",{class:!0,"data-svelte-h":!0}),Oe(e)!=="svelte-1dukvoy"&&(e.innerHTML=s),this.h()},h(){$(e,"class","btn btn-info ms-2")},m(o,d){ce(o,e,d),t||(i=st(e,"click",a),t=!0)},p(o,d){l=o},d(o){o&&x(e),t=!1,i()}}}function Cl(l){let e,s=l[4].docs_info&&kn(l);return{c(){s&&s.c(),e=Ae()},l(t){s&&s.l(t),e=Ae()},m(t,i){s&&s.m(t,i),ce(t,e,i)},p(t,i){t[4].docs_info?s?s.p(t,i):(s=kn(t),s.c(),s.m(e.parentNode,e)):s&&(s.d(1),s=null)},d(t){t&&x(e),s&&s.d(t)}}}function Il(l){var r,p;let e,s,t,i,a,o,d,c=((r=l[1])==null?void 0:r.task_name)+"",h,g,_,k,w,E,C=l[0]((p=l[1])==null?void 0:p.docs_info)+"",n;return e=new xl({props:{taskGroups:zi,$$slots:{"docs-info":[Cl,({task:u})=>({4:u}),({task:u})=>u?16:0]},$$scope:{ctx:l}}}),{c(){Ft(e.$$.fragment),s=re(),t=F("div"),i=F("div"),a=F("div"),o=F("div"),d=F("h5"),h=ye(c),g=re(),_=F("button"),k=re(),w=F("div"),E=new Jn(!1),this.h()},l(u){Vt(e.$$.fragment,u),s=oe(u),t=V(u,"DIV",{class:!0,id:!0,tabindex:!0});var m=q(t);i=V(m,"DIV",{class:!0});var v=q(i);a=V(v,"DIV",{class:!0});var b=q(a);o=V(b,"DIV",{class:!0});var y=q(o);d=V(y,"H5",{class:!0});var O=q(d);h=Te(O,c),O.forEach(x),g=oe(y),_=V(y,"BUTTON",{type:!0,class:!0,"data-bs-dismiss":!0,"aria-label":!0}),q(_).forEach(x),y.forEach(x),k=oe(b),w=V(b,"DIV",{class:!0});var D=q(w);E=ei(D,!1),D.forEach(x),b.forEach(x),v.forEach(x),m.forEach(x),this.h()},h(){$(d,"class","modal-title"),$(_,"type","button"),$(_,"class","btn-close"),$(_,"data-bs-dismiss","modal"),$(_,"aria-label","Close"),$(o,"class","modal-header"),E.a=null,$(w,"class","modal-body"),$(a,"class","modal-content"),$(i,"class","modal-dialog modal-dialog-scrollable"),$(t,"class","modal modal-xl"),$(t,"id","docs-info-modal"),$(t,"tabindex","-1")},m(u,m){Ut(e,u,m),ce(u,s,m),ce(u,t,m),A(t,i),A(i,a),A(a,o),A(o,d),A(d,h),A(o,g),A(o,_),A(a,k),A(a,w),E.m(C,w),n=!0},p(u,[m]){var b,y;const v={};m&48&&(v.$$scope={dirty:m,ctx:u}),e.$set(v),(!n||m&2)&&c!==(c=((b=u[1])==null?void 0:b.task_name)+"")&&Ie(h,c),(!n||m&2)&&C!==(C=u[0]((y=u[1])==null?void 0:y.docs_info)+"")&&E.p(C)},i(u){n||(ae(e.$$.fragment,u),n=!0)},o(u){ue(e.$$.fragment,u),n=!1},d(u){u&&(x(s),x(t)),Ht(e,u)}}}function Rl(l){const e=document.getElementById(l),s=bootstrap.Modal.getInstance(e);return s||new bootstrap.Modal(e)}function Nl(l,e,s){let t=null;function i(d){s(1,t=d),Rl("docs-info-modal").show()}function a(d){return d?$i.sanitize(ee.parse(d)):""}return[a,t,i,d=>i(d)]}class zl extends Pt{constructor(e){super(),$t(this,e,Nl,Il,Mt,{formatMarkdown:0})}get formatMarkdown(){return this.$$.ctx[0]}}export{zl as component};
